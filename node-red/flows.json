[
    {
        "id": "ee81cc611986e56f",
        "type": "tab",
        "label": "InputRead",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "6910828fa524c0ad",
        "type": "tab",
        "label": "Alarmas",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "2810139c92bd41d8",
        "type": "tab",
        "label": "ReciveGasControl",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "8389501e8b369815",
        "type": "tab",
        "label": "RaspadorDisplay",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "a9cd65b1c67ffc15",
        "type": "tab",
        "label": "AnalogSet",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "3b30c3f369fbd9c7",
        "type": "tab",
        "label": "CreateTiket",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1cc0ca82ef3a0a9b",
        "type": "tab",
        "label": "LoadConfig",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "8b7a3cc1bad4cf4b",
        "type": "tab",
        "label": "DatabaseManager",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "619addbf2da107aa",
        "type": "tab",
        "label": "MainDisplay",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "b29ed1d9bf2c7ea9",
        "type": "tab",
        "label": "Calculo-flujo",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "33c28a10b022eebb",
        "type": "tab",
        "label": "Output_write",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "flujo-tiquete-lpg",
        "type": "tab",
        "label": "Tiquete LPG",
        "disabled": false,
        "info": "Flujo para generar tiquetes de despacho de LPG"
    },
    {
        "id": "c11465eb77fd5a0c",
        "type": "modbus-client",
        "name": "V560",
        "clienttype": "simpleser",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "127.0.0.1",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyUSB0",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "57600",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": 1,
        "commandDelay": 1,
        "clientTimeout": 1000,
        "reconnectOnTimeout": true,
        "reconnectTimeout": 2000,
        "parallelUnitIdsAllowed": true,
        "showErrors": false,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "9d0d97191e966daa",
        "type": "influxdb",
        "hostname": "127.0.0.1",
        "port": "8086",
        "protocol": "http",
        "database": "database",
        "name": "InflusDB",
        "usetls": false,
        "tls": "",
        "influxdbVersion": "2.0",
        "url": "http://localhost:8086",
        "timeout": "10",
        "rejectUnauthorized": true
    },
    {
        "id": "365f28a092b798cf",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "f024d651beb8c867",
        "type": "ui_tab",
        "name": "Alarmas",
        "icon": "dashboard",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "8fcf31b05256c400",
        "type": "ui_tab",
        "name": "reciveCleaner",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "7ea6cfb5e131380a",
        "type": "ui_tab",
        "name": "AnalogSet",
        "icon": "dashboard",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "7fca2bd4d0a6004c",
        "type": "ui_tab",
        "name": "Tiket",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "760bb6adf93f32f8",
        "type": "ui_group",
        "name": "DisplayAlarms",
        "tab": "f024d651beb8c867",
        "order": 1,
        "disp": false,
        "width": "30",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2b6a27989e458e3b",
        "type": "ui_group",
        "name": "G1",
        "tab": "8fcf31b05256c400",
        "order": 1,
        "disp": true,
        "width": 22,
        "collapse": false,
        "className": ""
    },
    {
        "id": "e230319ddc57e5e6",
        "type": "ui_group",
        "name": "g1",
        "tab": "7ea6cfb5e131380a",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "42b15aafb8d1be1d",
        "type": "ui_group",
        "name": "G1",
        "tab": "7fca2bd4d0a6004c",
        "order": 1,
        "disp": true,
        "width": 30,
        "collapse": false,
        "className": ""
    },
    {
        "id": "8a9376f64511d022",
        "type": "sqlitedb",
        "db": "/data/db/despacho.db",
        "mode": "RWC"
    },
    {
        "id": "677eeae544510f07",
        "type": "ui_tab",
        "name": "Main",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f5490ef343d6cb98",
        "type": "ui_group",
        "name": "G1",
        "tab": "677eeae544510f07",
        "order": 1,
        "disp": false,
        "width": 30,
        "collapse": false,
        "className": ""
    },
    {
        "id": "5e1235646b51a204",
        "type": "ui_spacer",
        "z": "6910828fa524c0ad",
        "name": "spacer",
        "group": "760bb6adf93f32f8",
        "order": 2,
        "width": 11,
        "height": 1
    },
    {
        "id": "0a4661198b96304f",
        "type": "ui_spacer",
        "z": "6910828fa524c0ad",
        "name": "spacer",
        "group": "760bb6adf93f32f8",
        "order": 4,
        "width": 11,
        "height": 1
    },
    {
        "id": "a5843e127eb4f722",
        "type": "postgreSQLConfig",
        "name": "",
        "host": "127.0.0.1",
        "hostFieldType": "str",
        "port": "5432",
        "portFieldType": "num",
        "database": "gas_dispatch_db",
        "databaseFieldType": "str",
        "ssl": "false",
        "sslFieldType": "bool",
        "applicationName": "",
        "applicationNameType": "str",
        "max": "10",
        "maxFieldType": "num",
        "idle": "1000",
        "idleFieldType": "num",
        "connectionTimeout": "10000",
        "connectionTimeoutFieldType": "num",
        "user": "admin",
        "userFieldType": "str",
        "password": "posgresadmin",
        "passwordFieldType": "str"
    },
    {
        "id": "b1f3173df94ca611",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 1,
        "width": 2,
        "height": 1
    },
    {
        "id": "65b587efe53c969d",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 3,
        "width": 2,
        "height": 1
    },
    {
        "id": "01b75bf579301087",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 4,
        "width": 2,
        "height": 1
    },
    {
        "id": "ddc4ce6d0eeec43a",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 5,
        "width": 2,
        "height": 1
    },
    {
        "id": "259d56b3b8829bab",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 6,
        "width": 2,
        "height": 1
    },
    {
        "id": "e163e13dea4c14e2",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 7,
        "width": 2,
        "height": 1
    },
    {
        "id": "252c4be39f78bfa3",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 8,
        "width": 2,
        "height": 1
    },
    {
        "id": "d7653166accf8fec",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 9,
        "width": 2,
        "height": 1
    },
    {
        "id": "a0cbca5d209ca690",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 10,
        "width": 2,
        "height": 1
    },
    {
        "id": "42f8e5260c8b99c2",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 11,
        "width": 2,
        "height": 1
    },
    {
        "id": "86f1cb355789c7c4",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 12,
        "width": 2,
        "height": 1
    },
    {
        "id": "c71ca6086f8436a0",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 13,
        "width": 2,
        "height": 1
    },
    {
        "id": "4b9d6e40b1c3f5c4",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 14,
        "width": 2,
        "height": 1
    },
    {
        "id": "0b28e914220f8d8c",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 15,
        "width": 2,
        "height": 1
    },
    {
        "id": "3e695405fe6336c5",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 16,
        "width": 2,
        "height": 1
    },
    {
        "id": "5cd21b671a68b260",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 17,
        "width": 2,
        "height": 1
    },
    {
        "id": "f91748ed34565da3",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 18,
        "width": 2,
        "height": 1
    },
    {
        "id": "71df12c5730be14c",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 19,
        "width": 2,
        "height": 1
    },
    {
        "id": "b9d807d25d6951ee",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 20,
        "width": 2,
        "height": 1
    },
    {
        "id": "fc7c878dddeeac1b",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 21,
        "width": 2,
        "height": 1
    },
    {
        "id": "95cebfcbc8c9e565",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 22,
        "width": 2,
        "height": 1
    },
    {
        "id": "6843a96ad842b6c5",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 23,
        "width": 2,
        "height": 1
    },
    {
        "id": "5959d89802295bf4",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 24,
        "width": 2,
        "height": 1
    },
    {
        "id": "6c9b116babad2566",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 25,
        "width": 2,
        "height": 1
    },
    {
        "id": "3e8bc55e0b878aea",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 26,
        "width": 2,
        "height": 1
    },
    {
        "id": "f11ff75876fd5c00",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 27,
        "width": 2,
        "height": 1
    },
    {
        "id": "592ed5cfbce3b2e7",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 28,
        "width": 2,
        "height": 1
    },
    {
        "id": "c62761683cf0075a",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 29,
        "width": 2,
        "height": 1
    },
    {
        "id": "33ef215b8a02ab97",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 30,
        "width": 2,
        "height": 1
    },
    {
        "id": "f224d8b8f87298e1",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 31,
        "width": 2,
        "height": 1
    },
    {
        "id": "92c8b87d7ce83f57",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 32,
        "width": 2,
        "height": 1
    },
    {
        "id": "eab49f318d7d513f",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "42b15aafb8d1be1d",
        "order": 33,
        "width": 2,
        "height": 1
    },
    {
        "id": "c2bd2524a791d21d",
        "type": "modbus-client",
        "name": "ModbusSIM",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "192.168.1.80",
        "tcpPort": 502,
        "tcpType": "TCP-RTU-BUFFERED",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": 9600,
        "serialDatabits": 8,
        "serialStopbits": 1,
        "serialParity": "none",
        "serialConnectionDelay": 100,
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": 1,
        "commandDelay": 1,
        "clientTimeout": 1000,
        "reconnectOnTimeout": true,
        "reconnectTimeout": 2000,
        "parallelUnitIdsAllowed": true,
        "showErrors": false,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "c87a54b64e7e87ab",
        "type": "ui_spacer",
        "z": "8389501e8b369815",
        "name": "spacer",
        "group": "2b6a27989e458e3b",
        "order": 2,
        "width": 19,
        "height": 1
    },
    {
        "id": "017a736946a464a1",
        "type": "modbus-client",
        "name": "SIM_MBTCP",
        "clienttype": "tcp",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "localhost",
        "tcpPort": "5502",
        "tcpType": "TCP-RTU-BUFFERED",
        "serialPort": "/dev/ttyUSB",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": 9600,
        "serialDatabits": 8,
        "serialStopbits": 1,
        "serialParity": "none",
        "serialConnectionDelay": 100,
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": 1,
        "commandDelay": 1,
        "clientTimeout": 1000,
        "reconnectOnTimeout": true,
        "reconnectTimeout": 2000,
        "parallelUnitIdsAllowed": true,
        "showErrors": false,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "467989ca35bb4f62",
        "type": "sqlitedb",
        "db": "/data/db/tags_terminal_galan.db",
        "mode": "RWC"
    },
    {
        "id": "7cfcd0a8167643a7",
        "type": "sqlitedb",
        "db": "/data/db/llenadero.db",
        "mode": "RWC"
    },
    {
        "id": "tab-tiquete",
        "type": "ui_tab",
        "name": "TiqueteLPG",
        "icon": "dashboard",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "grupo-tiquete",
        "type": "ui_group",
        "name": "Tiquete de Despacho",
        "tab": "tab-tiquete",
        "order": 1,
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "6b567c8348e0697c",
        "type": "ui_spacer",
        "z": "flujo-tiquete-lpg",
        "name": "spacer",
        "group": "grupo-tiquete",
        "order": 2,
        "width": 9,
        "height": 1
    },
    {
        "id": "87dbe8401578e92c",
        "type": "ui_tab",
        "name": "DBDisplay",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "e7ec3fb323673703",
        "type": "ui_group",
        "name": "Cisternas",
        "tab": "87dbe8401578e92c",
        "order": 1,
        "disp": true,
        "width": 11,
        "collapse": false,
        "className": ""
    },
    {
        "id": "36e5b53a327c3f7d",
        "type": "ui_group",
        "name": "Baches",
        "tab": "87dbe8401578e92c",
        "order": 2,
        "disp": true,
        "width": 13,
        "collapse": false,
        "className": ""
    },
    {
        "id": "a08ba4a07153cf8c",
        "type": "ui_group",
        "name": "Llenados",
        "tab": "87dbe8401578e92c",
        "order": 3,
        "disp": true,
        "width": 13,
        "collapse": false,
        "className": ""
    },
    {
        "id": "0804165414578afd",
        "type": "ui_group",
        "name": "Group 4",
        "tab": "87dbe8401578e92c",
        "order": 4,
        "disp": true,
        "width": 16
    },
    {
        "id": "7b3be0c679ae224c",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "f5490ef343d6cb98",
        "order": 5,
        "width": 3,
        "height": 1
    },
    {
        "id": "cf48fd846ec89912",
        "type": "ui_spacer",
        "z": "619addbf2da107aa",
        "name": "spacer",
        "group": "f5490ef343d6cb98",
        "order": 11,
        "width": 11,
        "height": 1
    },
    {
        "id": "fe08babdb384d721",
        "type": "ui_spacer",
        "z": "8b7a3cc1bad4cf4b",
        "name": "spacer",
        "group": "e7ec3fb323673703",
        "order": 2,
        "width": 8,
        "height": 1
    },
    {
        "id": "6bac67e49e0eabea",
        "type": "ui_spacer",
        "z": "8b7a3cc1bad4cf4b",
        "name": "spacer",
        "group": "36e5b53a327c3f7d",
        "order": 2,
        "width": 10,
        "height": 1
    },
    {
        "id": "b3428205bbf571a5",
        "type": "ui_spacer",
        "z": "8b7a3cc1bad4cf4b",
        "name": "spacer",
        "group": "a08ba4a07153cf8c",
        "order": 2,
        "width": 10,
        "height": 1
    },
    {
        "id": "20c65214e90bf855",
        "type": "ui_spacer",
        "z": "8b7a3cc1bad4cf4b",
        "name": "spacer",
        "group": "0804165414578afd",
        "order": 2,
        "width": 13,
        "height": 1
    },
    {
        "id": "f00c53b575e9053a",
        "type": "modbus-read",
        "z": "ee81cc611986e56f",
        "name": "ReadPLC",
        "topic": "",
        "showStatusActivities": true,
        "logIOActivities": false,
        "showErrors": true,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "71",
        "quantity": "12",
        "rate": "2000",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "017a736946a464a1",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 340,
        "y": 420,
        "wires": [
            [
                "5a0bcdb583d2958c"
            ],
            []
        ]
    },
    {
        "id": "ce83e8e3ba259427",
        "type": "inject",
        "z": "ee81cc611986e56f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 350,
        "y": 220,
        "wires": [
            [
                "a892b35494408802"
            ]
        ]
    },
    {
        "id": "a892b35494408802",
        "type": "function",
        "z": "ee81cc611986e56f",
        "name": "Power UP",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "// El código añadido aquí se ejecutará una vez\n// cuando el nodo es iniciado.\n\nglobal.set(\"PU\", 1);\nglobal.set(\"IS_REPORT\", false);\n\n// let tag = {\n//     \"ID\": 0,\n//     \"TagName\": \"PIT_2001\",\n//     \"Descripcion\": \"Presion de Descarga\",\n//     \"und\": \"PSI\",\n//     \"PV\": 0.0,\n//     \"HH\": 95.0,\n//     \"H\": 90.0,\n//     \"L\": 15.0,\n//     \"LL\": 10,\n//     \"Max\": 560,\n//     \"Min\": 0,\n//     \"enableHH\": 1,\n//     \"enableH\": 1,\n//     \"enableL\": 1,\n//     \"enableLL\": 1,\n//     \"ALARM\": \"#00f800\",\n//     \"FAIL\": 0,\n// }\n// global.set(tag.TagName,tag);\n\n// tag = {\n//     \"ID\": 0,\n//     \"TagName\": \"TIT_2001\",\n//     \"Descripcion\": \"Teperatura de Descarga\",\n//     \"und\": \"°F\",\n//     \"PV\": 0.0,\n//     \"HH\": 95.0,\n//     \"H\": 90.0,\n//     \"L\": 15.0,\n//     \"LL\": 10,\n//     \"Max\": 560,\n//     \"Min\": 0,\n//     \"enableHH\": 1,\n//     \"enableH\": 1,\n//     \"enableL\": 1,\n//     \"enableLL\": 1,\n//     \"ALARM\": \"#00f800\",\n//     \"FAIL\": 0,\n// };\n// global.set(tag.TagName, tag);\n\nlet tag = {\n    \"ID\": 0,\n    \"TagName\": \"DIT_2001\",\n    \"Descripcion\": \"Densidad de gas\",\n    \"und\": \"kg/m3\",\n    \"PV\": 0.0,\n    \"HH\": 750.0,\n    \"H\": 700.0,\n    \"L\": 450.0,\n    \"LL\": 400,\n    \"Max\": 1000,\n    \"Min\": 0,\n    \"enableHH\": 1,\n    \"enableH\": 1,\n    \"enableL\": 1,\n    \"enableLL\": 1,\n    \"ALARM\": \"#00f800\",\n    \"FAIL\": 0,\n};\nglobal.set(tag.TagName, tag);\n\ntag = {\n    \"ID\": 0,\n    \"TagName\": \"PIT_2002\",\n    \"Descripcion\": \"Presion Gasoducto\",\n    \"und\": \"PSIA\",\n    \"PV\": 0.0,\n    \"HH\": 490,\n    \"H\": 480,\n    \"L\": 20,\n    \"LL\": 10,\n    \"Max\": 600,\n    \"Min\": 0,\n    \"enableHH\": 1,\n    \"enableH\": 1,\n    \"enableL\": 1,\n    \"enableLL\": 1,\n    \"ALARM\": \"#00f800\",\n    \"FAIL\": 0,\n};\nglobal.set(tag.TagName, tag);\n\nlet pid = {\n    PV: 0.0,\n    SP: 2.0,\n    CV: 0.0\n}\n\nglobal.set(\"SIC_2002\", pid);\n\nlet uit_2001 = {\n    FLOW: 0.0,\n    DENSITY: 0.450,\n    TOTAL: 0\n}\nglobal.set(\"UIT_2001\", uit_2001);\n\nlet uit = {\n    SPEED: 0.0,\n    TEMPERATURE: 0.0,\n    PRESSURE_IN: 0.0,\n    PRESSURE_OUT: 0.0,\n    FLOW: 0.0\n}\nglobal.set(\"UIT_2002\", uit);\n\nlet uit_2003 = {\n    FLOW: 0.0,\n    DENSITY: 0.450,\n    TOTAL: 0\n}\nglobal.set(\"UIT_2003\", uit_2003);\n\n\nlet segment = {\n    cisterna_id: 1,\n    segmento_id: 1,\n    temperatura: 35.5,\n    presion: 650,\n    densidad: 0.585,\n    flujo_actual: 150,\n    volumen_acumulado: 0\n};\n\n\n\nglobal.set(\"SEGMENT_VALUES1\", segment);\nglobal.set(\"SEGMENT_VALUES2\", segment);\n\nlet segment_display =\n{\n    CLIENTE: \"cliente\",\n    PRODUCTO: \"Propano\",\n    FECHA: \"dd-mm-aaaa hh:mm:ss\",\n    TIQUETE_No: 100,\n    RVP: 120,\n    MASA_CORIOLIS: 560,\n    VOL_INDICADO: 0,\n    MASA_VAPORES: 0,\n}\nglobal.set(\"SEGMENT_DISPLAY\", segment_display);\n\n//STATUS_CISTERNA 0. Vacia, 1. Llenando, 2. Pausada, 3.Cerrada\nglobal.set(\"STATUS_CISTERNA1\", 0);\n\n\n\n\n\nlet cisterna1 = {\n    numero_sisterna: \"PLACA_XXX\",\n    nombre_conductor: \"CONDUCTOR\",\n    empresa_cliente: \"CLIENTE\",\n    producto_principal: \"PROPANO\",\n    galones_objetivo: 14000,\n    observaciones: \"Observaciones\"\n}\n\nglobal.set(\"CISTERNA1\", cisterna1);\n\nlet cisterna2 = {\n    numero_sisterna: \"PLACA_XXX\",\n    nombre_conductor: \"CONDUCTOR\",\n    empresa_cliente: \"CLIENTE\",\n    producto_principal: \"PROPANO\",\n    galones_objetivo: 14000,\n    observaciones: \"Observaciones\"\n}\n\nglobal.set(\"CISTERNA2\", cisterna2);\n\nlet datos_llenado = {\n    presion: 0,\n    flujo: 0,\n    temperatura: 0,\n    densidad: 0,\n    total: 0,\n    last_total: 0\n};\nglobal.set(\"DATOS_LLENADO\", datos_llenado);\n\n\nlet fill_segment1 =\n{\n    \"cliente\": \"ALMAGAS\",\n    \"producto\": \"PROPANO\",\n    \"cisterna\": \"EJD315\", \n    \"tiquete\": 123,\n     \"fecha\": \"12-18-2025, 8:28:25 AM\", \n     \"rvp\": 180, \n     \"Vol_full\": 14000, \n     \"origen\": \"LLENADO\"\n};\n\nlet promedios={\n    \n        llenado_id :0,\n        flujo_promedio:0.0,\n        densidad_promedio :0.0,\n        presion_promedio :0.0,\n        temperatura_promedio :0.0,\n        volumen_total:0\n\n};\nglobal.set(\"PROMEDIOS\",promedios);\n\nglobal.set(\"FILL_SEGMENT1\",fill_segment1);\nglobal.set(\"FILL_SEGMENT2\", fill_segment1);\n\n",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "5a0bcdb583d2958c",
        "type": "function",
        "z": "ee81cc611986e56f",
        "name": "Get PLC Data",
        "func": "let uit=global.get(\"UIT_2002\");\nlet pit=global.get(\"PIT_2002\");\nlet pid=global.get(\"SIC_2002\");\nlet segment=global.get(\"SEGMENT_VALUES\");\n\n\nuit.SPEED=msg.payload[6]/1000.0;\nuit.TEMPERATURE=msg.payload[7]/1.0;\n\nif(global.get(\"SendPressureIN\")==false)\n{\n   uit.PRESSURE_IN=msg.payload[2];\n\n}\n\nuit.PRESSURE_OUT=msg.payload[3]/1.0;\nuit.FLOW=msg.payload[11]/10.0;\n\nif(global.get(\"SendSIC_CV\")==false && global.get(\"SendSIC_SP\")==false)\n{\n    pid.SP=msg.payload[5]/1000.0;\n    pid.CV=msg.payload[4]/10;\n}\n\n\npid.PV=uit.SPEED;\n\npit.PV = msg.payload[3] / 1.0;\n\nif(global.get(\"SendHH\")==false && global.get(\"SendH\")==false )\n{\n    pit.HH = msg.payload[8] / 10.0;\n    pit.H = msg.payload[9] / 10.0; \n}\n\n\n\n \n\n\nglobal.set(\"UIT_2002\",uit);\nglobal.set(\"PIT_2002\",pit);\nglobal.set(\"SIC_2002\",pid);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "06bd97f38b86dbf8",
        "type": "debug",
        "z": "ee81cc611986e56f",
        "name": "debug 1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 700,
        "y": 340,
        "wires": []
    },
    {
        "id": "92e760591758053b",
        "type": "function",
        "z": "ee81cc611986e56f",
        "name": "function 2",
        "func": "\n\n\n// Función para convertir dos registros de 16 bits a un Int32\nfunction registrosAInt32(lowWord, highWord) {\n    return (highWord << 16) | lowWord;\n}\nlet dit=global.get(\"DIT_2001\");\nlet uit_2001_dit=global.get(\"UIT_2001_DENSITY\");\nlet sel_cisterna=global.get(\"SEL_CISTERNA\");\n\nlet sel_segment=sel_cisterna===\"CISTERNA1\" ? \"SEGMENT_VALUES1\":\"SEGMENT_VALUES2\";\n\nlet promedios=global.get(\"PROMEDIOS\");\n\n\n\nlet segment =global.get(sel_segment);\n\n\n\n \n  segment.temperatura= msg.payload[1] / 10;\n  segment.presion= msg.payload[0] / 10;\n  segment.densidad= dit.PV;\n  segment.flujo_actual= msg.payload[12] / 10;\n  segment.volumen_acumulado = promedios.volumen_total+msg.payload[11];\n\n  global.set(sel_segment,segment);\n\n\n\nlet uit_2003={\n    FLOW : msg.payload[14] / 10,\n    DENSITY: dit.PV,\n    TOTAL:msg.payload[13] / 10\n }\n global.set(\"UIT_2003\",uit_2003);\n\n let uit_2001={\n    FLOW : msg.payload[12] / 10,\n    DENSITY: dit.PV,\n    TOTAL:msg.payload[11]\n }\n global.set(\"UIT_2001\",uit_2001);\n\n\n\n// Leer tiquete y estado\nglobal.set(\"TIKET_N\", msg.payload[24]);\nglobal.set(\"ESTADO_BATCH\", msg.payload[23]); // 0=Pausado, 1=Activo\n\n\n\nlet tag=global.get(\"PIT_2001\");\ntag.PV=segment.presion;\n\ntag=global.get(\"TIT_2001\");\ntag.PV=segment.temperatura;\n\ntag=global.get(\"FIT_2001\");\ntag.PV=segment.flujo_actual;\n\ndit.PV=msg.payload[9]/10;\nglobal.set(\"DIT_2001\",dit);\n\nuit_2001_dit.PV=dit.PV \n\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 340,
        "wires": [
            [
                "06bd97f38b86dbf8"
            ]
        ]
    },
    {
        "id": "c3025dd3d4f74b3f",
        "type": "modbus-read",
        "z": "ee81cc611986e56f",
        "name": "ReadPLC",
        "topic": "",
        "showStatusActivities": true,
        "logIOActivities": false,
        "showErrors": true,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "100",
        "quantity": "20",
        "rate": "500",
        "rateUnit": "ms",
        "delayOnStart": true,
        "enableDeformedMessages": false,
        "startDelayTime": "1",
        "server": "017a736946a464a1",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 340,
        "y": 360,
        "wires": [
            [
                "92e760591758053b"
            ],
            []
        ]
    },
    {
        "id": "68c5cc74e68f4adf",
        "type": "template",
        "z": "6910828fa524c0ad",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{{!-- <style>\n  .alarm-table { width: 100%; border-collapse: collapse; color: #e0e0e0; }\n  .alarm-table th { background-color: #4a4a4a; color: white; padding: 8px; text-align: left; }\n  .alarm-table td { padding: 8px; border-bottom: 1px solid #606060; }\n  .alarm-table tr:nth-child(even) { background-color: rgba(255, 255, 255, 0.05); }\n  .alarm-table tr:nth-child(odd) { background-color: rgba(0, 0, 0, 0.2); }\n  //.alarm-cell { font-weight: bold; border-radius: 4px; padding: 4px 8px; }\n  //.valor-cell { font-weight: bold; color: #4fc3f7; }\n</style> --}}\n\n<table class=\"alarm-table\"> \n    <tr> \n        <th>DATE</th>  \n        <th>TAG</th>  \n        <th>Valor</th>     \n        <th>Descripcion</th> \n        <th>Alerta</th> \n        <th>Unidad</th> \n    </tr> \n    {{#payload}} \n        <tr> \n            <td>{{DATE}}</td> \n            <td>{{TAG}}</td> \n            <td class=\"valor-cell\">{{Valor}}</td> \n            <td>{{Descripcion}}</td> \n            <td>\n                <span class=\"alarm-cell\" style=\"background-color: {{bgColor}}; color: {{textColor}};\">\n                    {{icon}} {{Alerta}}\n                </span>\n            </td> \n            <td>{{Unidad}}</td> \n        </tr> \n    {{/payload}} \n</table>",
        "output": "str",
        "x": 1300,
        "y": 400,
        "wires": [
            [
                "3d5d9c29d555f767"
            ]
        ]
    },
    {
        "id": "650558858afec541",
        "type": "function",
        "z": "6910828fa524c0ad",
        "name": "function 40",
        "func": "const alarmas=[];\n\nglobal.set(\"ALARMAS\", alarmas);\nmsg.payload=alarmas;\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 400,
        "wires": [
            [
                "68c5cc74e68f4adf"
            ]
        ]
    },
    {
        "id": "74a9f6d128f66dce",
        "type": "function",
        "z": "6910828fa524c0ad",
        "name": "Get PIT",
        "func": "//let pv_sim=flow.get(\"PV_SIM\");\n//let butano=global.get(\"BUTANO\");\n\n\nlet tag=global.get(\"PIT_2001\");\nmsg.payload=tag;\n\n// pv_sim+=2.55;\n// if(pv_sim>100)pv_sim=0;\n// flow.set(\"PV_SIM\",pv_sim);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "// El código añadido aquí se ejecutará una vez\n// cuando el nodo es iniciado.\nflow.set(\"PV_SIM\",0);",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 440,
        "wires": [
            [
                "0b8b85192a91ddf4"
            ]
        ]
    },
    {
        "id": "0458dd2af263c9a8",
        "type": "inject",
        "z": "6910828fa524c0ad",
        "name": "",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "x": 80,
        "y": 540,
        "wires": [
            [
                "74a9f6d128f66dce",
                "e18c9959712a0576",
                "4c668c7ececdd5e7",
                "32f1b23aed89b1dc",
                "2a46ecafe57f798b",
                "f69822c8778d96e4",
                "35944a23b612e541"
            ]
        ]
    },
    {
        "id": "0b8b85192a91ddf4",
        "type": "alarm-scanner",
        "z": "6910828fa524c0ad",
        "name": "",
        "x": 540,
        "y": 440,
        "wires": [
            [
                "88da1e3464bf4a4d"
            ]
        ]
    },
    {
        "id": "88da1e3464bf4a4d",
        "type": "function",
        "z": "6910828fa524c0ad",
        "name": "function 48",
        "func": "let alarmas = [];\nalarmas=global.get(\"ALARMAS\") || [];\n\nlet msg1={};\nlet tag=msg.payload;\n\n\nif(msg.alarms.length>=1)\n{\n    alarmas.push(msg.alarms[0]);\n    if(alarmas.length>25)alarmas.pop();    \n    global.set(\"ALARMAS\",alarmas);\n    msg1.payload=tag;\n}\nelse{\n    msg1.payload=null;\n}\n\nif(alarmas.length>=1)msg.payload=alarmas;\nelse msg.payload=\"NULL\";\n\nglobal.set(tag.TagName,tag);\n\n\nreturn [msg,msg1];",
        "outputs": 2,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 540,
        "wires": [
            [
                "fa2e643d23619183"
            ],
            []
        ]
    },
    {
        "id": "446d913f27b17fc4",
        "type": "debug",
        "z": "6910828fa524c0ad",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 970,
        "y": 840,
        "wires": []
    },
    {
        "id": "fa2e643d23619183",
        "type": "switch",
        "z": "6910828fa524c0ad",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "NULL",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 930,
        "y": 460,
        "wires": [
            [
                "0db00293fc5b18cb"
            ]
        ]
    },
    {
        "id": "0db00293fc5b18cb",
        "type": "function",
        "z": "6910828fa524c0ad",
        "name": "function 49",
        "func": "// Asumimos que msg.payload contiene el array de objetos de alarma\nmsg.payload = msg.payload.map(alarm => {\n    let severity, icon;\n    \n    // Determinar la severidad y el icono basado en el texto de la Alerta\n    if (alarm.Alerta.includes('Muy Alta') || alarm.Alerta.includes('Muy Baja')) {\n        severity = 'high';\n        icon = '⚠️';\n    } else if (alarm.Alerta.includes('Alta') || alarm.Alerta.includes('Baja')) {\n        severity = 'medium';\n        icon = '⚠';\n    } else {\n        severity = 'low';\n        icon = 'ℹ️';\n    }\n    \n    // Determinar el color basado en AlarmColor\n    let textColor;\n    switch (alarm.AlarmColor) {\n        case '#8E0000':\n            textColor = '#ff6b6b'; // Rojo más brillante para tema oscuro\n            break;\n        case '#FFFF00':\n            textColor = '#feca57'; // Amarillo más oscuro para mejor contraste\n            break;\n        default:\n            textColor = '#48dbfb'; // Azul claro por defecto\n    }\n    \n    // Retornar el objeto de alarma con las nuevas propiedades\n    return {\n        ...alarm,\n        severity,\n        icon,\n        textColor\n    };\n});\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 460,
        "wires": [
            [
                "68c5cc74e68f4adf"
            ]
        ]
    },
    {
        "id": "a4a46de3e2302c3e",
        "type": "ui_button",
        "z": "6910828fa524c0ad",
        "name": "",
        "group": "760bb6adf93f32f8",
        "order": 3,
        "width": 5,
        "height": 1,
        "passthru": false,
        "label": "Borrar ",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 150,
        "y": 400,
        "wires": [
            [
                "650558858afec541"
            ]
        ]
    },
    {
        "id": "3d5d9c29d555f767",
        "type": "ui_template",
        "z": "6910828fa524c0ad",
        "group": "760bb6adf93f32f8",
        "name": "",
        "order": 1,
        "width": 30,
        "height": 12,
        "format": "<style>\n    table {\n    border-collapse: collapse;\n    width: 100%;\n    }\n    \n    th, td {\n    text-align: left;\n    padding: 8px;\n    }\n    \n    th {\n    background-color: #007bff;\n    color: white;\n    }\n    \n    .alarm-table { width: 100%; border-collapse: collapse; color: #e0e0e0; }\n    .alarm-table th { background-color: #4a4a4a; color: white; padding: 8px; text-align: left; }\n    .alarm-table td { padding: 8px; border-bottom: 1px solid #606060; }\n    .alarm-table tr:nth-child(even) { background-color: rgba(255, 255, 255, 0.05); }\n    .alarm-table tr:nth-child(odd) { background-color: rgba(0, 0, 0, 0.2); }\n    .alarm-cell { font-weight: bold; border-radius: 4px; padding: 4px 8px; }\n    .valor-cell { font-weight: bold; color: #4fc3f7; }\n</style>\n\n<div ng-bind-html=\"msg.payload\"></div>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1500,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "e19dfa611b5cde75",
        "type": "ui_button",
        "z": "6910828fa524c0ad",
        "name": "",
        "group": "760bb6adf93f32f8",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Cerrar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"tab\":\"Main\"}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 150,
        "y": 340,
        "wires": [
            [
                "1eeb858bc2bdf568"
            ]
        ]
    },
    {
        "id": "1eeb858bc2bdf568",
        "type": "ui_ui_control",
        "z": "6910828fa524c0ad",
        "name": "",
        "events": "all",
        "x": 320,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "e18c9959712a0576",
        "type": "function",
        "z": "6910828fa524c0ad",
        "name": "Get TIT",
        "func": "//let pv_sim=flow.get(\"PV_SIM\");\n//let butano= global.get(\"BUTANO\");\n\nlet tag=global.get(\"TIT_2001\");\n\nmsg.payload=tag;\n\n// pv_sim+=2.55;\n// if(pv_sim>100)pv_sim=0;\n// flow.set(\"PV_SIM\",pv_sim);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "// El código añadido aquí se ejecutará una vez\n// cuando el nodo es iniciado.\nflow.set(\"PV_SIM\",0);",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 480,
        "wires": [
            [
                "d223ad10c48e85b2"
            ]
        ]
    },
    {
        "id": "4c668c7ececdd5e7",
        "type": "function",
        "z": "6910828fa524c0ad",
        "name": "Get FIT",
        "func": "//let pv_sim=flow.get(\"PV_SIM\");\n//let butano= global.get(\"BUTANO\");\n\nlet tag=global.get(\"FIT_2001\");\n\nmsg.payload=tag;\n\n// pv_sim+=2.55;\n// if(pv_sim>100)pv_sim=0;\n// flow.set(\"PV_SIM\",pv_sim);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "// El código añadido aquí se ejecutará una vez\n// cuando el nodo es iniciado.\nflow.set(\"PV_SIM\",0);",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 520,
        "wires": [
            [
                "4f9cabacc95cbb19"
            ]
        ]
    },
    {
        "id": "32f1b23aed89b1dc",
        "type": "function",
        "z": "6910828fa524c0ad",
        "name": "Get PIT-2002",
        "func": "let pv_sim=flow.get(\"PV_SIM\");\nlet butano=global.get(\"BUTANO\");\n\n\nlet tag=global.get(\"PIT_2002\");\nmsg.payload=tag;\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "// El código añadido aquí se ejecutará una vez\n// cuando el nodo es iniciado.\nflow.set(\"PV_SIM\",0);",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 560,
        "wires": [
            [
                "554fd6d5442ef0e7"
            ]
        ]
    },
    {
        "id": "2a46ecafe57f798b",
        "type": "function",
        "z": "6910828fa524c0ad",
        "name": "Get DIT-2001",
        "func": "let pv_sim=flow.get(\"PV_SIM\");\nlet butano=global.get(\"BUTANO\");\n\n\nlet tag=global.get(\"DIT_2001\");\nmsg.payload=tag;\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "// El código añadido aquí se ejecutará una vez\n// cuando el nodo es iniciado.\nflow.set(\"PV_SIM\",0);",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 600,
        "wires": [
            [
                "8548aed3084f49d0"
            ]
        ]
    },
    {
        "id": "f69822c8778d96e4",
        "type": "function",
        "z": "6910828fa524c0ad",
        "name": "Get UIT_2001_DENSITY",
        "func": "\nlet tag=global.get(\"UIT_2001_DENSITY\");\nmsg.payload=tag;\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "// El código añadido aquí se ejecutará una vez\n// cuando el nodo es iniciado.\nflow.set(\"PV_SIM\",0);",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 640,
        "wires": [
            [
                "e289a9092e7095ec"
            ]
        ]
    },
    {
        "id": "d223ad10c48e85b2",
        "type": "alarm-scanner",
        "z": "6910828fa524c0ad",
        "name": "",
        "x": 540,
        "y": 480,
        "wires": [
            [
                "88da1e3464bf4a4d"
            ]
        ]
    },
    {
        "id": "4f9cabacc95cbb19",
        "type": "alarm-scanner",
        "z": "6910828fa524c0ad",
        "name": "",
        "x": 540,
        "y": 520,
        "wires": [
            [
                "88da1e3464bf4a4d"
            ]
        ]
    },
    {
        "id": "554fd6d5442ef0e7",
        "type": "alarm-scanner",
        "z": "6910828fa524c0ad",
        "name": "",
        "x": 540,
        "y": 560,
        "wires": [
            [
                "88da1e3464bf4a4d"
            ]
        ]
    },
    {
        "id": "8548aed3084f49d0",
        "type": "alarm-scanner",
        "z": "6910828fa524c0ad",
        "name": "",
        "x": 540,
        "y": 600,
        "wires": [
            [
                "88da1e3464bf4a4d"
            ]
        ]
    },
    {
        "id": "e289a9092e7095ec",
        "type": "alarm-scanner",
        "z": "6910828fa524c0ad",
        "name": "",
        "x": 540,
        "y": 640,
        "wires": [
            [
                "88da1e3464bf4a4d"
            ]
        ]
    },
    {
        "id": "35944a23b612e541",
        "type": "function",
        "z": "6910828fa524c0ad",
        "name": "GetDensitiChange",
        "func": "// Recuperación de variables globales\nlet dit = global.get(\"UIT_2001_DENSITY\");\nif (!dit || !dit.PV) {\n    node.warn(\"No hay datos de densidad en global UIT_2001_DENSITY\");\n    return [null, null]; // No hay datos, no enviamos nada por ninguna salida\n}\n\nlet currentDensity = parseFloat(dit.PV); \nlet producto = 3; // ID por defecto (GLP/Mezcla)\nlet inLineProduct = global.get(\"INLINE_PRODUCT\") || \"Mezcla\"; \nlet IsChangeProduct = false;\n\n// Variables para los mensajes de salida\nlet msgUpdate = null;\nlet msgInsert = null;\nlet msgPause = null;\n\n// --- Lógica de Detección de Producto ---\n\n// BUTANO (Rango 557 - 585)\nif(currentDensity >= 557 && currentDensity <= 585 && inLineProduct !== \"Butano\") \n{\n    producto = 2;  // ID Butano\n    inLineProduct = \"Butano\";\n    global.set(\"INLINE_PRODUCT\", inLineProduct);\n    IsChangeProduct = true;\n}\n// PROPANO (Rango 480 - 500)\nelse if (currentDensity >= 480 && currentDensity <= 500 && inLineProduct !== \"Propano\")\n{\n    producto = 1;  // ID Propano\n    inLineProduct = \"Propano\";\n    global.set(\"INLINE_PRODUCT\", inLineProduct);\n    IsChangeProduct = true;\n}\n// MEZCLA (Rango intermedio 500 - 557)\nelse if (currentDensity > 500 && currentDensity < 557 && inLineProduct !== \"Mezcla\") {\n    producto = 3;  // ID Mezcla\n    inLineProduct = \"Mezcla\";\n    global.set(\"INLINE_PRODUCT\", inLineProduct);\n    IsChangeProduct = true;\n\n    if(global.get(\"STATUS_CISTERNA1\")===2)\n    {\n        global.set(\"STATUS_CISTERNA1\",3);  //Pausar Bache\n        global.set(\"SEND_STATUS_CISTERNA1\",true);\n        msgPause={\n            payload:\"Pause\",\n        }\n    }\n    \n    \n}\n\n\n// --- Generación de Mensajes de Salida ---\n\nif (IsChangeProduct === true)\n{\n    let now = new Date();\n    // Formato de fecha ISO para SQL (YYYY-MM-DD HH:MM:SS)\n    let sqlDate = now.toLocaleString().replaceAll('/','-');\n    sqlDate=sqlDate.replace(',',' ');\n    \n    // 1. CREAR MENSAJE PARA CERRAR EL BACHE ANTERIOR (UPDATE)\n    msgUpdate = {\n        topic: \"UPDATE baches SET fecha_fin = ? WHERE fecha_fin IS NULL\",\n        // Parámetro: [fecha_fin]\n        params: [sqlDate], \n        payload: currentDensity // Puedes mantener la densidad en el payload si la necesitas para algo más\n    };\n\n    // 2. CREAR MENSAJE PARA ABRIR EL NUEVO BACHE (INSERT)\n    msgInsert = {\n        // La consulta de INSERT\n        topic: \"INSERT INTO baches (fecha_inicio, densidad_prom, producto_id) VALUES (?, ?, ?)\",\n        // Parámetros: [fecha_inicio, densidad_prom, producto_id]\n        params: [sqlDate, currentDensity, producto],\n        payload: currentDensity\n    };\n\n    node.warn(`¡Cambio de Producto! Cerrando bache anterior y abriendo nuevo de ${inLineProduct}.`);\n}\n\n// Devuelve un array de mensajes: [Salida 1, Salida 2]\n// Salida 1: Cierre (Update)\n// Salida 2: Apertura (Insert)\nreturn [msgUpdate, msgInsert, msgPause];",
        "outputs": 3,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 760,
        "wires": [
            [
                "cc9b3042fd2a0324"
            ],
            [
                "a399017974b3d944"
            ],
            [
                "2358821fce62e140"
            ]
        ]
    },
    {
        "id": "244529ef83913074",
        "type": "sqlite",
        "z": "6910828fa524c0ad",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "prepared",
        "sql": "INSERT INTO baches (fecha_inicio, densidad_prom, producto_id)\nVALUES(?,?,?)",
        "name": "",
        "x": 800,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "a399017974b3d944",
        "type": "switch",
        "z": "6910828fa524c0ad",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 760,
        "wires": [
            [
                "244529ef83913074"
            ]
        ]
    },
    {
        "id": "b7533a58ef90cda8",
        "type": "sqlite",
        "z": "6910828fa524c0ad",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "prepared",
        "sql": "UPDATE baches SET fecha_fin = ? WHERE fecha_fin IS NULL",
        "name": "",
        "x": 800,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "cc9b3042fd2a0324",
        "type": "switch",
        "z": "6910828fa524c0ad",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 700,
        "wires": [
            [
                "b7533a58ef90cda8"
            ]
        ]
    },
    {
        "id": "26fbcccf22e5a7b2",
        "type": "link out",
        "z": "6910828fa524c0ad",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "bac54a5a69138a3a"
        ],
        "x": 735,
        "y": 820,
        "wires": []
    },
    {
        "id": "2358821fce62e140",
        "type": "switch",
        "z": "6910828fa524c0ad",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 820,
        "wires": [
            [
                "26fbcccf22e5a7b2"
            ]
        ]
    },
    {
        "id": "3e6ef4224e957778",
        "type": "function",
        "z": "2810139c92bd41d8",
        "name": "function 65",
        "func": "\n\nmsg.payload={\n    \"mA\": 6.37,\n    \"temperature\":87.4200\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "6277713b98f280b8",
        "type": "debug",
        "z": "2810139c92bd41d8",
        "name": "debug 7",
        "active": true,
        "tosidebar": true,
        "console": true,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 320,
        "wires": []
    },
    {
        "id": "b1817f3939b3dfa8",
        "type": "inject",
        "z": "2810139c92bd41d8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 320,
        "wires": [
            [
                "3e6ef4224e957778"
            ]
        ]
    },
    {
        "id": "e643deca182ab68b",
        "type": "inject",
        "z": "8389501e8b369815",
        "name": "1s",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 220,
        "wires": [
            [
                "3a0f9034167d1e6d"
            ]
        ]
    },
    {
        "id": "3a0f9034167d1e6d",
        "type": "function",
        "z": "8389501e8b369815",
        "name": "UpdateDisplay",
        "func": "let pid=global.get(\"SIC_2002\");\nlet uit=global.get(\"UIT_2002\");\nlet pit=global.get(\"PIT_2002\");\n\nmsg.topic = \"databind\";\nmsg.payload = {\n    SIC_2002_PV: pid.PV + \" m/S\",\n    SIC_2002_SP: pid.SP + \" m/S\",\n    SIC_2002_CV: (pid.CV) + \" %\",\n    UIT_2002_TEMPERATURE: uit.TEMPERATURE + \" °F\",\n    UIT_2002_PRESSURE_IN: uit.PRESSURE_IN + \" PSI\",\n    UIT_2002_PRESSURE_OUT: uit.PRESSURE_OUT + \" PSI\",\n    UIT_2002_SPEED: uit.SPEED + \" m/S\",\n    UIT_2002_FLOW: uit.FLOW+ \" MSCFD\",\n\n    PIT_2002_PV: pit.PV + \" PSI\",\n    PIT_2002_HH: pit.HH + \" PSI\",\n    PIT_2002_H: pit.H + \" PSI\",\n    PIT_2002_ALARM: pit.ALARM,\n\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 220,
        "wires": [
            [
                "e0e404b8557d360a"
            ]
        ]
    },
    {
        "id": "50ba8e0e315ffe7f",
        "type": "switch",
        "z": "8389501e8b369815",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "SIC_2002_SP",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "SIC_2002_CV",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PIT_2002_HH",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PIT_2002_H",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "UIT_2001_PRESSURE_IN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 790,
        "y": 220,
        "wires": [
            [
                "6becd5721e8dbb45"
            ],
            [
                "4d8b6887735ef8fe"
            ],
            [
                "5822916bb04915ad"
            ],
            [
                "50b09ac358422970"
            ],
            [
                "33ac8c6854ecadec"
            ]
        ]
    },
    {
        "id": "e0e404b8557d360a",
        "type": "ui_svg_graphics",
        "z": "8389501e8b369815",
        "group": "2b6a27989e458e3b",
        "order": 1,
        "width": 22,
        "height": 10,
        "svgString": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg version=\"1.1\" id=\"svg1\" xml:space=\"preserve\" width=\"1101.8361\" height=\"461.09964\"\n    xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n    xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n    xmlns=\"http://www.w3.org/2000/svg\" xmlns:svg=\"http://www.w3.org/2000/svg\">\n    <defs id=\"defs1\">\n        <marker style=\"overflow:visible\" id=\"Sketch\" refX=\"0\" refY=\"0\" orient=\"auto-start-reverse\"\n            inkscape:stockid=\"Sketched arrow\" markerWidth=\"1\" markerHeight=\"1\" viewBox=\"0 0 1 1\" inkscape:isstock=\"true\"\n            inkscape:collect=\"always\" preserveAspectRatio=\"xMidYMid\">\n            <path style=\"fill:none;stroke:context-stroke;stroke-width:0.4;stroke-linecap:round\"\n                d=\"m -4.5421538,-3.2452189 3.83900644,2.60235235 0.56348102,0.59255887 L -2.4921466,1.1808717 -4.4106004,2.139946 -4.5795251,2.8245356 -4.703996,3.0734773 -4.3128019,2.6822832 -3.9749524,2.3088707 0.66603196,-0.12720162 0.02589622,-0.32279868 -1.7613224,-0.60366199 -3.580874,-2.0472634 -4.3186004,-2.392437 l -1.2937699,-0.2549423 2.1825172,0.042166 0.6996091,1.0554873 1.4406512,0.1145833 1.20879971,0.91674665 1.53333299,0.47138389 -1.85995289,1.23785256 -2.03832621,0.9224332 -1.5469949,0.9779853\"\n                sodipodi:nodetypes=\"ccc\" id=\"path9\" />\n        </marker>\n        <marker style=\"overflow:visible\" id=\"marker1\" refX=\"0\" refY=\"0\" orient=\"auto-start-reverse\"\n            inkscape:stockid=\"Sketched arrow\" markerWidth=\"1\" markerHeight=\"1\" viewBox=\"0 0 1 1\" inkscape:isstock=\"true\"\n            inkscape:collect=\"always\" preserveAspectRatio=\"xMidYMid\">\n            <path style=\"fill:none;stroke:context-stroke;stroke-width:0.4;stroke-linecap:round\"\n                d=\"m -4.5421538,-3.2452189 3.83900644,2.60235235 0.56348102,0.59255887 L -2.4921466,1.1808717 -4.4106004,2.139946 -4.5795251,2.8245356 -4.703996,3.0734773 -4.3128019,2.6822832 -3.9749524,2.3088707 0.66603196,-0.12720162 0.02589622,-0.32279868 -1.7613224,-0.60366199 -3.580874,-2.0472634 -4.3186004,-2.392437 l -1.2937699,-0.2549423 2.1825172,0.042166 0.6996091,1.0554873 1.4406512,0.1145833 1.20879971,0.91674665 1.53333299,0.47138389 -1.85995289,1.23785256 -2.03832621,0.9224332 -1.5469949,0.9779853\"\n                sodipodi:nodetypes=\"ccc\" id=\"path1\" />\n        </marker>\n        <marker style=\"overflow:visible\" id=\"marker2\" refX=\"0\" refY=\"0\" orient=\"auto-start-reverse\"\n            inkscape:stockid=\"Sketched arrow\" markerWidth=\"1\" markerHeight=\"1\" viewBox=\"0 0 1 1\" inkscape:isstock=\"true\"\n            inkscape:collect=\"always\" preserveAspectRatio=\"xMidYMid\">\n            <path style=\"fill:none;stroke:context-stroke;stroke-width:0.4;stroke-linecap:round\"\n                d=\"m -4.5421538,-3.2452189 3.83900644,2.60235235 0.56348102,0.59255887 L -2.4921466,1.1808717 -4.4106004,2.139946 -4.5795251,2.8245356 -4.703996,3.0734773 -4.3128019,2.6822832 -3.9749524,2.3088707 0.66603196,-0.12720162 0.02589622,-0.32279868 -1.7613224,-0.60366199 -3.580874,-2.0472634 -4.3186004,-2.392437 l -1.2937699,-0.2549423 2.1825172,0.042166 0.6996091,1.0554873 1.4406512,0.1145833 1.20879971,0.91674665 1.53333299,0.47138389 -1.85995289,1.23785256 -2.03832621,0.9224332 -1.5469949,0.9779853\"\n                sodipodi:nodetypes=\"ccc\" id=\"path2\" />\n        </marker>\n        <marker style=\"overflow:visible\" id=\"ArrowWide\" refX=\"0\" refY=\"0\" orient=\"auto-start-reverse\"\n            inkscape:stockid=\"Wide arrow\" markerWidth=\"1\" markerHeight=\"1\" viewBox=\"0 0 1 1\" inkscape:isstock=\"true\"\n            inkscape:collect=\"always\" preserveAspectRatio=\"xMidYMid\">\n            <path style=\"fill:none;stroke:context-stroke;stroke-width:1;stroke-linecap:butt\" d=\"M 3,-3 0,0 3,3\"\n                transform=\"rotate(180,0.125,0)\" sodipodi:nodetypes=\"ccc\" id=\"path3\" />\n        </marker>\n        <rect x=\"291.86917\" y=\"216.00426\" width=\"139.78812\" height=\"152.43227\" id=\"rect1\" />\n        <linearGradient class=\"linear\" id=\"SVGID_1_valve\" gradientUnits=\"userSpaceOnUse\" x1=\"23.924\" y1=\"95.863899\"\n            x2=\"23.924\" y2=\"58.4035\">\n            <stop offset=\"0\" stop-color=\"#ff5600\" id=\"stop5-7\" />\n            <stop offset=\"1\" stop-color=\"#1a0c00\" id=\"stop6-5\" />\n        </linearGradient>\n        <linearGradient class=\"linear\" id=\"SVGID_2_valve\" gradientUnits=\"userSpaceOnUse\" x1=\"75.825996\" y1=\"95.863899\"\n            x2=\"75.825996\" y2=\"58.4035\">\n            <stop offset=\"0\" stop-color=\"#ff5600\" id=\"stop7-9\" />\n            <stop offset=\"1\" stop-color=\"#1a0c00\" id=\"stop8-2\" />\n        </linearGradient>\n        <linearGradient class=\"linear\" id=\"SVGID_3_valve\" gradientUnits=\"userSpaceOnUse\" x1=\"42.25\" y1=\"77.133698\"\n            x2=\"54.75\" y2=\"77.133698\">\n            <stop offset=\"0\" stop-color=\"#ff5600\" id=\"stop9-2\" />\n            <stop offset=\"1\" stop-color=\"#1a0c00\" id=\"stop10-8\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient24\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(4.3586094,0,0,0.08695363,-981.11665,100.51453)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient22\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop22\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop24\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop23\" />\n        </linearGradient>\n    </defs>\n    <sodipodi:namedview id=\"namedview1\" pagecolor=\"#ffffff\" bordercolor=\"#000000\" borderopacity=\"0.25\"\n        inkscape:showpageshadow=\"2\" inkscape:pageopacity=\"0.0\" inkscape:pagecheckerboard=\"0\"\n        inkscape:deskcolor=\"#d1d1d1\" />\n    <inkscape:clipboard min=\"-0.43705206,3.3424749\" max=\"1101.399,464.44212\" geom-min=\"-0.0027049556,3.776822\"\n        geom-max=\"1100.9646,464.00778\" />\n    <g id=\"g3\" transform=\"matrix(3.7795276,0,0,3.7795276,1.0012762,-26.620292)\">\n        <rect style=\"fill:url(#linearGradient24);stroke:#b9b9b9;stroke-width:0.156984;stroke-opacity:1\" id=\"rect24\"\n            width=\"286.99997\" height=\"6.8612647\" x=\"0.8499999\" y=\"106.28743\" />\n        <rect\n            style=\"opacity:0.98;fill:#969696;fill-opacity:1;stroke:#050509;stroke-width:0.147498;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect838\" width=\"40.915394\" height=\"37.504467\" x=\"138.93459\" y=\"51.405975\" ry=\"1.6120567\" />\n        <rect x=\"148.89938\" y=\"79.223923\"\n            style=\"fill:#20a040;stroke:#000000;stroke-width:0.0988302;stroke-miterlimit:4;stroke-dasharray:none\"\n            id=\"PIT_2002_BACK\" width=\"29.901171\" height=\"8.9342775\" ry=\"1.5642198\" /><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"148.32114\" y=\"58.453598\"\n            id=\"e3_texte\" transform=\"scale(0.99223329,1.0078275)\">PIT_2002</text>\n        <rect x=\"150.38083\" y=\"80.681038\" style=\"fill:#000000;stroke:#000000;stroke-width:0.351923px\" id=\"PB_PIT_2001\"\n            width=\"27.1689\" height=\"6.0029826\" ry=\"1.774224\" /><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#00ffff;stroke-width:0.266654\" x=\"151.87029\" y=\"84.496811\"\n            id=\"PIT_2002_PV\" transform=\"scale(0.99223329,1.0078275)\">###.##</text>\n        <g id=\"g17\" transform=\"matrix(1.5511032,0,0,1.6541503,-67.979304,-70.055251)\">\n            <path id=\"path45\" style=\"fill:#0000ff;fill-opacity:1;stroke:#303130;stroke-width:0.201537;stroke-opacity:1\"\n                d=\"m 93.363628,96.83969 a 4.1227484,3.9335248 0 0 0 -4.12256,3.9335 4.1227484,3.9335248 0 0 0 2.35587,3.54978 v 2.47693 h 3.21985 v -2.35634 a 4.1227484,3.9335248 0 0 0 2.66985,-3.67037 4.1227484,3.9335248 0 0 0 -4.12301,-3.9335 z\" />\n            <ellipse style=\"fill:#4e802b;fill-opacity:1;stroke:#d6d6d6;stroke-width:0.3156;stroke-opacity:1\" id=\"path46\"\n                cx=\"93.308426\" cy=\"100.81948\" rx=\"2.8750091\" ry=\"2.779753\" />\n        </g>\n        <g id=\"g1\" transform=\"translate(69.525339,11.894869)\">\n            <g id=\"g55\" transform=\"matrix(0.86692568,0,0,1.2298261,10.534371,-93.543554)\">\n                <g id=\"shape-8\" transform=\"matrix(0.3181153,0,0,0.24277307,138.89975,137.15491)\"\n                    style=\"fill:#fb5700;fill-opacity:1\">\n                    <path fill=\"#e34300\"\n                        d=\"m 94.488,54.267 v 9.427 H 80.995 C 76.955,58.43 70.604,55.033 63.456,55.033 h -4.672 v -4.03 H 66.19 V 38.002 H 84.306 V 36.5 H 86.5 V 33 h -2.194 v -1.877 h 1.416 c 1.833,0 3.334,-1.5 3.334,-3.334 V 10.381 c 0,-1.833 -1.5,-3.333 -3.334,-3.333 H 84.306 V 5.25 H 86.5 V 1.75 H 84.306 V 0.169 h -69 V 1.75 H 13 v 3.5 h 2.306 V 7.048 H 13.89 c -1.833,0 -3.334,1.5 -3.334,3.333 V 27.79 c 0,1.833 1.5,3.334 3.334,3.334 h 1.416 V 33 H 13 v 3.5 h 2.306 v 1.502 h 18.116 v 13.002 h 7.406 v 4.03 h -4.672 c -7.148,0 -13.5,3.397 -17.54,8.661 H 5.512 V 54.268 H 0 V 63.695 65.967 88.3 90.572 100 h 5.512 v -9.427 h 13.104 c 4.04,5.264 10.391,8.661 17.54,8.661 h 27.3 c 7.148,0 13.5,-3.397 17.54,-8.661 H 94.488 V 100 H 100 V 90.573 88.3 65.967 63.695 54.268 H 94.488 Z M 63.69,48.265 h -8.573 v -6.677 h 2.333 v -3.585 h 6.239 V 48.265 Z M 35.922,38.002 h 6.239 v 3.585 h 2.333 v 6.677 h -8.572 z\"\n                        id=\"path1-7\" style=\"fill:#fb5700;fill-opacity:1\" />\n                </g>\n                <g id=\"light-9\" transform=\"matrix(0.3181153,0,0,0.24277307,138.89975,137.15491)\">\n                    <path fill=\"#ff5600\"\n                        d=\"m 51,58.3 c -0.428,0 -2.072,0 -2.5,0 -3.452,0 -6.25,8.432 -6.25,18.833 0,10.401 2.798,18.833 6.25,18.833 0.428,0 2.072,0 2.5,0 3.452,0 6.25,-8.432 6.25,-18.833 C 57.25,66.732 54.452,58.3 51,58.3 Z\"\n                        id=\"path2-2\" />\n                    <polygon fill=\"#ff5600\"\n                        points=\"33.422,51.004 66.19,51.004 66.19,38.002 63.69,38.002 63.69,48.265 35.922,48.265 35.922,38.002 33.422,38.002 \"\n                        id=\"polygon2\" />\n                </g>\n                <g id=\"dark-0\" transform=\"matrix(0.3181153,0,0,0.24277307,138.89975,137.15491)\"\n                    style=\"fill:#3700cd;fill-opacity:1\">\n                    <rect fill=\"#8a3400\" x=\"13\" y=\"33\" width=\"2.306\" height=\"3.5\" id=\"rect2\"\n                        style=\"fill:#3700cd;fill-opacity:1\" />\n                    <rect fill=\"#8a3400\" x=\"84.306\" y=\"33\" width=\"2.194\" height=\"3.5\" id=\"rect3\"\n                        style=\"fill:#3700cd;fill-opacity:1\" />\n                    <path fill=\"#8a3400\"\n                        d=\"M 15.306,7.048 H 13.89 c -1.833,0 -3.334,1.5 -3.334,3.333 V 27.79 c 0,1.833 1.5,3.334 3.334,3.334 h 1.416 z\"\n                        id=\"path3-2\" style=\"fill:#3700cd;fill-opacity:1\" />\n                    <path fill=\"#8a3400\"\n                        d=\"m 85.722,7.048 h -1.416 v 24.076 h 1.416 c 1.833,0 3.334,-1.5 3.334,-3.334 V 10.381 c 0,-1.833 -1.501,-3.333 -3.334,-3.333 z\"\n                        id=\"path4\" style=\"fill:#3700cd;fill-opacity:1\" />\n                    <rect x=\"13\" y=\"1.75\" fill=\"#8a3400\" width=\"2.306\" height=\"3.5\" id=\"rect4\"\n                        style=\"fill:#3700cd;fill-opacity:1\" />\n                    <rect x=\"84.306\" y=\"1.75\" fill=\"#8a3400\" width=\"2.194\" height=\"3.5\" id=\"rect5\"\n                        style=\"fill:#3700cd;fill-opacity:1\" />\n                </g>\n                <g id=\"linear-3\" transform=\"matrix(0.3181153,0,0,0.24277307,138.89975,137.15491)\">\n                    <linearGradient class=\"linear\" id=\"linearGradient2\" gradientUnits=\"userSpaceOnUse\" x1=\"23.924\"\n                        y1=\"95.863899\" x2=\"23.924\" y2=\"58.4035\">\n                        <stop offset=\"0\" stop-color=\"#ff5600\" id=\"stop1\" />\n                        <stop offset=\"1\" stop-color=\"#1a0c00\" id=\"stop2\" />\n                    </linearGradient>\n                    <path class=\"linear\" fill=\"url(#SVGID_1_valve)\"\n                        d=\"m 42.25,77.134 c 0,-9.738 2.453,-17.748 5.598,-18.73 -5.426,0.547 -10.164,3.401 -13.239,7.564 H 0 V 88.3 h 34.609 c 3.075,4.162 7.813,7.016 13.239,7.564 -3.145,-0.983 -5.598,-8.992 -5.598,-18.73 z\"\n                        id=\"path6\" style=\"fill:url(#SVGID_1_valve)\" />\n                    <linearGradient class=\"linear\" id=\"linearGradient4\" gradientUnits=\"userSpaceOnUse\" x1=\"75.825996\"\n                        y1=\"95.863899\" x2=\"75.825996\" y2=\"58.4035\">\n                        <stop offset=\"0\" stop-color=\"#ff5600\" id=\"stop3\" />\n                        <stop offset=\"1\" stop-color=\"#1a0c00\" id=\"stop4\" />\n                    </linearGradient>\n                    <path class=\"linear\" fill=\"url(#SVGID_2_valve)\"\n                        d=\"m 64.891,65.967 c -3.075,-4.162 -7.813,-7.016 -13.239,-7.564 3.145,0.983 5.598,8.992 5.598,18.73 0,9.738 -2.453,17.748 -5.598,18.73 5.426,-0.547 10.164,-3.401 13.239,-7.564 H 100 V 65.967 Z\"\n                        id=\"path8\" style=\"fill:url(#SVGID_2_valve)\" />\n                    <linearGradient class=\"linear\" id=\"linearGradient6\" gradientUnits=\"userSpaceOnUse\" x1=\"42.25\"\n                        y1=\"77.133698\" x2=\"54.75\" y2=\"77.133698\">\n                        <stop offset=\"0\" stop-color=\"#ff5600\" id=\"stop5\" />\n                        <stop offset=\"1\" stop-color=\"#1a0c00\" id=\"stop6\" />\n                    </linearGradient>\n                    <ellipse class=\"linear\" fill=\"url(#SVGID_3_valve)\" cx=\"48.5\" cy=\"77.134003\" rx=\"6.25\" ry=\"18.833\"\n                        id=\"ellipse10\" style=\"fill:url(#SVGID_3_valve)\" />\n                </g>\n            </g>\n            <rect style=\"fill:#1c1c1d;fill-opacity:1;stroke:#303130;stroke-width:0.214313;stroke-opacity:1\" id=\"rect47\"\n                width=\"1.2072288\" height=\"1.3368448\" x=\"140.23166\" y=\"93.183914\" />\n        </g>\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:0.369405;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect49\" width=\"38.556229\" height=\"6.3695898\" x=\"140.57185\" y=\"53.788616\" ry=\"0.81231481\"\n            rx=\"0.69855058\" /><text xml:space=\"preserve\" transform=\"scale(0.26458333)\" id=\"text1\"\n            style=\"font-weight:bold;font-size:29.9359px;font-family:C059;-inkscape-font-specification:'C059, Bold';text-align:start;writing-mode:lr-tb;direction:ltr;white-space:pre;shape-inside:url(#rect1);display:inline;fill:#9d3600;stroke:#050505;stroke-width:1.13386\" />\n        <rect\n            style=\"opacity:0.98;fill:#969696;fill-opacity:1;stroke:#050509;stroke-width:0.519727;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect25-6\" width=\"71.859535\" height=\"55.713745\" x=\"31.920223\" y=\"33.418068\" ry=\"2.3947473\" />\n        <rect x=\"70.30748\" y=\"60.379494\"\n            style=\"fill:#20a040;stroke:#000000;stroke-width:0.0993539;stroke-miterlimit:4;stroke-dasharray:none\"\n            id=\"FIT_2001_FLOW_BACK\" width=\"30.220694\" height=\"8.933754\" ry=\"1.5641282\" /><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"56.314602\" y=\"40.593399\"\n            id=\"text27-2\" transform=\"scale(0.99223329,1.0078275)\" inkscape:label=\"LABEL\">UIT_2002</text>\n        <rect x=\"71.39444\" y=\"52.523735\" style=\"fill:#000000;stroke:#000000;stroke-width:0.346362px\" id=\"PB_FIT_2001\"\n            width=\"28.052216\" height=\"6.5550799\" ry=\"1.6644852\" />\n        <rect x=\"71.411385\" y=\"44.603127\" style=\"fill:#000000;stroke:#000000;stroke-width:0.346362px\" id=\"PB_FIT_2001-3\"\n            width=\"28.052216\" height=\"6.5550799\" ry=\"1.6644852\" /><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#00ffff;stroke-width:0.266654\" x=\"73.301674\" y=\"56.839798\"\n            id=\"UIT_2002_SPEED\" transform=\"scale(0.99223329,1.0078275)\">###.##</text>\n        <rect x=\"71.475288\" y=\"61.46769\" style=\"fill:#000000;stroke:#000000;stroke-width:0.334892px\" id=\"rect29\"\n            width=\"27.851984\" height=\"6.1721406\" ry=\"1.5672482\" /><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#00ffff;stroke-width:0.266654\" x=\"73.844437\" y=\"65.719971\"\n            id=\"UIT_2001_TEMPERATURE\" transform=\"scale(0.99223329,1.0078275)\">###.##</text>\n        <rect x=\"71.106773\" y=\"70.87159\" style=\"fill:#000000;stroke:#000000;stroke-width:0.336598px\" id=\"rect30\"\n            width=\"28.144466\" height=\"6.170434\" ry=\"1.5668147\" /><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#00ffff;stroke-width:0.266654\" x=\"73.634903\" y=\"74.719963\"\n            id=\"UIT_2001_PRESSURE_IN\" transform=\"scale(0.99223329,1.0078275)\">###.##</text><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"37.46703\" y=\"57.375381\"\n            id=\"text32\" transform=\"scale(0.99223329,1.0078275)\" inkscape:label=\"LABEL\">Speed:</text><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"37.914379\" y=\"49.654156\"\n            id=\"text32-3\" transform=\"scale(0.99223329,1.0078275)\" inkscape:label=\"LABEL\">Flow:</text><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"36.665901\" y=\"64.881531\"\n            id=\"text33\" transform=\"scale(0.99223329,1.0078275)\" inkscape:label=\"LABEL\">Temperature:</text><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"37.238449\" y=\"73.182899\"\n            id=\"text34\" transform=\"scale(0.99223329,1.0078275)\" inkscape:label=\"LABEL\">Pressure In:</text>\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:0.223844;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect50\" width=\"68.156349\" height=\"6.2866416\" x=\"34.849995\" y=\"36.158207\" ry=\"0.80173641\"\n            rx=\"1.2348369\" />\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:0.282803;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect51\" width=\"68.167831\" height=\"40.871834\" x=\"32.978165\" y=\"44.158207\" ry=\"2.0381505\"\n            rx=\"1.2350451\" />\n        <rect\n            style=\"opacity:0.98;fill:#969696;fill-opacity:1;stroke:#050509;stroke-width:0.302038;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect6\" width=\"40.17091\" height=\"33.659664\" x=\"191.05949\" y=\"36.440063\" ry=\"1.4467952\" />\n        <rect x=\"201.89519\" y=\"62.068363\" style=\"fill:#000000;stroke:#000000;stroke-width:0.334892px\" id=\"rect7\"\n            width=\"27.851984\" height=\"6.1721406\" ry=\"1.5672482\" /><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#00ffff;stroke-width:0.266654\" x=\"205.28514\" y=\"66.315948\"\n            id=\"SIC_2002_CV\" transform=\"scale(0.99223329,1.0078275)\">###.##</text><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"194.32431\" y=\"66.070656\"\n            id=\"text8\" transform=\"scale(0.99223329,1.0078275)\" inkscape:label=\"LABEL\">Cv:</text><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"202.72505\" y=\"42.561836\"\n            id=\"text9\" transform=\"scale(0.99223329,1.0078275)\">SIC_2002</text>\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:0.35537;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect9\" width=\"35.603619\" height=\"6.383625\" x=\"193.5258\" y=\"38.178726\" ry=\"0.81410474\" rx=\"0.64505607\" />\n        <rect x=\"201.89519\" y=\"53.601688\" style=\"fill:#000000;stroke:#000000;stroke-width:0.334892px\" id=\"rect10\"\n            width=\"27.851984\" height=\"6.1721406\" ry=\"1.5672482\" /><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#00ffff;stroke-width:0.266654\" x=\"205.28514\" y=\"57.915058\"\n            id=\"SIC_2002_SP\" transform=\"scale(0.99223329,1.0078275)\">###.##</text><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"194.32431\" y=\"57.669769\"\n            id=\"text11\" transform=\"scale(0.99223329,1.0078275)\" inkscape:label=\"LABEL\">Sp:</text>\n        <rect x=\"201.89519\" y=\"46.193348\" style=\"fill:#000000;stroke:#000000;stroke-width:0.334892px\" id=\"rect11\"\n            width=\"27.851984\" height=\"6.1721406\" ry=\"1.5672482\" /><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#00ffff;stroke-width:0.266654\" x=\"205.28514\" y=\"50.564285\"\n            id=\"SIC_2002_PV\" transform=\"scale(0.99223329,1.0078275)\">###.##</text><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"194.32431\" y=\"50.318996\"\n            id=\"text13\" transform=\"scale(0.99223329,1.0078275)\" inkscape:label=\"LABEL\">Pv:</text>\n        <path\n            style=\"fill:#9d3600;stroke:#dadada;stroke-width:0.4;stroke-dasharray:1.6, 0.4;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#ArrowWide)\"\n            d=\"M 213.29924,70.601903 V 86.95735\" id=\"path13\" />\n        <path\n            style=\"fill:none;stroke:#dadada;stroke-width:0.4;stroke-dasharray:1.2, 0.4;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#Sketch)\"\n            d=\"m 100.40484,81.587582 h 10.79288 l -0.26332,1.96966 26.58749,0.101009\" id=\"path14\" /><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"141.48938\" y=\"65.399231\"\n            id=\"text15\" transform=\"scale(0.99223329,1.0078275)\" inkscape:label=\"LABEL\">HH:</text>\n        <rect x=\"149.26552\" y=\"61.158203\" style=\"fill:#000000;stroke:#000000;stroke-width:0.351923px\" id=\"rect15\"\n            width=\"27.1689\" height=\"6.0029826\" ry=\"1.774224\" /><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#00ffff;stroke-width:0.266654\" x=\"154.0464\" y=\"65.644379\"\n            id=\"PIT_2002_HH\" transform=\"scale(0.99223329,1.0078275)\">###.##</text><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"140.62323\" y=\"83.9981\"\n            id=\"text17\" transform=\"scale(0.99223329,1.0078275)\" inkscape:label=\"LABEL\">Pv:</text><text\n            style=\"font-size:3.24893px;font-family:Arial;fill:#ffff00;stroke-width:0.162446\" x=\"73.654671\" y=\"96.979317\"\n            id=\"text18\" transform=\"scale(0.99246797,1.0075892)\" inkscape:label=\"LABEL\">8888</text>\n        <rect\n            style=\"fill:none;stroke:#050505;stroke-width:0.229842;stroke-dasharray:0.91937, 0.229842;stroke-dashoffset:0;stroke-opacity:1\"\n            id=\"rect19\" width=\"291.29761\" height=\"121.76944\" x=\"-0.14999998\" y=\"7.1582065\" ry=\"0\" />\n        <path\n            style=\"fill:none;stroke:#dadada;stroke-width:0.4;stroke-dasharray:1.2, 0.4;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#Sketch)\"\n            d=\"m 180.84998,74.14523 h 8.3181 l 15.98834,0.02595 -0.21261,-2.857575\" id=\"path5\"\n            sodipodi:nodetypes=\"cccc\" />\n        <rect x=\"71.106773\" y=\"78.27993\" style=\"fill:#000000;stroke:#000000;stroke-width:0.336598px\" id=\"rect8\"\n            width=\"28.143999\" height=\"6.170434\" ry=\"1.5668147\" /><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"37.238449\" y=\"81.583778\"\n            id=\"text10\" transform=\"scale(0.99223329,1.0078275)\" inkscape:label=\"LABEL\">Pressure Out:</text><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#00ffff;stroke-width:0.266654\" x=\"74.345833\" y=\"82.512337\"\n            id=\"UIT_2001_PRESSURE_OUT\" transform=\"scale(0.99223329,1.0078275)\">###.##</text>\n        <path\n            style=\"fill:none;stroke:#dadada;stroke-width:0.416248;stroke-dasharray:1.24874, 0.416248;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#Sketch)\"\n            d=\"m 103.24627,55.158206 h 25.19063 l -0.61441,-6.824999 62.05498,-0.350001\" id=\"path15\" />\n        <rect x=\"148.68108\" y=\"69.158203\" style=\"fill:#000000;stroke:#000000;stroke-width:0.351923px\" id=\"rect16\"\n            width=\"27.1689\" height=\"6.0029826\" ry=\"1.774224\" /><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#00ffff;stroke-width:0.266654\" x=\"154.02298\" y=\"73.261581\"\n            id=\"PIT_2002_H\" transform=\"scale(0.99223329,1.0078275)\">###.##</text><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#000000;stroke-width:0.266654\" x=\"143.96814\" y=\"73.582245\"\n            id=\"text16\" transform=\"scale(0.99223329,1.0078275)\" inkscape:label=\"LABEL\">H:</text><text\n            style=\"font-size:5.33309px;font-family:Arial;fill:#00ffff;stroke-width:0.266654\" x=\"72.628311\" y=\"48.922924\"\n            id=\"UIT_2002_FLOW\" transform=\"scale(0.99223329,1.0078275)\">###.##</text>\n        <g id=\"g2\">\n            <rect\n                style=\"opacity:0.98;fill:#969696;fill-opacity:1;stroke:#050509;stroke-width:0.344741;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n                id=\"rect25-6-3\" width=\"68.820526\" height=\"25.595568\" x=\"202.84998\" y=\"7.3604226\" ry=\"1.100176\" />\n            <path style=\"fill:#000080;stroke-width:0.485812\"\n                d=\"m 208.01868,28.331021 c -0.045,-0.194696 -0.0793,-0.29943 -0.20948,-0.638963 -0.0783,-0.204388 -0.1425,-0.565375 -0.1426,-0.802226 -4.7e-4,-1.179428 -0.0149,-1.358739 -0.11481,-1.426772 -0.0593,-0.0401 -0.0923,-0.374355 -0.0733,-0.742013 0.019,-0.367671 0.0718,-1.786209 0.11733,-3.152273 0.0927,-2.781735 0.13779,-2.614201 -0.84275,-3.131801 -0.40881,-0.215817 -0.59474,-0.447809 -0.96342,-1.202066 -0.25127,-0.514044 -0.57195,-1.064034 -0.71262,-1.222177 -0.28749,-0.323224 -0.32424,-0.590239 -0.11271,-0.819096 0.10835,-0.117232 0.10627,-0.202717 -0.009,-0.352432 -0.18077,-0.235668 -0.0354,-0.609755 0.46079,-1.185223 0.2489,-0.288736 0.31153,-0.48624 0.28844,-0.909693 -0.0349,-0.640367 0.36903,-1.255696 1.06975,-1.629577 0.51667,-0.275636 0.56097,-0.283723 0.44505,-0.08074 -0.0618,0.108143 0.0105,0.12659 0.24553,0.06283 0.18318,-0.04946 0.4,-0.04478 0.48183,0.01136 0.0818,0.05614 0.45524,0.110215 0.82981,0.120441 0.71739,0.01938 1.34198,0.301368 1.822,0.822123 0.1665,0.180594 0.42792,0.300834 0.65418,0.300834 0.20726,0 0.53835,0.09036 0.73574,0.200779 0.40836,0.228516 0.88645,1.150615 0.64222,1.238699 -0.0816,0.02941 -0.14838,0.146106 -0.14838,0.259328 0,0.148312 0.0431,0.167628 0.15446,0.06918 0.2148,-0.189951 1.45197,0.317409 1.45197,0.595452 0,0.119973 0.0711,0.175982 0.17083,0.13461 0.25117,-0.104266 1.17585,0.2745 1.58953,0.651127 0.19762,0.179926 0.41065,0.327101 0.4734,0.327101 0.0628,0 0.11409,0.199108 0.11409,0.442529 0,0.330911 -0.14025,0.620315 -0.55607,1.1474 -0.40355,0.511504 -0.55639,0.82106 -0.55723,1.128485 -0.001,0.44734 -0.64861,1.806159 -0.90077,1.890648 -0.0816,0.0274 -0.35298,0.08642 -0.603,0.131268 -0.59382,0.106539 -0.97227,0.450149 -1.02062,0.926784 -0.0261,0.257457 -0.23502,0.575468 -0.63596,0.968136 -0.32838,0.32162 -0.54906,0.584758 -0.49041,0.584758 0.0587,0 10e-4,0.125855 -0.12731,0.279714 -0.18187,0.217421 -0.32824,0.263137 -0.65724,0.20539 -0.32188,-0.05681 -0.38883,-0.03676 -0.27947,0.08127 0.40105,0.433974 0.022,1.038034 -0.6513,1.038034 -0.23467,0 -0.31705,0.06951 -0.31705,0.267416 0,0.178254 -0.0824,0.267415 -0.24714,0.267415 -0.1373,0 -0.24714,0.08916 -0.24714,0.200578 0,0.110282 0.0561,0.200579 0.12461,0.200579 0.14714,0 -0.10452,0.52554 -0.35554,0.742513 -0.14314,0.123716 -0.14314,0.191556 0,0.441259 0.11715,0.204388 0.12838,0.324695 0.0366,0.391332 -0.14981,0.108677 -0.35042,0.575534 -0.31733,0.738456 0.0427,0.210404 -0.56808,0.634285 -0.61589,0.427357 z m 3.32568,-6.255474 c -0.18432,-0.07894 -0.36198,-0.219226 -0.39481,-0.311796 -0.0328,-0.09257 0.0826,-0.707624 0.2565,-1.366772 l 0.31619,-1.198457 1.01613,-0.04679 c 0.87529,-0.0401 1.08618,-0.09905 1.52149,-0.425552 1.44273,-1.08214 1.08771,-3.006448 -0.5952,-3.226168 -0.37017,-0.04812 -1.25691,-0.06918 -1.97054,-0.04612 -1.14453,0.03676 -1.25743,0.06082 -0.95768,0.205391 0.23494,0.113222 0.33982,0.263338 0.33982,0.486307 0,0.416194 -1.34032,5.45784 -1.49778,5.633956 -0.0657,0.07352 -0.29781,0.204321 -0.5157,0.290674 -0.33771,0.133808 -0.15915,0.156332 1.21027,0.152924 1.27265,-0.003 1.5368,-0.03409 1.27131,-0.147577 z m 0.32994,-3.538332 c 0.0457,-0.128661 0.22576,-0.790523 0.40019,-1.470744 0.34776,-1.356072 0.47327,-1.468526 1.07118,-0.959641 0.82593,0.70294 -0.002,2.664369 -1.12536,2.664369 -0.35788,0 -0.41528,-0.03877 -0.34601,-0.233997 z m 1.54982,-4.178243 c 0,-0.07352 -0.0245,-0.133674 -0.0545,-0.133674 -0.03,0 -0.0889,0.06015 -0.13086,0.133674 -0.042,0.07352 -0.0175,0.133674 0.0545,0.133674 0.072,0 0.13086,-0.06015 0.13086,-0.133674 z m -5.80786,-2.866738 c 0,-0.03275 -0.0556,-0.09611 -0.12357,-0.141561 -0.068,-0.04545 -0.12357,-0.01872 -0.12357,0.05882 0,0.07787 0.0556,0.141628 0.12357,0.141628 0.068,0 0.12357,-0.02674 0.12357,-0.05882 z m 20.63645,15.033784 c -0.38473,-0.416262 -0.36796,-1.103361 0.0385,-1.577825 0.22598,-0.263806 0.3653,-0.30217 0.97752,-0.269353 0.66872,0.03609 0.71398,0.05949 0.71398,0.370812 v 0.332515 l -0.19237,-0.297158 c -0.22844,-0.3529 -0.80808,-0.398951 -1.09631,-0.08702 -0.22063,0.238742 -0.25737,1.016753 -0.0663,1.403125 0.14663,0.296423 0.84161,0.35945 1.08308,0.09818 0.0992,-0.10734 0.14829,-0.112086 0.14829,-0.01404 0,0.396879 -1.24808,0.428761 -1.60643,0.04077 z m 3.24114,0.17792 c -0.18454,-0.08034 -0.52257,-0.746658 -0.52257,-1.030101 0,-0.306314 0.61282,-1.019674 0.87598,-1.019674 0.22884,0 0.2285,0.008 -0.011,0.267416 -0.3019,0.326633 -0.3305,1.148783 -0.0548,1.574696 0.19565,0.302238 0.0956,0.374489 -0.28765,0.207663 z m 1.00292,-0.154995 c 0.3195,-0.381975 0.27617,-1.424166 -0.0701,-1.686615 -0.23524,-0.178255 -0.24294,-0.208131 -0.0537,-0.208131 0.64444,0 1.0834,0.789447 0.82063,1.475851 -0.15266,0.39875 -0.45204,0.663425 -0.7505,0.663425 -0.0992,0 -0.0808,-0.08375 0.0537,-0.24449 z m 1.99629,-0.825125 c 0,-1.051716 0.005,-1.069628 0.30893,-1.069942 0.30571,-3.07e-4 0.30851,0.01003 0.26828,1.002784 l -0.0406,1.003092 h 0.43613 c 0.28499,0 0.47977,-0.08107 0.56207,-0.233997 0.11249,-0.208933 0.12636,-0.201781 0.12971,0.06684 0.004,0.282655 -0.0466,0.300834 -0.83035,0.300834 h -0.8341 z m 3.02751,0.802226 c -0.16101,-0.174177 -0.24715,-0.44567 -0.24715,-0.77892 0,-0.675222 0.39578,-1.092934 1.03556,-1.092934 0.60582,0 0.87307,0.166759 1.0632,0.663426 0.24521,0.6405 -0.17374,1.475857 -0.74017,1.475857 -0.0822,0 -0.0599,-0.08716 0.0537,-0.210136 0.233,-0.25211 0.26516,-1.397758 0.0459,-1.635003 -0.22702,-0.245627 -0.69295,-0.190887 -0.83594,0.09818 -0.19537,0.395008 -0.1529,1.228053 0.0766,1.502432 0.1903,0.227514 0.1903,0.244491 0,0.244491 -0.11248,0 -0.31572,-0.120307 -0.45165,-0.267416 z m 3.15107,-0.802226 c 0,-1.057557 0.004,-1.069628 0.31529,-1.069628 0.26272,0 0.36162,0.117099 0.59302,0.701944 l 0.27772,0.701943 0.17493,-0.334252 c 0.26203,-0.500677 0.21879,-0.253045 -0.0846,0.484369 l -0.26825,0.652063 -0.4095,-0.935927 -0.4095,-0.935927 0.029,0.902782 c 0.0171,0.533761 -0.0215,0.902662 -0.0946,0.902502 -0.0721,-1.67e-4 -0.12357,-0.446138 -0.12357,-1.069916 z m 1.79179,0.259529 c 0,-0.498672 -0.0469,-0.778773 -0.12191,-0.728598 -0.0777,0.05213 -0.084,-0.03008 -0.0176,-0.226111 0.075,-0.22123 0.21988,-0.319882 0.51567,-0.351362 0.3574,-0.0381 0.39074,-0.01671 0.25427,0.16101 -0.11303,0.147376 -0.13278,0.450148 -0.0704,1.079961 l 0.0866,0.875193 h -0.32332 c -0.31314,0 -0.32332,-0.0254 -0.32332,-0.810113 z m 2.08062,-0.143834 c 0.0302,-0.691183 -0.004,-0.985807 -0.12356,-1.067883 -0.10106,-0.06931 0.12519,-0.114158 0.58233,-0.115361 0.41922,-0.001 0.81274,0.06844 0.8959,0.158404 0.20844,0.225508 0.18449,0.635153 -0.0427,0.72944 -0.16074,0.06684 -0.15097,0.109546 0.0618,0.270757 0.31887,0.241684 0.32568,0.659482 0.0137,0.840177 -0.13146,0.07613 -0.50681,0.138553 -0.8341,0.138687 l -0.5951,3e-4 z m 0.98395,0.659816 c 0.19542,-0.211472 0.18716,-0.313198 -0.0459,-0.565375 -0.30136,-0.326098 -0.42367,-0.251642 -0.42367,0.257858 0,0.485572 0.18999,0.610022 0.46957,0.307517 z m -0.0371,-1.310295 c 0,-0.4182 -0.37865,-0.527946 -0.49171,-0.142497 -0.10177,0.346952 0.0228,0.57079 0.28698,0.515783 0.12476,-0.02607 0.20473,-0.171772 0.20473,-0.373219 z m 1.89387,0.534497 -0.0403,-1.069942 0.4325,0.0025 c 0.28474,0.0015 0.37603,0.04077 0.26723,0.115695 -0.11967,0.08208 -0.15377,0.376694 -0.12357,1.067884 0.0395,0.904754 0.0277,0.954521 -0.22693,0.954234 -0.25003,-2.81e-4 -0.27142,-0.07439 -0.30893,-1.07025 z m 2.34348,0.06717 c 0.24752,-0.55154 0.48142,-1.002784 0.51978,-1.002784 0.0384,0 0.27611,0.451284 0.52833,1.002784 l 0.45859,1.002778 h -0.29959 c -0.19375,0 -0.32807,-0.09712 -0.3802,-0.274835 -0.0653,-0.222634 -0.16657,-0.267014 -0.53351,-0.233996 -0.34284,0.03075 -0.44872,0.09765 -0.43573,0.274767 0.009,0.128662 -0.0559,0.233997 -0.14528,0.233997 -0.10864,0 -0.0134,-0.332114 0.28761,-1.002778 z m 0.559,0.100256 c -0.14478,-0.44019 -0.2003,-0.474811 -0.36664,-0.228717 -0.23957,0.354504 -0.20718,0.462647 0.13856,0.462647 0.23746,0 0.28799,-0.05213 0.22808,-0.233997 z m -34.14136,-3.684645 c -0.56634,-0.210202 -0.77281,-0.654803 -0.6915,-1.48885 0.12946,-1.327813 1.20354,-2.584753 2.47101,-2.891655 0.59048,-0.142965 0.71628,-0.135412 0.99142,0.05949 0.84098,0.596187 -0.12695,2.01145 -1.62355,2.373841 -0.65201,0.157869 -0.65632,0.16228 -0.65632,0.66777 0,0.841499 0.5629,1.009367 1.52624,0.455161 0.61726,-0.355106 0.74576,-0.286665 0.29644,0.157869 -0.65105,0.644109 -1.62093,0.923402 -2.31374,0.666232 z m 1.40601,-2.505837 c 0.4316,-0.410046 0.77612,-1.207714 0.63119,-1.461448 -0.26573,-0.465186 -0.89802,0.172106 -1.357,1.367856 -0.18448,0.480625 -0.18232,0.501412 0.052,0.501412 0.13447,0 0.43767,-0.183535 0.67376,-0.407774 z m 2.20184,2.472619 c -0.36292,-0.275034 -0.35045,-0.446204 0.15668,-2.151794 0.23722,-0.797842 0.43185,-1.495749 0.4325,-1.550903 4.7e-4,-0.05548 -0.11004,-0.100255 -0.24596,-0.100255 -0.39855,0 -0.28539,-0.240881 0.25271,-0.537906 0.27492,-0.151787 0.72124,-0.492322 0.99183,-0.756843 0.55793,-0.545391 0.69958,-0.515716 0.49974,0.104533 -0.18693,0.580213 -0.17573,0.655405 0.0977,0.655405 0.17474,0 0.21888,0.06904 0.17094,0.267415 -0.0399,0.165088 -0.16855,0.267416 -0.33621,0.267416 -0.23909,0 -0.32605,0.190753 -0.72701,1.594928 -0.25049,0.87721 -0.45544,1.629288 -0.45544,1.671296 0,0.17284 0.31154,0.05748 0.579,-0.214347 0.33543,-0.340936 0.37647,-0.171304 0.0582,0.24068 -0.21261,0.275303 -0.88987,0.718526 -1.09789,0.718526 -0.0562,0 -0.2258,-0.09364 -0.37685,-0.208131 z m 6.70415,0.02139 c -1.2301,-0.579879 -0.67685,-3.052519 0.90785,-4.057368 0.40003,-0.253647 0.73043,-0.353368 1.1711,-0.353368 0.54009,0 0.65821,0.05347 0.98305,0.447074 0.33314,0.403429 0.36227,0.510368 0.29825,1.095266 -0.14285,1.305116 -0.9583,2.450464 -2.0245,2.84354 -0.68487,0.25251 -0.84642,0.255518 -1.33575,0.02473 z m 1.50113,-0.773813 c 0.41076,-0.663626 0.834,-2.239051 0.7667,-2.853872 -0.0223,-0.20372 -0.13536,-0.434576 -0.25124,-0.513109 -0.31404,-0.212743 -0.76193,0.310926 -1.14004,1.332893 -0.80283,2.169867 -0.35739,3.620547 0.62458,2.034068 z m 2.2275,0.124785 c 0.10007,-0.459573 0.21353,-1.002357 0.25215,-1.206117 0.0895,-0.47207 0.28458,-0.611292 0.28815,-0.205657 0.001,0.169833 0.10396,0.549869 0.2277,0.844587 0.60609,1.443535 2.55016,1.221228 2.32709,-0.266079 -0.0467,-0.311394 -0.32901,-0.782943 -0.87203,-1.456635 -0.8841,-1.096837 -1.11429,-1.694188 -0.93047,-2.414531 0.12914,-0.506024 0.69803,-1.098328 1.1809,-1.229456 0.17074,-0.04612 0.65301,-0.0401 1.07173,0.01404 1.02835,0.132605 1.34239,0.136214 1.5834,0.01805 0.18376,-0.09003 0.17917,0.008 -0.0457,0.976898 -0.25903,1.115986 -0.38149,1.245263 -0.51181,0.540244 -0.099,-0.535499 -0.71255,-1.197434 -1.10997,-1.197434 -0.47685,0 -0.69252,0.132873 -0.89153,0.549268 -0.25757,0.538908 -0.0367,1.047959 0.94978,2.188983 l 0.78713,0.910442 v 0.83896 c 0,0.992418 -0.25499,1.382493 -1.14384,1.749783 -0.48913,0.202115 -0.67216,0.208866 -1.64095,0.06082 -0.78547,-0.120307 -1.15967,-0.126857 -1.33808,-0.02339 -0.13622,0.07887 -0.2742,0.143432 -0.30662,0.143432 -0.0324,0 0.0229,-0.376026 0.12298,-0.835651 z m 5.68642,0.592912 c -0.29922,-0.357779 -0.37911,-1.006768 -0.21264,-1.72752 0.41813,-1.81043 2.08703,-3.223708 2.72543,-2.307973 l 0.20992,0.301102 0.0687,-0.284392 c 0.0557,-0.230589 0.16276,-0.284392 0.56596,-0.284392 0.48412,0 0.49461,0.01002 0.39794,0.367671 -0.0546,0.202249 -0.27929,1.019861 -0.49931,1.816967 -0.4265,1.545174 -0.38856,2.029831 0.10567,1.350003 0.17262,-0.237472 0.26304,-0.291543 0.26304,-0.157401 0,0.309389 -0.65831,1.007282 -1.05067,1.113834 -0.52733,0.143232 -0.74542,-0.08528 -0.7161,-0.75026 l 0.025,-0.567381 -0.35899,0.528147 c -0.54481,0.801585 -1.15517,1.042493 -1.52401,0.601535 z m 1.59206,-1.126707 c 0.77008,-0.990226 1.14538,-2.909066 0.56898,-2.909066 -0.30636,0 -0.55818,0.32416 -0.93444,1.202854 -0.71504,1.669906 -0.47561,2.787737 0.36546,1.706212 z m 8.05679,1.225044 c -0.30798,-0.194095 -0.2727,-0.558157 0.21398,-2.207824 0.23662,-0.802072 0.43125,-1.473358 0.4325,-1.491745 0.001,-0.01871 -0.10894,-0.03342 -0.24487,-0.03342 -0.42233,0 -0.27203,-0.360253 0.27803,-0.666433 0.28885,-0.160811 0.73269,-0.508898 0.98631,-0.773614 0.5232,-0.546059 0.68099,-0.507895 0.47995,0.116163 -0.18796,0.583355 -0.17321,0.789093 0.0566,0.789093 0.29989,0 0.15478,0.461377 -0.16043,0.510101 -0.23111,0.03542 -0.33943,0.274366 -0.71454,1.574556 -0.24318,0.842843 -0.40586,1.595957 -0.36153,1.673575 0.0493,0.08635 0.21923,-0.0025 0.43777,-0.229118 0.37393,-0.387588 0.47798,-0.303641 0.16981,0.137016 -0.4398,0.628938 -1.11852,0.88844 -1.57354,0.601668 z m 2.67594,-0.137283 c -0.84369,-1.009715 0.67134,-4.264203 1.98508,-4.264203 0.28881,0 0.48207,0.08294 0.57713,0.247632 0.13911,0.241015 0.14901,0.241015 0.37176,0 0.22045,-0.238542 0.97195,-0.352833 0.96868,-0.147309 -9.3e-4,0.05548 -0.11532,0.491386 -0.25431,0.969352 -0.74924,2.576578 -0.80747,3.1705 -0.24705,2.51964 0.34627,-0.402159 0.44485,-0.239077 0.12306,0.203586 -0.7723,1.062329 -1.89505,0.940699 -1.59977,-0.173309 0.10958,-0.413388 0.0958,-0.406169 -0.47379,0.250305 -0.65423,0.753977 -1.05848,0.863863 -1.45079,0.394339 z m 1.58778,-0.888179 c 0.31109,-0.376627 0.82039,-1.492533 0.90568,-1.984421 0.18114,-1.044771 -0.30385,-1.497513 -0.79869,-0.745588 -0.67782,1.02996 -1.02251,2.963986 -0.52825,2.963986 0.1254,0 0.31496,-0.105269 0.42126,-0.233997 z m 8.24789,0.902495 c -0.71878,-0.777717 0.16259,-3.408386 1.36787,-4.082766 0.42057,-0.235334 0.99984,-0.254516 1.19837,-0.03943 0.10993,0.11897 0.1594,0.111016 0.20801,-0.03342 0.525,-1.559825 0.5425,-1.769767 0.16282,-1.953074 -0.2375,-0.114693 -0.16129,-0.156533 0.549,-0.301569 0.45363,-0.09264 0.87649,-0.147176 0.9397,-0.121243 0.0632,0.02607 -0.24021,1.310616 -0.67427,2.854895 -0.43405,1.544278 -0.77452,2.928115 -0.75659,3.07519 0.0314,0.257657 0.0431,0.255986 0.32093,-0.04478 0.15858,-0.171571 0.31941,-0.278377 0.35739,-0.237272 0.038,0.04077 -0.15474,0.316875 -0.42827,0.61283 -0.77383,0.837289 -1.50285,0.664561 -1.35502,-0.321086 l 0.0684,-0.455829 -0.58572,0.657477 c -0.64071,0.719234 -0.97941,0.815493 -1.37258,0.390061 z m 1.57094,-0.969352 c 0.5501,-0.649657 1.10864,-2.275403 0.95807,-2.788699 -0.0575,-0.196034 -0.16691,-0.257457 -0.40502,-0.22738 -0.26037,0.03275 -0.40622,0.208732 -0.72244,0.871015 -0.77274,1.618381 -0.65432,3.117865 0.16939,2.145091 z m 3.20782,0.963558 c -0.87512,-0.744813 -0.3208,-2.727978 1.04422,-3.735842 0.6806,-0.502548 1.80214,-0.713199 2.14719,-0.403362 0.73029,0.655806 -0.72196,2.394494 -2.00785,2.403898 -0.38216,0.003 -0.4016,0.0274 -0.4016,0.511036 0,0.279446 0.0667,0.58028 0.14829,0.668512 0.22971,0.248567 0.98119,0.188748 1.44118,-0.114692 0.50501,-0.333117 0.63205,-0.259663 0.24138,0.139622 -0.78435,0.801591 -2.00362,1.049297 -2.61281,0.530821 z m 1.81385,-2.376435 c 0.52187,-0.511037 0.74581,-1.43246 0.38458,-1.582443 -0.25963,-0.107808 -0.64347,0.297158 -0.99733,1.052171 -0.40478,0.863669 -0.39439,1.074687 0.044,0.894334 0.18678,-0.07686 0.44271,-0.240681 0.56872,-0.364062 z m -42.4188,2.081395 c 0.91712,-3.439666 0.93776,-3.576575 0.53924,-3.576575 -0.0979,0 -0.17807,-0.04946 -0.17807,-0.110081 0,-0.124785 1.4966,-0.454425 1.59241,-0.350761 0.0342,0.03676 -0.0584,0.468328 -0.20566,0.958538 -0.1473,0.490184 -0.24518,0.915762 -0.21751,0.945699 0.0276,0.03008 0.22099,-0.311461 0.42961,-0.758608 0.59202,-1.26895 1.36687,-1.606144 1.36687,-0.594851 0,0.830037 -0.3592,1.230679 -0.67904,0.757405 -0.0826,-0.122245 -0.23351,-0.187679 -0.33531,-0.145437 -0.23045,0.09564 -0.87066,1.515986 -1.14509,2.540392 l -0.20595,0.768801 h -0.53868 -0.53868 z m 17.94315,0.261801 c 0.29949,-0.844447 0.95777,-3.500461 0.90468,-3.650163 -0.0367,-0.10353 -0.15518,-0.188213 -0.26327,-0.188213 -0.10809,0 -0.16486,-0.05548 -0.12615,-0.123181 0.0741,-0.129731 1.64469,-0.35437 1.74191,-0.249236 0.0311,0.03342 -0.0548,0.411383 -0.19096,0.839381 -0.1361,0.428025 -0.24746,0.807346 -0.24746,0.84293 0,0.03542 0.34809,-0.334854 0.77353,-0.823153 0.67073,-0.769863 0.83166,-0.887844 1.211,-0.887844 0.85778,0 0.91537,0.390529 0.33846,2.2949 -0.21758,0.718212 -0.35638,1.348272 -0.30845,1.400138 0.0479,0.05213 0.22595,-0.04679 0.39559,-0.219226 0.47519,-0.483032 0.36508,-0.103598 -0.13001,0.447942 -0.33595,0.374288 -0.53714,0.488446 -0.86065,0.488446 -0.70345,0 -0.74164,-0.292947 -0.25578,-1.962278 0.23166,-0.795944 0.37641,-1.497867 0.32166,-1.559839 -0.31822,-0.360185 -1.52471,1.240304 -1.93727,2.569922 l -0.2747,0.885344 -0.57954,0.04144 c -0.45849,0.03275 -0.56556,0.002 -0.51259,-0.147376 z m 12.44589,-0.01671 c 0,-0.104333 0.19463,-0.861297 0.4325,-1.682197 0.48051,-1.658203 0.51835,-1.978312 0.24715,-2.090913 -0.37839,-0.157134 -0.16284,-0.287199 0.62758,-0.378833 0.44711,-0.05213 0.83431,-0.07105 0.86044,-0.04277 0.0262,0.02807 -0.0332,0.379501 -0.13182,0.780564 -0.25131,1.021766 -0.23596,1.044243 0.24637,0.36072 0.77672,-1.100634 1.72132,-1.486579 2.10157,-0.85865 0.2025,0.334386 0.17409,0.499206 -0.4401,2.552744 -0.28196,0.942731 -0.27727,0.880419 -0.0663,0.880419 0.0937,0 0.25756,-0.135346 0.36423,-0.300834 0.11282,-0.17498 0.19666,-0.225308 0.20043,-0.120307 0.004,0.09925 -0.18606,0.388858 -0.4214,0.643441 -0.36153,0.391198 -0.50044,0.456498 -0.89589,0.421141 -0.41968,-0.03743 -0.47163,-0.08321 -0.50305,-0.44293 -0.0193,-0.220629 0.13365,-0.938854 0.33982,-1.596097 0.20617,-0.657277 0.37485,-1.273956 0.37485,-1.370469 0,-0.328237 -0.31804,-0.176851 -0.82506,0.392802 -0.6885,0.773479 -1.08454,1.503702 -1.26901,2.339814 l -0.15486,0.70195 h -0.54375 c -0.38705,0 -0.54375,-0.05481 -0.54375,-0.189683 z m 14.34619,-1.581921 c 0.26233,-0.974365 0.47819,-1.841771 0.47968,-1.927563 10e-4,-0.08582 -0.1502,-0.212074 -0.33711,-0.280649 -0.32361,-0.118703 -0.30859,-0.132004 0.31501,-0.278577 1.21922,-0.286531 1.28296,-0.234198 0.9516,0.782021 -0.27481,0.842776 -0.22293,0.946126 0.13425,0.267415 0.60138,-1.142768 1.12966,-1.503488 1.40037,-0.956192 0.15695,0.317276 -9.4e-4,0.960523 -0.28161,1.146518 -0.17053,0.113021 -0.25452,0.08943 -0.39138,-0.109881 -0.15168,-0.220896 -0.20148,-0.229585 -0.38432,-0.06684 -0.23492,0.209067 -0.76635,1.426458 -1.08846,2.49336 l -0.21192,0.70195 h -0.53155 -0.53154 z\"\n                id=\"use1\" />\n        </g>\n    </g>\n</svg>",
        "clickableShapes": [
            {
                "targetId": "#PIT_2002_HH",
                "action": "click",
                "payload": "0 a 600 ",
                "payloadType": "str",
                "topic": "PIT_2002_HH"
            },
            {
                "targetId": "#PIT_2002_H",
                "action": "click",
                "payload": "0 a 600",
                "payloadType": "str",
                "topic": "PIT_2002_H"
            },
            {
                "targetId": "#UIT_2001_PRESSURE_IN",
                "action": "click",
                "payload": "0 a 600",
                "payloadType": "str",
                "topic": "UIT_2001_PRESSURE_IN"
            },
            {
                "targetId": "#SIC_2002_SP",
                "action": "click",
                "payload": "0.0 a 2.999",
                "payloadType": "str",
                "topic": "SIC_2002_SP"
            },
            {
                "targetId": "#SIC_2002_CV",
                "action": "click",
                "payload": "0  a 100",
                "payloadType": "str",
                "topic": "SIC_2002_CV"
            }
        ],
        "javascriptHandlers": [],
        "smilAnimations": [],
        "bindings": [
            {
                "selector": "#SIC_2002_PV",
                "bindSource": "payload.SIC_2002_PV",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#SIC_2002_SP",
                "bindSource": "payload.SIC_2002_SP",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#SIC_2002_CV",
                "bindSource": "payload.SIC_2002_CV",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#UIT_2001_TEMPERATURE",
                "bindSource": "payload.UIT_2002_TEMPERATURE",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#UIT_2001_PRESSURE_IN",
                "bindSource": "payload.UIT_2002_PRESSURE_IN",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#UIT_2002_SPEED",
                "bindSource": "payload.UIT_2002_SPEED",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#UIT_2001_PRESSURE_OUT",
                "bindSource": "payload.UIT_2002_PRESSURE_OUT",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#PIT_2002_PV",
                "bindSource": "payload.PIT_2002_PV",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#PIT_2002_HH",
                "bindSource": "payload.PIT_2002_HH",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#PIT_2002_H",
                "bindSource": "payload.PIT_2002_H",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#PIT_2002_BACK",
                "bindSource": "payload.PIT_2002_ALARM",
                "bindType": "style",
                "attribute": "fill"
            },
            {
                "selector": "#UIT_2002_FLOW",
                "bindSource": "payload.UIT_2002_FLOW",
                "bindType": "text",
                "attribute": ""
            }
        ],
        "showCoordinates": false,
        "autoFormatAfterEdit": false,
        "showBrowserErrors": false,
        "showBrowserEvents": false,
        "enableJsDebugging": false,
        "sendMsgWhenLoaded": false,
        "noClickWhenDblClick": false,
        "outputField": "payload",
        "editorUrl": "//drawsvg.org/drawsvg.html",
        "directory": "",
        "panning": "disabled",
        "zooming": "disabled",
        "panOnlyWhenZoomed": false,
        "doubleClickZoomEnabled": false,
        "mouseWheelZoomEnabled": false,
        "dblClickZoomPercentage": 150,
        "cssString": "div.ui-svg svg{\n    color: var(--nr-dashboard-widgetColor);\n    fill: currentColor !important;\n}\ndiv.ui-svg path {\n    fill: inherit;\n}",
        "name": "",
        "x": 600,
        "y": 220,
        "wires": [
            [
                "50ba8e0e315ffe7f"
            ]
        ]
    },
    {
        "id": "6becd5721e8dbb45",
        "type": "ui_toast",
        "z": "8389501e8b369815",
        "position": "prompt",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1010,
        "y": 140,
        "wires": [
            [
                "33b3c0bdfd051811"
            ]
        ]
    },
    {
        "id": "33b3c0bdfd051811",
        "type": "function",
        "z": "8389501e8b369815",
        "name": "Set SIC_2002.SP",
        "func": "let sic_2002=global.get(\"SIC_2002\");\n\nif(msg.payload ===\"Cancel\")\n{\n   \n   msg.payload=\"No valido\"; \n\n}\nelse\n{\n    let value=parseFloat(msg.payload);\n    if(value>=3.0)value=3.0;\n    if(value<=0)value=0;\n    sic_2002.SP=value;\n    global.set(\"SIC_2002\",sic_2002);\n    msg.payload=value;\n    global.set(\"SendSIC_SP\",true);\n\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1280,
        "y": 140,
        "wires": [
            [
                "2409349d1b473013"
            ]
        ]
    },
    {
        "id": "2409349d1b473013",
        "type": "debug",
        "z": "8389501e8b369815",
        "name": "debug 8",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1520,
        "y": 140,
        "wires": []
    },
    {
        "id": "c4e13892a14f335e",
        "type": "function",
        "z": "8389501e8b369815",
        "name": "Set SIC_2002.CV",
        "func": "let sic_2002=global.get(\"SIC_2002\");\n\nif(msg.payload!=\"Cancel\")\n{\n    let value=parseFloat(msg.payload);\n    if(value>=100.0)value=100.0;\n    if(value<=0)value=0;\n    sic_2002.CV=value;\n    global.set(\"SIC_2002\",sic_2002);\n    global.set(\"SendSIC_CV\",true);\n    \n\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "9841da6483ff1063",
        "type": "function",
        "z": "8389501e8b369815",
        "name": "Set PIT_2002.HH",
        "func": "let pit_2002=global.get(\"PIT_2002\");\n\nif(msg.payload!=\"Cancel\")\n{\n    let value=parseFloat(msg.payload);\n    if(value>=600.0)value=600.0;\n    if(value<=0)value=0;\n    pit_2002.HH=value;\n    global.set(\"PIT_2002\",pit_2002);\n    global.set(\"SendHH\",true);\n    \n\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "5020d1352ec7c0a9",
        "type": "function",
        "z": "8389501e8b369815",
        "name": "Set UIT_2002.PRESSURE_IN",
        "func": "let uit_2002=global.get(\"UIT_2002\");\n\nif(msg.payload!=\"Cancel\")\n{\n    global.set(\"SendPressureIN\",true);\n    let value=parseFloat(msg.payload);\n    if(value>=600.0)value=600.0;\n    if(value<=0)value=0;\n    uit_2002.PRESSURE_IN=value;\n    global.set(\"UIT_2002\",uit_2002);\n    \n    \n\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1310,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "8ef2ad2f794bc3d2",
        "type": "function",
        "z": "8389501e8b369815",
        "name": "Set PIT_2002.H",
        "func": "let pit_2002=global.get(\"PIT_2002\");\n\nif(msg.payload!=\"Cancel\")\n{\n    let value=parseFloat(msg.payload);\n    if(value>=600.0)value=600.0;\n    if(value<=0)value=0;\n    pit_2002.H=value;\n    global.set(\"PIT_2002\",pit_2002);\n    global.set(\"SendH\",true);\n    \n\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "4d8b6887735ef8fe",
        "type": "ui_toast",
        "z": "8389501e8b369815",
        "position": "prompt",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1010,
        "y": 180,
        "wires": [
            [
                "c4e13892a14f335e"
            ]
        ]
    },
    {
        "id": "5822916bb04915ad",
        "type": "ui_toast",
        "z": "8389501e8b369815",
        "position": "prompt",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1010,
        "y": 220,
        "wires": [
            [
                "9841da6483ff1063"
            ]
        ]
    },
    {
        "id": "50b09ac358422970",
        "type": "ui_toast",
        "z": "8389501e8b369815",
        "position": "prompt",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1010,
        "y": 260,
        "wires": [
            [
                "8ef2ad2f794bc3d2"
            ]
        ]
    },
    {
        "id": "33ac8c6854ecadec",
        "type": "ui_toast",
        "z": "8389501e8b369815",
        "position": "prompt",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1010,
        "y": 300,
        "wires": [
            [
                "5020d1352ec7c0a9"
            ]
        ]
    },
    {
        "id": "ba583c5f48df3905",
        "type": "function",
        "z": "a9cd65b1c67ffc15",
        "name": "function 50",
        "func": "\n\nlet tagName = global.get(\"SetingAnalog\");\nlet tag = global.get(tagName);\n\ntag.HH=msg.payload.SetHH;\ntag.H=msg.payload.SetH;\ntag.L = msg.payload.SetL;\ntag.LL = msg.payload.SetLL;\ntag.Min = msg.payload.SetMin;\ntag.Max = msg.payload.SetMax;\ntag.enableHH = msg.payload.EnableHH;\ntag.enableH = msg.payload.EnableH;\ntag.enableL = msg.payload.EnableL;\ntag.enableLL = msg.payload.EnableLL;\n\n\n\nglobal.set(\"EditTag\", false);\n\nmsg.payload = { \"tab\": global.get(\"returnTab\") || \"main\"}\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 260,
        "wires": [
            [
                "743b223254bc5cb1"
            ]
        ]
    },
    {
        "id": "6306d7ae2cbda46e",
        "type": "function",
        "z": "a9cd65b1c67ffc15",
        "name": "function 51",
        "func": "let tagName = global.get(\"SetingAnalog\");\nlet tag=global.get(tagName);\nlet ehh,eh,el,ell;\n\nif (tag.enableHH==1)  ehh= true;\nelse ehh = false;\n\nif (tag.enableH==1) eh= true;\nelse eh = false;\n\nif (tag.enableL==1) el = true;\nelse el = false;\n\nif (tag.enableLL==1) ell = true;\nelse ell = false;\n\n\n\n    msg.payload = {\n        \"TagName\": tag.TagName,\n        \"SetHH\": tag.HH,\n        \"SetH\": tag.H,\n        \"SetL\": tag.L,\n        \"SetLL\": tag.LL,\n        \"SetMin\": tag.Min,\n        \"SetMax\": tag.Max,\n        \"EnableHH\": ehh,\n        \"EnableH\": eh,\n        \"EnableL\": el,\n        \"EnableLL\": ell,\n    }\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 220,
        "wires": [
            [
                "bcb0bbe84fde79b0"
            ]
        ]
    },
    {
        "id": "f65750fa740d440e",
        "type": "inject",
        "z": "a9cd65b1c67ffc15",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "start",
        "payloadType": "str",
        "x": 90,
        "y": 280,
        "wires": [
            [
                "cb7c30ecc5d33f02"
            ]
        ]
    },
    {
        "id": "cb7c30ecc5d33f02",
        "type": "switch",
        "z": "a9cd65b1c67ffc15",
        "name": "",
        "property": "EditTag",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 250,
        "y": 280,
        "wires": [
            [],
            [
                "6306d7ae2cbda46e"
            ]
        ]
    },
    {
        "id": "27ece5b8978544b2",
        "type": "function",
        "z": "a9cd65b1c67ffc15",
        "name": "Make_query",
        "func": "let tagName = global.get(\"SetingAnalog\");\nlet tag = global.get(tagName);\n\ntag.HH = msg.payload.SetHH;\ntag.H = msg.payload.SetH;\ntag.L = msg.payload.SetL;\ntag.LL = msg.payload.SetLL;\ntag.Min = msg.payload.SetMin;\ntag.Max = msg.payload.SetMax;\n\nif (msg.payload.EnableHH==true)tag.enableHH = 1;\nelse tag.enableHH = 0;\n\nif (msg.payload.EnableH == true) tag.enableH = 1;\nelse tag.enableH = 0;\n\nif (msg.payload.EnableL == true) tag.enableL = 1;\nelse tag.enableL = 0;\n\nif (msg.payload.EnableLL == true) tag.enableLL = 1;\nelse tag.enableLL = 0;\n\n\nmsg.topic = `UPDATE tblTags SET HH=$sethh,H=$seth, L=$setl, LL=$setll, Max=$max, Min=$min,enableHH=$ehh, enableH=$eh, enableL=$el, enableLL=$elll WHERE TagName=$tag `;\nmsg.payload = [tag.HH, tag.H, tag.L, tag.LL, tag.Max, tag.Min,tag.enableHH, tag.enableH, tag.enableL, tag.enableLL, tag.TagName];\nreturn msg;\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 180,
        "wires": [
            [
                "c9eae6cebc129e92"
            ]
        ]
    },
    {
        "id": "3ccb4c02865ecec5",
        "type": "ui_button",
        "z": "a9cd65b1c67ffc15",
        "name": "",
        "group": "e230319ddc57e5e6",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Refresh",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 80,
        "y": 220,
        "wires": [
            [
                "6306d7ae2cbda46e"
            ]
        ]
    },
    {
        "id": "bcb0bbe84fde79b0",
        "type": "ui_form",
        "z": "a9cd65b1c67ffc15",
        "name": "FormAnalogSet",
        "label": "{{payload.TagName}}",
        "group": "e230319ddc57e5e6",
        "order": 4,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Set HH",
                "value": "SetHH",
                "type": "number",
                "required": true,
                "rows": null
            },
            {
                "label": "Enable HH",
                "value": "EnableHH",
                "type": "checkbox",
                "required": true,
                "rows": null
            },
            {
                "label": "Set H",
                "value": "SetH",
                "type": "number",
                "required": true,
                "rows": null
            },
            {
                "label": "EnableH",
                "value": "EnableH",
                "type": "checkbox",
                "required": true,
                "rows": null
            },
            {
                "label": "Set L",
                "value": "SetL",
                "type": "number",
                "required": true,
                "rows": null
            },
            {
                "label": "Enable L",
                "value": "EnableL",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "Set LL",
                "value": "SetLL",
                "type": "number",
                "required": true,
                "rows": null
            },
            {
                "label": "Enable LL",
                "value": "EnableLL",
                "type": "checkbox",
                "required": false,
                "rows": null
            },
            {
                "label": "Set Min",
                "value": "SetMin",
                "type": "number",
                "required": true,
                "rows": null
            },
            {
                "label": "Set Max",
                "value": "SetMax",
                "type": "number",
                "required": true,
                "rows": null
            }
        ],
        "formValue": {
            "SetHH": "",
            "EnableHH": false,
            "SetH": "",
            "EnableH": false,
            "SetL": "",
            "EnableL": false,
            "SetLL": "",
            "EnableLL": false,
            "SetMin": "",
            "SetMax": ""
        },
        "payload": "",
        "submit": "Send/Clouse",
        "cancel": "",
        "topic": "topic",
        "topicType": "str",
        "splitLayout": true,
        "className": "",
        "x": 600,
        "y": 220,
        "wires": [
            [
                "ba583c5f48df3905",
                "27ece5b8978544b2"
            ]
        ]
    },
    {
        "id": "743b223254bc5cb1",
        "type": "ui_ui_control",
        "z": "a9cd65b1c67ffc15",
        "name": "",
        "events": "all",
        "x": 1020,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "c9eae6cebc129e92",
        "type": "sqlite",
        "z": "a9cd65b1c67ffc15",
        "mydb": "8a9376f64511d022",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "Write SQL",
        "x": 1080,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "9fc9832d89df39e7",
        "type": "template",
        "z": "3b30c3f369fbd9c7",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<!DOCTYPE html>\n<html>\n\n<body>\n    {{#payload}}\n\n     <div class=\"portada\">\n        <img src=\"data:image/png;base64,{{LOGO}}\" alt=\"img\">\n        <h2 class=\"h2_label\" >TIQUETE DE MEDICIÓN GLP SEGÚN NORMA API MPMS 12.2.2</h2>\n        <h3 class=\"h3_label\" >DEPARTAMENTO PLANTA DE GAS -  CAMPO DE PRODUCCIÓN PAYOA</h3>\n     </div>   \n\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">Timestamp</div>\n            <div>{{ timestamp }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">Product</div>\n            <div>{{ producto }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">Observed Relative Density</div>\n            <div>{{ den_rel_observada }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">Observed Temperature (°C)</div>\n            <div>{{ temperatura_observada }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">Vapor Pressure (kPa)</div>\n            <div>{{ presion_vapor }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">Equilibrium Pressure (kPa)</div>\n            <div>{{ presion_equilibriorio }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">Pulses</div>\n            <div>{{ pulsos }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">M Factor</div>\n            <div>{{ m_facot }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">K Factor</div>\n            <div>{{ k_factor }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">Average Temperature (°C)</div>\n            <div>{{ tem_prom }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">Average Pressure (kPa)</div>\n            <div>{{ presion_promedio }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">Relative Density at 60°F</div>\n            <div>{{ den_rela_60 }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">API Gravity</div>\n            <div>{{ gravedad_api }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">CTL Factor</div>\n            <div>{{ ctl_factor }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">CPL Factor</div>\n            <div>{{ cpl_facto }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">CCP</div>\n            <div>{{ ccp }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">Indicated Volume (m³)</div>\n            <div>{{ volumen_indicado }}</div>\n        </div>\n        <div class=\"report-item\">\n            <div class=\"report-item-label\">Net Volume (m³)</div>\n            <div>{{ volumen_neto }}</div>\n        </div>\n    \n    <div class=\"footer\">\n        <p>Fecha y Hora Inicio: {{fecha_hora_inicio}}</p>\n        <p>Fecha y Hora Final : {{fecha_hora_fin}}</p>\n        <p>Bache Numero: {{tiquete_no}}</p>\n    </div>\n    {{/payload}}\n</body>\n</html>",
        "output": "str",
        "x": 760,
        "y": 120,
        "wires": [
            [
                "59a6c755075934c4",
                "fe2bd8083c774d93"
            ]
        ]
    },
    {
        "id": "59a6c755075934c4",
        "type": "function",
        "z": "3b30c3f369fbd9c7",
        "name": "function 55",
        "func": "msg.filename=\"/data/db/pdf/\" +msg.topic+\"Reporte.pdf\"\n\nmsg.options = {\n                \"height\": \"10.5in\",\n                \"width\": \"8in\",         \n  \n                \"format\": \"Letter\",\n                \"border\": {\n                    \"top\": \"1in\",           \n                    \"right\": \"0.5in\",\n                    \"bottom\": \"1in\",\n                    \"left\": \"0.5in\"\n                },\n   \n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 120,
        "wires": [
            [
                "0be581fd40a85b2a"
            ]
        ]
    },
    {
        "id": "a010917be6f3f18c",
        "type": "inject",
        "z": "3b30c3f369fbd9c7",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 120,
        "wires": [
            [
                "71cf588f2a3620dc",
                "fdef3c7280659944"
            ]
        ]
    },
    {
        "id": "d646588b6cea77ac",
        "type": "debug",
        "z": "3b30c3f369fbd9c7",
        "name": "debug 5",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 900,
        "y": 280,
        "wires": []
    },
    {
        "id": "71cf588f2a3620dc",
        "type": "file in",
        "z": "3b30c3f369fbd9c7",
        "name": "GetLogo",
        "filename": "/data/imgs/petrosantander.png",
        "filenameType": "str",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 290,
        "y": 60,
        "wires": [
            [
                "2dc35963aaf05ebb"
            ]
        ]
    },
    {
        "id": "2dc35963aaf05ebb",
        "type": "function",
        "z": "3b30c3f369fbd9c7",
        "name": "function 60",
        "func": "global.set(\"LOGO_PETRO\", msg.payload);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "fe2bd8083c774d93",
        "type": "ui_template",
        "z": "3b30c3f369fbd9c7",
        "group": "42b15aafb8d1be1d",
        "name": "",
        "order": 2,
        "width": 26,
        "height": 16,
        "format": "<style>\n    \n    .report-item {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            grid-gap: 8px;\n            margin-bottom: 16px;\n        }\n    \n    .report-item-label {\n            font-weight: bold;\n    }\n    img {\n        width: 200px; /* Adjust the width according to your logo */\n        margin-bottom: 20px;\n    }\n\n    .h3_label{\n        margin-left: 2px;\n        text-align: center;\n    }\n    .h2_label {\n        margin-left: 2px;\n        text-align: center;\n    }\n    .portada {\n    display: grid;\n    grid-template-columns: 1fr 3fr;\n    margin-left: 5px;\n    grid-gap: 3px;\n    }\n \n</style>\n\n\n<div ng-bind-html=\"msg.payload\"></div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 940,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "0be581fd40a85b2a",
        "type": "html-to-pdf",
        "z": "3b30c3f369fbd9c7",
        "name": "",
        "format": "A4",
        "zoom": 100,
        "orientation": "Portrait",
        "width": "",
        "height": "",
        "widthUnit": "cm",
        "heightUnit": "cm",
        "marginTop": 1,
        "marginLeft": 1,
        "marginBottom": 1,
        "marginRight": 1,
        "marginTopUnits": "cm",
        "marginLeftUnits": "cm",
        "marginBottomUnits": "cm",
        "marginRightUnits": "cm",
        "omitBackground": false,
        "printGraphics": true,
        "x": 1130,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "79d434158734f0d2",
        "type": "function",
        "z": "3b30c3f369fbd9c7",
        "name": "Processedata",
        "func": "let buffer_img=global.get(\"LOGO_PETRO\");\nlet base64Image = buffer_img.toString('base64');\nlet datos=msg.payload[0];\n\nlet test=\"\";\n\nlet data= msg.payload={\n    ...msg.payload[0],\n    \"LOGO\" : base64Image\n}\n\n\nlet file_date=  \"2022-07-04T12 \"+ \".pdf\";\nmsg.topic=file_date;\n\n\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 120,
        "wires": [
            [
                "9fc9832d89df39e7",
                "d646588b6cea77ac"
            ]
        ]
    },
    {
        "id": "f3233b5bf01aaaaa",
        "type": "postgresql",
        "z": "3b30c3f369fbd9c7",
        "name": "",
        "query": "",
        "postgreSQLConfig": "a5843e127eb4f722",
        "split": false,
        "rowsPerMsg": 1,
        "outputs": 1,
        "x": 490,
        "y": 280,
        "wires": [
            [
                "79d434158734f0d2"
            ]
        ]
    },
    {
        "id": "fdef3c7280659944",
        "type": "function",
        "z": "3b30c3f369fbd9c7",
        "name": "GetBach",
        "func": "\n\nmsg.query=\"SELECT * FROM tbl_bache ORDER BY ID desc LIMIT 2;\"\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 280,
        "wires": [
            [
                "f3233b5bf01aaaaa"
            ]
        ]
    },
    {
        "id": "eac9e8a914c111af",
        "type": "inject",
        "z": "1cc0ca82ef3a0a9b",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 150,
        "y": 240,
        "wires": [
            [
                "85b1eb58388d9ced"
            ]
        ]
    },
    {
        "id": "d24d0b9dfbc072b6",
        "type": "switch",
        "z": "1cc0ca82ef3a0a9b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 430,
        "y": 240,
        "wires": [
            [
                "0b3c4b95d26301ac"
            ]
        ]
    },
    {
        "id": "85b1eb58388d9ced",
        "type": "rbe",
        "z": "1cc0ca82ef3a0a9b",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 270,
        "y": 240,
        "wires": [
            [
                "d24d0b9dfbc072b6"
            ]
        ]
    },
    {
        "id": "0b3c4b95d26301ac",
        "type": "function",
        "z": "1cc0ca82ef3a0a9b",
        "name": "Read TAGs",
        "func": "msg.topic = `SELECT * FROM tblTags`;\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 240,
        "wires": [
            [
                "4b6aa616953defb9"
            ]
        ]
    },
    {
        "id": "d98188d5e0098945",
        "type": "function",
        "z": "1cc0ca82ef3a0a9b",
        "name": "function 53",
        "func": "let tags=msg.payload;\n\n\nfor (let index = 0; index < tags.length; index++) {\n    const element = tags[index];\n    global.set(element.TagName,element);\n}\n\nmsg.payload = msg.payload[0]\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "850d2e0b0f5c9b99",
        "type": "debug",
        "z": "1cc0ca82ef3a0a9b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 260,
        "wires": []
    },
    {
        "id": "4b6aa616953defb9",
        "type": "sqlite",
        "z": "1cc0ca82ef3a0a9b",
        "mydb": "8a9376f64511d022",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "SQLITE",
        "x": 780,
        "y": 240,
        "wires": [
            [
                "d98188d5e0098945",
                "850d2e0b0f5c9b99"
            ]
        ]
    },
    {
        "id": "20c7e469f2a9eb90",
        "type": "influxdb out",
        "z": "8b7a3cc1bad4cf4b",
        "influxdb": "9d0d97191e966daa",
        "name": "",
        "measurement": "Raspador",
        "precision": "",
        "retentionPolicy": "",
        "database": "database",
        "precisionV18FluxV20": "ms",
        "retentionPolicyV18Flux": "",
        "org": "Petrosantander",
        "bucket": "terminal-galan",
        "x": 590,
        "y": 440,
        "wires": []
    },
    {
        "id": "d99278a352233beb",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "Influx db",
        "func": "let uit=global.get(\"UIT_2002\");\n\nmsg.payload=uit;\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 440,
        "wires": [
            [
                "20c7e469f2a9eb90"
            ]
        ]
    },
    {
        "id": "trigger_report",
        "type": "inject",
        "z": "8b7a3cc1bad4cf4b",
        "name": "1s",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 130,
        "y": 440,
        "wires": [
            [
                "2566421c9339834c",
                "e75f68bd4838d529",
                "d99278a352233beb",
                "434ea7c906cf7404",
                "f8763a498abd917b",
                "f45cb04b2af3dda6"
            ]
        ]
    },
    {
        "id": "bcca226443c09e0c",
        "type": "switch",
        "z": "8b7a3cc1bad4cf4b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 480,
        "wires": [
            [
                "468edd549bbcf9d6"
            ]
        ]
    },
    {
        "id": "468edd549bbcf9d6",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "function 3",
        "func": "// Obtener datos\nvar producto = flow.get(\"producto_seleccionado\") || \"butano\";\nvar tiket_number = global.get(\"TIKET_N\") || 0;\nvar estado_batch = global.get(\"ESTADO_BATCH\") || 0;\n\n// Verificar que el batch esté pausado\nif (estado_batch === 1) {\n    node.warn(\"⚠️ El batch debe estar PAUSADO antes de generar el tiquete\");\n    node.status({fill: \"red\", shape: \"ring\", text: \"Batch activo\"});\n    return null;\n}\n\n// Verificar que haya datos en el batch\nvar butano = global.get(\"BUTANO\") || {};\nvar propano = global.get(\"PROPANO\") || {};\n\nvar datos_producto = producto === \"butano\" ? butano : propano;\n\nif (!datos_producto.batch || datos_producto.batch === 0) {\n    node.warn(\"⚠️ No hay datos en el batch para generar tiquete\");\n    node.status({fill: \"yellow\", shape: \"ring\", text: \"Batch vacío\"});\n    return null;\n}\n\nvar pit_2001 = global.get(\"PIT_2001\") || {PV: 0};\nvar tit_2001 = global.get(\"TIT_2001\") || {PV: 0};\n\n// Calcular datos\nvar volumen_litros = datos_producto.batch || 0;\nvar densidad = datos_producto.densidad || 0;\nvar peso_kg = (volumen_litros * densidad / 1000).toFixed(2);\nvar volumen_m3 = (volumen_litros / 1000).toFixed(3);\n\n// Fecha\nvar fecha = new Date();\nvar year = fecha.getFullYear();\nvar mes = String(fecha.getMonth() + 1).padStart(2, '0');\nvar dia = String(fecha.getDate()).padStart(2, '0');\nvar horas = String(fecha.getHours()).padStart(2, '0');\nvar minutos = String(fecha.getMinutes()).padStart(2, '0');\nvar segundos = String(fecha.getSeconds()).padStart(2, '0');\nvar fecha_string = dia + \"-\" + mes + \"-\" + year + \" \" + horas + \":\" + minutos + \":\" + segundos;\nvar fecha_iso = fecha.toISOString();\n\n// Preparar objeto tiquete\nvar tiquete = {\n    numero: tiket_number,\n    fecha: fecha_string,\n    producto: producto.toUpperCase(),\n    operador: \"Sistema Automatizado\",\n    observaciones: \"Recepción automatizada - Sin observaciones\",\n    datos: {\n        volumen_litros: volumen_litros,\n        volumen_m3: volumen_m3,\n        densidad: densidad,\n        peso_kg: peso_kg,\n        temperatura: datos_producto.temperatura || tit_2001.PV || 0,\n        presion: datos_producto.presion || pit_2001.PV || 0,\n        flujo_promedio: datos_producto.flujo || 0\n    }\n};\n\n// Guardar en flow para otros nodos\nflow.set(\"ultimo_tiquete\", tiquete);\nflow.set(\"ultimo_tiquete_fecha_iso\", fecha_iso);\n\n// Preparar mensaje para SQLite\nmsg.topic = `\n    INSERT INTO tiquetes (\n        numero_tiquete, fecha_hora, producto,\n        volumen_litros, volumen_m3, densidad, peso_kg,\n        temperatura, presion, flujo_promedio,\n        operador, observaciones\n    ) VALUES (\n        ${tiket_number},\n        '${fecha_iso}',\n        '${producto.toUpperCase()}',\n        ${volumen_litros},\n        ${volumen_m3},\n        ${densidad},\n        ${peso_kg},\n        ${datos_producto.temperatura || tit_2001.PV || 0},\n        ${datos_producto.presion || pit_2001.PV || 0},\n        ${datos_producto.flujo || 0},\n        'Sistema Automatizado',\n        'Recepción automatizada'\n    )\n`;\n\nmsg.payload = tiquete;\n\nnode.status({fill: \"blue\", shape: \"dot\", text: `Preparando #${tiket_number}`});\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 480,
        "wires": [
            [
                "9e70c9c0ba72e9ce"
            ]
        ]
    },
    {
        "id": "2566421c9339834c",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "function 6",
        "func": "let is_report=global.get(\"IS_REPORT\");\nif(is_report==true)\n{\n    global.set(\"IS_REPORT\",false);\n    msg.payload=1;\n}else {\n    msg.payload=0;\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 480,
        "wires": [
            [
                "778a7d2da84638d1"
            ]
        ]
    },
    {
        "id": "9e70c9c0ba72e9ce",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "Preparar HTTP Request",
        "func": "// El tiquete viene del flow\nvar tiquete = flow.get(\"ultimo_tiquete\");\n\nif (!tiquete) {\n    node.error(\"No hay tiquete para generar PDF\");\n    return null;\n}\n\n// Preparar petición HTTP\nmsg.url = \"http://modbus-simulator:8080/generar_pdf\";\nmsg.method = \"POST\";\nmsg.headers = {\n    \"Content-Type\": \"application/json\"\n};\nmsg.payload = tiquete;\n\nnode.status({fill: \"blue\", shape: \"ring\", text: \"Generando PDF...\"});\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1130,
        "y": 480,
        "wires": [
            [
                "307d6c91173716f4"
            ]
        ]
    },
    {
        "id": "c1c9974097efedeb",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "Get Request",
        "func": "// msg.payload contiene la respuesta del servidor\nif (msg.payload && msg.payload.success) {\n    node.status({ fill: \"green\", shape: \"dot\", text: \"PDF generado\" });\n\n    var tiquete = flow.get(\"ultimo_tiquete\");\n    var tiket_number = tiquete.numero;\n\n    // Preparar mensaje para actualizar SQLite con la ruta del PDF\n    var msgUpdate = {\n        topic: `UPDATE tiquetes SET archivo_pdf = '${msg.payload.filepath}' WHERE numero_tiquete = ${tiket_number}`\n    };\n\n    // Mensaje para mostrar el tiquete en la UI\n    var msgDisplay = {\n        topic: \"tiquete_generado\",\n        payload: tiquete\n    };\n\n    // Mensaje de confirmación para debug\n    var msgDebug = {\n        payload: {\n            mensaje: `Tiquete #${tiket_number} generado exitosamente`,\n            pdf: msg.payload.filename,\n            ruta: msg.payload.filepath\n        }\n    };\n\n    return [msgUpdate, msgDisplay, msgDebug];\n} else {\n    var error = msg.payload && msg.payload.error ? msg.payload.error : \"Error desconocido\";\n    node.error(\"Error generando PDF: \" + error);\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Error PDF\" });\n\n    // Enviar mensaje de error para mostrar al usuario\n    var msgError = {\n        topic: \"error_tiquete\",\n        payload: {\n            error: true,\n            mensaje: \"Error generando PDF: \" + error\n        }\n    };\n\n    return [null, null, msgError];\n}",
        "outputs": 3,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1570,
        "y": 480,
        "wires": [
            [
                "c1579f6f9f8c6c93"
            ],
            [
                "49f3dd96ede29c5e"
            ],
            [
                "15901f4989eb6b5d"
            ]
        ]
    },
    {
        "id": "15901f4989eb6b5d",
        "type": "debug",
        "z": "8b7a3cc1bad4cf4b",
        "name": "debug 4",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1780,
        "y": 540,
        "wires": []
    },
    {
        "id": "307d6c91173716f4",
        "type": "http request",
        "z": "8b7a3cc1bad4cf4b",
        "name": "",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "http://localhost:8080/generar_pdf",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1370,
        "y": 480,
        "wires": [
            [
                "c1c9974097efedeb"
            ]
        ]
    },
    {
        "id": "c1579f6f9f8c6c93",
        "type": "sqlite",
        "z": "8b7a3cc1bad4cf4b",
        "mydb": "8a9376f64511d022",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "SQLITE",
        "x": 1780,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "49f3dd96ede29c5e",
        "type": "ui_template",
        "z": "8b7a3cc1bad4cf4b",
        "group": "f5490ef343d6cb98",
        "name": "",
        "order": 7,
        "width": 1,
        "height": 1,
        "format": "<style>\n    .tiquete-container {\n        display: none;\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.8);\n        z-index: 10000;\n        justify-content: center;\n        align-items: center;\n    }\n    \n    .tiquete-container.show {\n        display: flex;\n    }\n    \n    .tiquete-paper {\n        background: white;\n        width: 850px;\n        max-height: 90vh;\n        overflow-y: auto;\n        padding: 40px;\n        border-radius: 10px;\n        box-shadow: 0 10px 40px rgba(0,0,0,0.5);\n        font-family: Arial, sans-serif;\n    }\n    \n    .tiquete-header {\n        text-align: center;\n        border-bottom: 3px double #000;\n        padding-bottom: 20px;\n        margin-bottom: 20px;\n    }\n    \n    .tiquete-title {\n        font-size: 24px;\n        font-weight: bold;\n        margin-bottom: 10px;\n        color: #000;\n    }\n    \n    .tiquete-subtitle {\n        font-size: 14px;\n        color: #333;\n        font-weight: bold;\n    }\n    \n    .tiquete-info {\n        margin: 20px 0;\n    }\n    \n    .info-row {\n        display: flex;\n        justify-content: space-between;\n        padding: 10px 0;\n        border-bottom: 1px dotted #999;\n    }\n    \n    .info-label {\n        font-weight: bold;\n        width: 40%;\n        color: #333;\n        font-size: 14px;\n    }\n    \n    .info-value {\n        width: 60%;\n        text-align: right;\n        color: #000;\n        font-size: 14px;\n        font-weight: 600;\n    }\n    \n    .tiquete-data {\n        margin: 30px 0;\n        background: #e8f4f8;\n        padding: 20px;\n        border-radius: 5px;\n        border: 2px solid #3498db;\n    }\n    \n    .data-title {\n        font-size: 18px;\n        font-weight: bold;\n        margin-bottom: 15px;\n        color: #2c3e50;\n        text-align: center;\n        background: #3498db;\n        color: white;\n        padding: 10px;\n        border-radius: 4px;\n        margin: -20px -20px 15px -20px;\n    }\n    \n    .data-row {\n        display: flex;\n        justify-content: space-between;\n        padding: 8px 0;\n        border-bottom: 1px dotted #aaa;\n    }\n    \n    .data-label {\n        font-weight: bold;\n        color: #2c3e50;\n        font-size: 13px;\n    }\n    \n    .data-value {\n        color: #000;\n        font-weight: bold;\n        font-size: 13px;\n    }\n    \n    .tiquete-footer {\n        margin-top: 40px;\n        padding-top: 20px;\n        border-top: 2px solid #000;\n    }\n    \n    .observaciones-label {\n        font-weight: bold;\n        margin-bottom: 10px;\n        color: #000;\n        font-size: 14px;\n    }\n    \n    .observaciones-box {\n        min-height: 60px;\n        border: 2px solid #666;\n        padding: 10px;\n        margin-top: 5px;\n        border-radius: 4px;\n        background: #f9f9f9;\n        color: #333;\n        font-size: 13px;\n    }\n    \n    .firma-section {\n        display: flex;\n        justify-content: space-around;\n        margin-top: 60px;\n    }\n    \n    .firma-box {\n        text-align: center;\n        width: 40%;\n    }\n    \n    .firma-line {\n        border-top: 2px solid #000;\n        margin: 50px 0 10px 0;\n    }\n    \n    .firma-label {\n        font-size: 12px;\n        color: #000;\n        font-weight: bold;\n    }\n    \n    .btn-actions {\n        display: flex;\n        gap: 15px;\n        margin-top: 30px;\n        justify-content: center;\n    }\n    \n    .btn-print {\n        padding: 14px 40px;\n        background: #27ae60;\n        color: white;\n        border: none;\n        border-radius: 6px;\n        font-size: 16px;\n        font-weight: bold;\n        cursor: pointer;\n        box-shadow: 0 4px 6px rgba(0,0,0,0.2);\n        transition: all 0.2s;\n    }\n    \n    .btn-print:hover {\n        background: #229954;\n        transform: translateY(-2px);\n        box-shadow: 0 6px 8px rgba(0,0,0,0.3);\n    }\n    \n    .btn-close {\n        padding: 14px 40px;\n        background: #e74c3c;\n        color: white;\n        border: none;\n        border-radius: 6px;\n        font-size: 16px;\n        font-weight: bold;\n        cursor: pointer;\n        box-shadow: 0 4px 6px rgba(0,0,0,0.2);\n        transition: all 0.2s;\n    }\n    \n    .btn-close:hover {\n        background: #c0392b;\n        transform: translateY(-2px);\n        box-shadow: 0 6px 8px rgba(0,0,0,0.3);\n    }\n    \n    @media print {\n        .btn-actions {\n            display: none;\n        }\n        .tiquete-container {\n            background: white;\n            display: block !important;\n        }\n        .tiquete-paper {\n            box-shadow: none;\n            max-height: none;\n            width: 100%;\n        }\n    }\n</style>\n\n<div id=\"tiquete-container\" class=\"tiquete-container\">\n    <div class=\"tiquete-paper\">\n        <div class=\"tiquete-header\">\n            <div class=\"tiquete-title\">TIQUETE DE RECEPCIÓN DE GLP</div>\n        </div>\n        \n        <div class=\"tiquete-info\">\n            <div class=\"info-row\">\n                <span class=\"info-label\">Tiquete No.:</span>\n                <span class=\"info-value\" id=\"tiq-numero\">-</span>\n            </div>\n            <div class=\"info-row\">\n                <span class=\"info-label\">Fecha y Hora:</span>\n                <span class=\"info-value\" id=\"tiq-fecha\">-</span>\n            </div>\n            <div class=\"info-row\">\n                <span class=\"info-label\">Producto:</span>\n                <span class=\"info-value\" id=\"tiq-producto\">-</span>\n            </div>\n            <div class=\"info-row\">\n                <span class=\"info-label\">Operador:</span>\n                <span class=\"info-value\" id=\"tiq-operador\">Sistema Automatizado</span>\n            </div>\n        </div>\n        \n        <div class=\"tiquete-data\">\n            <div class=\"data-title\">DATOS DE RECEPCIÓN</div>\n            \n            <div class=\"data-row\">\n                <span class=\"data-label\">Volumen (Litros):</span>\n                <span class=\"data-value\" id=\"tiq-vol-litros\">-</span>\n            </div>\n            <div class=\"data-row\">\n                <span class=\"data-label\">Volumen (m³):</span>\n                <span class=\"data-value\" id=\"tiq-vol-m3\">-</span>\n            </div>\n            <div class=\"data-row\">\n                <span class=\"data-label\">Densidad (kg/m³):</span>\n                <span class=\"data-value\" id=\"tiq-densidad\">-</span>\n            </div>\n            <div class=\"data-row\">\n                <span class=\"data-label\">Peso Neto (kg):</span>\n                <span class=\"data-value\" id=\"tiq-peso\">-</span>\n            </div>\n            <div class=\"data-row\">\n                <span class=\"data-label\">Temperatura (°F):</span>\n                <span class=\"data-value\" id=\"tiq-temperatura\">-</span>\n            </div>\n            <div class=\"data-row\">\n                <span class=\"data-label\">Presión (PSI):</span>\n                <span class=\"data-value\" id=\"tiq-presion\">-</span>\n            </div>\n            <div class=\"data-row\" style=\"border-bottom: none;\">\n                <span class=\"data-label\">Flujo Promedio (m³/h):</span>\n                <span class=\"data-value\" id=\"tiq-flujo\">-</span>\n            </div>\n        </div>\n        \n        <div class=\"tiquete-footer\">\n            <div class=\"observaciones-label\">Observaciones:</div>\n            <div id=\"tiq-observaciones\" class=\"observaciones-box\">\n                Recepción automatizada - Sin observaciones\n            </div>\n            \n            <div class=\"firma-section\">\n                <div class=\"firma-box\">\n                    <div class=\"firma-line\"></div>\n                    <div class=\"firma-label\">Entregado por</div>\n                </div>\n                <div class=\"firma-box\">\n                    <div class=\"firma-line\"></div>\n                    <div class=\"firma-label\">Recibido por</div>\n                </div>\n            </div>\n        </div>\n        \n        <div class=\"btn-actions\">\n            <button class=\"btn-print\" onclick=\"imprimirTiquete()\">\n                🖨️ Imprimir\n            </button>\n            <button class=\"btn-close\" onclick=\"cerrarTiquete()\">\n                ✖️ Cerrar\n            </button>\n        </div>\n    </div>\n</div>\n\n\n<script>\n(function(scope) {\n    \n    // Escuchar mensajes de Node-RED\n    scope.$watch('msg', function(msg) {\n        if (msg) {\n            if (msg.topic === 'tiquete_generado') {\n                mostrarTiquete(msg.payload);\n            } else if (msg.topic === 'error_tiquete') {\n                mostrarError(msg.payload.mensaje);\n            }\n        }\n    });\n    \n    window.mostrarTiquete = function(tiquete) {\n        console.log('Mostrando tiquete:', tiquete);\n        \n        // Rellenar datos\n        document.getElementById('tiq-numero').textContent = tiquete.numero;\n        document.getElementById('tiq-fecha').textContent = tiquete.fecha;\n        document.getElementById('tiq-producto').textContent = tiquete.producto;\n        document.getElementById('tiq-vol-litros').textContent = Number(tiquete.datos.volumen_litros).toLocaleString('es-CO') + ' L';\n        document.getElementById('tiq-vol-m3').textContent = tiquete.datos.volumen_m3 + ' m³';\n        document.getElementById('tiq-densidad').textContent = Number(tiquete.datos.densidad).toFixed(2) + ' kg/m³';\n        document.getElementById('tiq-peso').textContent = tiquete.datos.peso_kg + ' kg';\n        document.getElementById('tiq-temperatura').textContent = Number(tiquete.datos.temperatura).toFixed(1) + ' °F';\n        document.getElementById('tiq-presion').textContent = Number(tiquete.datos.presion).toFixed(1) + ' PSI';\n        document.getElementById('tiq-flujo').textContent = Number(tiquete.datos.flujo_promedio).toFixed(1) + ' m³/h';\n        \n        if (tiquete.observaciones) {\n            document.getElementById('tiq-observaciones').textContent = tiquete.observaciones;\n        }\n        \n        // Mostrar el tiquete\n        document.getElementById('tiquete-container').classList.add('show');\n    };\n    \n    window.mostrarError = function(mensaje) {\n        var errorContainer = document.getElementById('error-container');\n        var errorMessage = document.getElementById('error-message');\n        \n        errorMessage.textContent = mensaje;\n        errorContainer.style.display = 'block';\n        \n        // Ocultar después de 5 segundos\n        setTimeout(function() {\n            errorContainer.style.display = 'none';\n        }, 5000);\n    };\n    \n    window.imprimirTiquete = function() {\n        window.print();\n    };\n    \n    window.cerrarTiquete = function() {\n        document.getElementById('tiquete-container').classList.remove('show');\n    };\n    \n    // Función global para abrir desde SVG o botón\n    window.generarTiquete = function() {\n        console.log('Solicitando generación de tiquete...');\n        scope.send({\n            payload: true,\n            topic: 'generar_tiquete'\n        });\n    };\n    \n    // Cerrar con ESC\n    document.addEventListener('keydown', function(event) {\n        if (event.key === 'Escape') {\n            cerrarTiquete();\n        }\n    });\n    \n})(scope);\n</script>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1780,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "4eafc0aef0b22ada",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "function 1",
        "func": "msg.topic=\"SELECT * FROM tblTags\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 520,
        "wires": [
            [
                "c91217fb4c9a6fba"
            ]
        ]
    },
    {
        "id": "c91217fb4c9a6fba",
        "type": "sqlite",
        "z": "8b7a3cc1bad4cf4b",
        "mydb": "467989ca35bb4f62",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "",
        "x": 950,
        "y": 520,
        "wires": [
            [
                "a779414a34e016b8"
            ]
        ]
    },
    {
        "id": "13a38f9de199c4f0",
        "type": "debug",
        "z": "8b7a3cc1bad4cf4b",
        "name": "debug 6",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 1040,
        "wires": []
    },
    {
        "id": "a779414a34e016b8",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "function 10",
        "func": "let tags=msg.payload;\n\ntags.forEach(function(tag) {\n    global.set(tag.TagName,tag);\n});\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1190,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "6692bf8ad08488bf",
        "type": "switch",
        "z": "8b7a3cc1bad4cf4b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 520,
        "wires": [
            [
                "4eafc0aef0b22ada"
            ]
        ]
    },
    {
        "id": "778a7d2da84638d1",
        "type": "rbe",
        "z": "8b7a3cc1bad4cf4b",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 530,
        "y": 480,
        "wires": [
            [
                "bcca226443c09e0c"
            ]
        ]
    },
    {
        "id": "e75f68bd4838d529",
        "type": "rbe",
        "z": "8b7a3cc1bad4cf4b",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 350,
        "y": 520,
        "wires": [
            [
                "6692bf8ad08488bf"
            ]
        ]
    },
    {
        "id": "validation_input",
        "type": "inject",
        "z": "8b7a3cc1bad4cf4b",
        "name": "Entrada Raspador",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "10",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "Raspador",
        "payload": "TOTAL_AHORA",
        "payloadType": "global",
        "x": 170,
        "y": 620,
        "wires": [
            [
                "e58a8a843ee03d6b"
            ]
        ]
    },
    {
        "id": "e42960e3fa1f098c",
        "type": "sqlite",
        "z": "8b7a3cc1bad4cf4b",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "prepared",
        "sql": "INSERT INTO llenado_detalle (llenado_id, timestamp, flujo, densidad, presion, temperatura, volumen_acumulado)\nVALUES(?,?,?,?,?,?,?)",
        "name": "llenado_detalle",
        "x": 740,
        "y": 620,
        "wires": [
            [
                "44a90acc855ccbfa"
            ]
        ]
    },
    {
        "id": "38060467ea7ea0b4",
        "type": "switch",
        "z": "8b7a3cc1bad4cf4b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 620,
        "wires": [
            [
                "e42960e3fa1f098c"
            ]
        ]
    },
    {
        "id": "e58a8a843ee03d6b",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "Registrar Medición",
        "func": "\n// Usamos .toISOString() para generar un formato de fecha/hora estándar y robusto para SQLite\nvar timestamp = new Date().toLocaleString().replaceAll('/',' '); \ntimestamp=timestamp.replace(',' ,' ');\nlet noSisterna=global.get(\"NoSISTERNA\") || 1;\nlet status_cisterna1= global.get(\"STATUS_CISTERNA1\")\n\n\n//INSERT INTO llenado_detalle (llenado_id, timestamp, flujo, densidad, presion, temperatura, volumen_acumulado)\n//VALUES (32, datetime('now'), 831.3, 539.8, 346.4, 84.9, 1200);\n\n\n\n//let status_batch=global.get(\"STATUS_BATCH\");\nlet segment =global.get(\"SEGMENT_VALUES1\");\nlet id_llenado=global.get(\"ID_LLENADO\");\n\n// msg.payload = {\n//   sisterna_id: 1,\n//   segmento_id: 1,\n//   temperatura: 35.5,\n//   presion: 650,\n//   densidad: 0.585,\n//   flujo_actual: 150\n// }\n\nif(status_cisterna1===2)\n{\n     msg.params =  [\n          //segment.sisterna_id,\n          id_llenado,\n          timestamp,\n          segment.flujo_actual,\n          segment.densidad,\n          segment.presion,\n          segment.temperatura,  \n          segment.volumen_acumulado         \n          \n     ]\n     msg.payload=\"OK\"\n\n}\nelse\n{\n     msg.payload=null;\n}\n\nreturn msg;\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 620,
        "wires": [
            [
                "38060467ea7ea0b4"
            ]
        ]
    },
    {
        "id": "0fcfea600836f584",
        "type": "inject",
        "z": "8b7a3cc1bad4cf4b",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 760,
        "wires": [
            [
                "ede02fb62bf4c867",
                "7c55a239e7258304"
            ]
        ]
    },
    {
        "id": "c2cfd41f4a4b5dc3",
        "type": "sqlite",
        "z": "8b7a3cc1bad4cf4b",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "",
        "x": 600,
        "y": 760,
        "wires": [
            [
                "79fa8099cfc1dba1"
            ]
        ]
    },
    {
        "id": "ede02fb62bf4c867",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "function 9",
        "func": "msg.topic=\"SELECT id FROM productos WHERE nombre = $p\";\nmsg.payload=['BUTANO'];\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 740,
        "wires": [
            [
                "c2cfd41f4a4b5dc3"
            ]
        ]
    },
    {
        "id": "7c55a239e7258304",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "GetIDCisterna",
        "func": "msg.topic=\"SELECT id FROM cisternas WHERE placa = $p\";\nmsg.payload=['EJD315'];\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 780,
        "wires": [
            [
                "c2cfd41f4a4b5dc3"
            ]
        ]
    },
    {
        "id": "79fa8099cfc1dba1",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "function 7",
        "func": "let str_query=\"\";\nlet id_cisterna,id_producto\nstr_query=msg.topic.split(' ');\nif(str_query[3]===\"cisternas\")\n{\n    id_cisterna=msg.payload[0].id;\n    global.set(\"ID_CISTERNA\",id_cisterna);\n}\nelse if(str_query[3]===\"productos\")\n{\n    id_producto=msg.payload[0].id;\n     global.set(\"ID_PRODUCTO\",id_producto);\n}\n\nmsg.payload=[global.get(\"ID_CISTERNA\"),id_producto]\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "356e45bc11e31765",
        "type": "ui_table",
        "z": "8b7a3cc1bad4cf4b",
        "group": "e7ec3fb323673703",
        "name": "",
        "order": 1,
        "width": 11,
        "height": 6,
        "columns": [],
        "outputs": 0,
        "cts": false,
        "x": 910,
        "y": 880,
        "wires": []
    },
    {
        "id": "b745874efeaeb58a",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "Cisternas",
        "func": "msg.topic=\"SELECT * FROM cisternas\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 880,
        "wires": [
            [
                "d316aaf59feb6988"
            ]
        ]
    },
    {
        "id": "d316aaf59feb6988",
        "type": "sqlite",
        "z": "8b7a3cc1bad4cf4b",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "",
        "x": 680,
        "y": 880,
        "wires": [
            [
                "356e45bc11e31765"
            ]
        ]
    },
    {
        "id": "195cac7e330d4fad",
        "type": "ui_table",
        "z": "8b7a3cc1bad4cf4b",
        "group": "36e5b53a327c3f7d",
        "name": "",
        "order": 1,
        "width": 13,
        "height": 6,
        "columns": [],
        "outputs": 0,
        "cts": false,
        "x": 910,
        "y": 920,
        "wires": []
    },
    {
        "id": "9812a3bf0c345069",
        "type": "ui_button",
        "z": "8b7a3cc1bad4cf4b",
        "name": "",
        "group": "36e5b53a327c3f7d",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Actualizar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 240,
        "y": 920,
        "wires": [
            [
                "be5c34879bbf049e"
            ]
        ]
    },
    {
        "id": "be5c34879bbf049e",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "Baches",
        "func": "msg.topic =\"SELECT * FROM baches ORDER BY id DESC LIMIT 10;\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 920,
        "wires": [
            [
                "b402f18569129abb"
            ]
        ]
    },
    {
        "id": "b402f18569129abb",
        "type": "sqlite",
        "z": "8b7a3cc1bad4cf4b",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "",
        "x": 680,
        "y": 920,
        "wires": [
            [
                "195cac7e330d4fad"
            ]
        ]
    },
    {
        "id": "fd2b779a6fff92dd",
        "type": "ui_table",
        "z": "8b7a3cc1bad4cf4b",
        "group": "a08ba4a07153cf8c",
        "name": "",
        "order": 1,
        "width": 13,
        "height": 6,
        "columns": [],
        "outputs": 0,
        "cts": false,
        "x": 910,
        "y": 960,
        "wires": []
    },
    {
        "id": "fc3e52557ecb1b6a",
        "type": "ui_button",
        "z": "8b7a3cc1bad4cf4b",
        "name": "",
        "group": "a08ba4a07153cf8c",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Actualizar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 240,
        "y": 960,
        "wires": [
            [
                "f0b8f38cc14b815d"
            ]
        ]
    },
    {
        "id": "f0b8f38cc14b815d",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "Llenados",
        "func": "msg.topic =\"SELECT fecha_inicio AS Inicio, fecha_fin AS Fin, volumen_objetivo AS Vol_Max, volumen_actual AS Vol_Acutal\" +\n            \" FROM llenados ORDER BY id DESC LIMIT 10;\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 960,
        "wires": [
            [
                "53bc400abe6c20b5"
            ]
        ]
    },
    {
        "id": "53bc400abe6c20b5",
        "type": "sqlite",
        "z": "8b7a3cc1bad4cf4b",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "",
        "x": 680,
        "y": 960,
        "wires": [
            [
                "fd2b779a6fff92dd"
            ]
        ]
    },
    {
        "id": "6b557b5fbc8a1107",
        "type": "ui_table",
        "z": "8b7a3cc1bad4cf4b",
        "group": "0804165414578afd",
        "name": "",
        "order": 1,
        "width": 16,
        "height": 6,
        "columns": [],
        "outputs": 0,
        "cts": false,
        "x": 910,
        "y": 1000,
        "wires": []
    },
    {
        "id": "10742b0f1bd5383c",
        "type": "ui_button",
        "z": "8b7a3cc1bad4cf4b",
        "name": "",
        "group": "0804165414578afd",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Actualizar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 240,
        "y": 1000,
        "wires": [
            [
                "b72c810608895db4"
            ]
        ]
    },
    {
        "id": "b72c810608895db4",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "General",
        "func": "// SELECT albumes.titulo, artistas.nombre\n// FROM albumes\n// INNER JOIN artistas ON albumes.artista_id = artistas.artista_id;\n\nmsg.topic = \"SELECT \" +\n    \"L.id AS LlenadoID,\" +\n    \"C.placa AS PlacaCisterna,\"+\n    \"P.nombre AS NombreProducto, \" +\n    \"L.fecha_inicio, \"+\n    \"L.volumen_actual, \"+\n    \"L.estado \"+\n    \"FROM \"+\n    \"llenados L \"+\n    \"INNER JOIN \"+\n    \"cisternas C ON  L.cisterna_id = C.id \"+\n    \"INNER JOIN \"+\n    \"productos P ON L.producto_id = P.id \"+\n    \"WHERE \"+\n    \"L.estado = 'EN_PROCESO' \"+\n    \"ORDER BY \"+\n    \"L.fecha_inicio DESC; \"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 1000,
        "wires": [
            [
                "63a98047626a3fef"
            ]
        ]
    },
    {
        "id": "63a98047626a3fef",
        "type": "sqlite",
        "z": "8b7a3cc1bad4cf4b",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "",
        "x": 680,
        "y": 1000,
        "wires": [
            [
                "6b557b5fbc8a1107",
                "13a38f9de199c4f0"
            ]
        ]
    },
    {
        "id": "434ea7c906cf7404",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "function 20",
        "func": "let uit_2003=global.get(\"UIT_2003\");\nmsg.payload={\n    FLUJO : uit_2003.FLOW,\n    DENSIDAD : uit_2003.DENSITY\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 400,
        "wires": [
            [
                "d94871a4d817d888"
            ]
        ]
    },
    {
        "id": "d94871a4d817d888",
        "type": "influxdb out",
        "z": "8b7a3cc1bad4cf4b",
        "influxdb": "9d0d97191e966daa",
        "name": "",
        "measurement": "UIT_2003",
        "precision": "",
        "retentionPolicy": "",
        "database": "database",
        "precisionV18FluxV20": "ms",
        "retentionPolicyV18Flux": "",
        "org": "Petrosantander",
        "bucket": "terminal-galan",
        "x": 590,
        "y": 400,
        "wires": []
    },
    {
        "id": "f8763a498abd917b",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "function 21",
        "func": "let uit_2001=global.get(\"UIT_2001\");\nmsg.payload={\n    FLUJO : uit_2001.FLOW,\n    DENSIDAD : uit_2001.DENSITY\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 360,
        "wires": [
            [
                "3e61928ca1a0ca00"
            ]
        ]
    },
    {
        "id": "3e61928ca1a0ca00",
        "type": "influxdb out",
        "z": "8b7a3cc1bad4cf4b",
        "influxdb": "9d0d97191e966daa",
        "name": "",
        "measurement": "UIT_2001",
        "precision": "",
        "retentionPolicy": "",
        "database": "database",
        "precisionV18FluxV20": "ms",
        "retentionPolicyV18Flux": "",
        "org": "Petrosantander",
        "bucket": "terminal-galan",
        "x": 590,
        "y": 360,
        "wires": []
    },
    {
        "id": "f45cb04b2af3dda6",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "function 22",
        "func": "let pit_2001 = global.get(\"PIT_2001\");\nlet tit_2001 = global.get(\"TIT_2001\");\nlet dit_2001 = global.get(\"DIT_2001\");\n\nmsg.payload = {\n    DIT_2001: dit_2001.PV,\n    PIT_2001: pit_2001.PV,\n    TIT_2001: tit_2001.PV\n\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 320,
        "wires": [
            [
                "58ed4155b980d82f"
            ]
        ]
    },
    {
        "id": "58ed4155b980d82f",
        "type": "influxdb out",
        "z": "8b7a3cc1bad4cf4b",
        "influxdb": "9d0d97191e966daa",
        "name": "",
        "measurement": "ISTRUMENTOS",
        "precision": "",
        "retentionPolicy": "",
        "database": "database",
        "precisionV18FluxV20": "ms",
        "retentionPolicyV18Flux": "",
        "org": "Petrosantander",
        "bucket": "terminal-galan",
        "x": 610,
        "y": 320,
        "wires": []
    },
    {
        "id": "5b48c6a4d54c7a4c",
        "type": "ui_button",
        "z": "8b7a3cc1bad4cf4b",
        "name": "",
        "group": "e7ec3fb323673703",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Actualizar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 240,
        "y": 880,
        "wires": [
            [
                "b745874efeaeb58a"
            ]
        ]
    },
    {
        "id": "44a90acc855ccbfa",
        "type": "link out",
        "z": "8b7a3cc1bad4cf4b",
        "name": "A Promediar",
        "mode": "link",
        "links": [
            "1226e2b560cba536"
        ],
        "x": 885,
        "y": 620,
        "wires": []
    },
    {
        "id": "1226e2b560cba536",
        "type": "link in",
        "z": "8b7a3cc1bad4cf4b",
        "name": "link in 1",
        "links": [
            "44a90acc855ccbfa"
        ],
        "x": 225,
        "y": 660,
        "wires": [
            [
                "83e1f2dc3369fe66"
            ]
        ]
    },
    {
        "id": "83e1f2dc3369fe66",
        "type": "function",
        "z": "8b7a3cc1bad4cf4b",
        "name": "Udate AVG",
        "func": "const llenado_id = global.get(\"ID_LLENADO\");\nlet date_string=new Date().toLocaleString('en-US',{hour12: false}).replaceAll('/','-');\ndate_string=date_string.replace(',',' ');\n\nmsg.topic = `\n    INSERT OR REPLACE INTO llenado_promedios \n    (llenado_id, flujo_promedio, densidad_promedio, presion_promedio, temperatura_promedio , volumen_total)\n    SELECT \n        llenado_id,\n        AVG(flujo),\n        AVG(densidad),\n        AVG(presion),\n        AVG(temperatura),\n        MAX(volumen_acumulado)        \n    FROM llenado_detalle\n    WHERE llenado_id = ${llenado_id};\n`;\n\n//msg.params = [llenado_id];\n    \n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 660,
        "wires": [
            [
                "fef95aea31221e8e"
            ]
        ]
    },
    {
        "id": "fef95aea31221e8e",
        "type": "sqlite",
        "z": "8b7a3cc1bad4cf4b",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "",
        "x": 620,
        "y": 660,
        "wires": [
            [
                "e8a6d821a6b887d2"
            ]
        ]
    },
    {
        "id": "e8a6d821a6b887d2",
        "type": "debug",
        "z": "8b7a3cc1bad4cf4b",
        "name": "debug 12",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 660,
        "wires": []
    },
    {
        "id": "d6e1c0a82dd7fc05",
        "type": "inject",
        "z": "619addbf2da107aa",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 460,
        "wires": [
            [
                "e4262efbb96ecdbd"
            ]
        ]
    },
    {
        "id": "e4262efbb96ecdbd",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "Update Display",
        "func": "let pit_1001 = global.get(\"PIT_2001\");\nlet tit_1001 = global.get(\"TIT_2001\");\nlet dit_1001 = global.get(\"DIT_2001\");\nlet uit_2001 = global.get(\"UIT_2001\");\nlet uit_2003 = global.get(\"UIT_2003\");\nlet status_cisterna1= global.get(\"STATUS_CISTERNA1\")\nlet status_cisterna2= global.get(\"STATUS_CISTERNA2\")\nlet cisterna1=global.get(\"CISTERNA1\");\nlet cisterna2=global.get(\"CISTERNA2\");\nlet uit_2001_dit=global.get(\"UIT_2001_DENSITY\");\nlet segment_display=global.get(\"SEGMENT_DISPLAY\");\nlet actual_cisterna=global.get(\"ACTUAL_CISTERNA\");\nlet tiket_number = global.get(\"TIKET_N\") || 0;\nlet segment1=global.get(\"SEGMENT_VALUES1\");\nlet segment2=global.get(\"SEGMENT_VALUES2\");\nlet fill_segment1=global.get(\"FILL_SEGMENT1\");\nlet fill_segment2=global.get(\"FILL_SEGMENT2\");\n\n\n\nlet date_string = new Date().toLocaleString('en-US',{hour12: false}).replaceAll('/','-');\ndate_string=date_string.replace(',',' ');\nsegment_display.FECHA=date_string;\n\n// Seleccionar los datos según el producto\nlet str_status_sisterna1=\"\";\nlet cisterna2_visible=1;\n\nswitch (status_cisterna1) {\n    case 0:\n        str_status_sisterna1=\"Vacia\"\n        cisterna2_visible=1;\n        break;\n    case 1:\n        str_status_sisterna1 = \"Lista\"\n        cisterna2_visible=0;\n        break;\n\n    case 2:\n        str_status_sisterna1 = \"LLenando...\"\n        cisterna2_visible=0;\n        break;\n\n    case 3:\n        str_status_sisterna1 = \"Pausada\"\n        cisterna2_visible=1;\n        break;  \n\n    case 4:\n        str_status_sisterna1 = \"Cerrada\"\n        cisterna2_visible=1;\n        break;      \n\n    default:\n        \n}\n\n\nswitch (status_cisterna1) {\n    case 0:\n        str_status_sisterna1=\"Vacia\"\n        cisterna2_visible=1;\n        break;\n    case 1:\n        str_status_sisterna1 = \"Lista\"\n        cisterna2_visible=0;\n        break;\n    case 2:\n        str_status_sisterna1 = \"LLenando...\"\n        cisterna2_visible=0;\n        break;    \n    case 3:\n        str_status_sisterna1 = \"Pausada\"\n        cisterna2_visible=1;\n        break;  \n\n    case 4:\n        str_status_sisterna1 = \"Cerrada\"\n        cisterna2_visible=1;\n        break;      \n\n    default:\n        \n}\n\n// let datos_producto = {};\n\n// if (producto_seleccionado === \"butano\") {\n//     datos_producto = butano;\n// } else if (producto_seleccionado === \"propano\") {\n//     datos_producto = propano;\n// } else if (producto_seleccionado === \"ambos\") {\n//     // Puedes decidir mostrar butano, propano o ambos\n//     datos_producto = butano; // o propano, según prefieras\n// }\n\nmsg.topic = \"databind\";\nmsg.payload = {\n    \"PIT_2001_PV\": pit_1001.PV.toFixed(1) + \" PSI\",\n    \"PIT_2001_ALARM\": pit_1001.ALARM,\n\n    \"TIT_2001_PV\": tit_1001.PV.toFixed(1) + \" °F\",\n    \"TIT_2001_ALARM\": tit_1001.ALARM,\n\n    \"DATE_STRING\": date_string ,\n    \"TIKET_N\": tiket_number,\n    //\"PRODUCTO\": producto_seleccionado.toUpperCase(),\n\n    \"UIT_2001_FLOW\": uit_2001.FLOW,\n    \"UIT_2001_DENS\": uit_2001.DENSITY,\n    \"UIT_2001_TBATCH\": uit_2001.TOTAL,\n    \"STR_STATUS_CISTERNA1\": str_status_sisterna1,\n   \n    \"DIT_2001_PV\"  : dit_1001.PV,\n    \"DIT_2001_ALARM\" : dit_1001.ALARM,\n    \"CLIENTE1\" : fill_segment1.cliente,    \n    \"PRODUCTO1\": fill_segment1.producto, \n    \"FECHA1\": fill_segment1.fecha, \n    \"TIQUETE_No1\": fill_segment1.tiquete, \n    \"RVP1\": fill_segment1.rvp, \n    \"MASA1\": segment_display.MASA_CORIOLIS, \n    \"VOL_INDICADO1\": segment_display.VOL_INDICADO,\n    \"VAPORES1\": segment_display.MASA_VAPORES,\n    \"VOL_FULL1\": fill_segment1.Vol_full,\n    \"VOL_CURRENT1\" : segment1.volumen_acumulado,\n    \"PRESSURE1\" : segment1.presion,\n    \"TEMPERATURE1\" : segment1.temperatura,\n\n    \"CLIENTE2\" : fill_segment2.cliente,   \n    \"PRODUCTO2\": fill_segment2.producto, \n    \"FECHA2\": fill_segment2.fecha, \n    \"TIQUETE_No2\": fill_segment2.tiquete, \n    \"RVP2\": fill_segment2.rvp, \n    \"MASA2\": segment_display.MASA_CORIOLIS, \n    \"VOL_INDICADO2\": segment_display.VOL_INDICADO,\n    \"VAPORES2\": segment_display.MASA_VAPORES,\n    \"VOL_FULL2\": fill_segment2.Vol_full,\n    \"VOL_CURRENT2\" : segment1.volumen_acumulado,\n    \"PRESSURE2\" : segment2.presion,\n    \"TEMPERATURE2\" : segment2.temperatura,\n\n    \"UIT_2003_FLOW\": uit_2003.FLOW,\n    \"UIT_2003_DENSITY\": uit_2003.DENSITY,\n    \"UIT_2003_TOTAL\" : uit_2003.TOTAL,\n    \"CISTERNA2_VISIBLE\" : cisterna2_visible,\n    \"ID_CISTERNA1\" : cisterna1.numero_sisterna,\n    \"ID_CISTERNA2\" : cisterna2.numero_sisterna,\n    \"UIT_2001_DENSITY_COLOR\": uit_2001_dit.ALARM,\n    \"INLINE_PRODUCT\" : global.get(\"INLINE_PRODUCT\")\n\n};\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 460,
        "wires": [
            [
                "ef7e2ca45160d518",
                "833023ecbab1c9c0"
            ]
        ]
    },
    {
        "id": "833023ecbab1c9c0",
        "type": "debug",
        "z": "619addbf2da107aa",
        "name": "debug 9",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 540,
        "wires": []
    },
    {
        "id": "dc1c3ff01ad27c44",
        "type": "ui_button",
        "z": "619addbf2da107aa",
        "name": "",
        "group": "f5490ef343d6cb98",
        "order": 10,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Cerrar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"tab\":\"Main\"}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 170,
        "y": 640,
        "wires": [
            [
                "e51b3e5685e51b2e"
            ]
        ]
    },
    {
        "id": "e51b3e5685e51b2e",
        "type": "ui_ui_control",
        "z": "619addbf2da107aa",
        "name": "",
        "events": "all",
        "x": 340,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "53c8730fc2506e88",
        "type": "ui_button",
        "z": "619addbf2da107aa",
        "name": "",
        "group": "f5490ef343d6cb98",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Raspador",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"tab\":\"reciveCleaner\"}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 160,
        "y": 680,
        "wires": [
            [
                "e51b3e5685e51b2e"
            ]
        ]
    },
    {
        "id": "06c073855efc00ad",
        "type": "ui_button",
        "z": "619addbf2da107aa",
        "name": "",
        "group": "f5490ef343d6cb98",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Alarmas",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"tab\":\"Alarmas\"}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 160,
        "y": 720,
        "wires": [
            [
                "e51b3e5685e51b2e"
            ]
        ]
    },
    {
        "id": "89cf21ba1acbaf97",
        "type": "switch",
        "z": "619addbf2da107aa",
        "name": "SelectEvent",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "TIKET_N",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_LLENAR1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_PAUSAR1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_CERRAR1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_LLENAR2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_PAUSAR2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_CERRAR2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "GenerarTiquete",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_CISTERNA1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_CISTERNA2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_PIT_2001",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_TIT_2001",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_UIT_2001_DENSITY",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_FIT_2001",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_CREATE_CISTERNA1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PB_CREATE_CISTERNA2",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 16,
        "x": 790,
        "y": 460,
        "wires": [
            [
                "72db325840e00c4d"
            ],
            [
                "668e96e992844b25"
            ],
            [
                "3d2e13eab5990489"
            ],
            [
                "1779d316384bdd4c"
            ],
            [
                "f354c163160c51e9"
            ],
            [
                "c283f9e1cec329bf"
            ],
            [
                "8af4475aa8cbd5ca"
            ],
            [
                "73ed113b1482079c"
            ],
            [
                "a91aaf9aca1f6845"
            ],
            [
                "4fa5802f87cd7479"
            ],
            [
                "5f2f44f7618ef7f4"
            ],
            [
                "2c7dff1a7105d11e"
            ],
            [
                "2a250466ad53578d"
            ],
            [
                "537f53ef822ccf6f"
            ],
            [
                "333b823a91d5a282"
            ],
            [
                "fd6cca632e02d099"
            ]
        ]
    },
    {
        "id": "72db325840e00c4d",
        "type": "ui_toast",
        "z": "619addbf2da107aa",
        "position": "prompt",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "Tiquete",
        "name": "Tiket Number",
        "x": 1100,
        "y": 160,
        "wires": [
            [
                "5328fd5f96947bd2"
            ]
        ]
    },
    {
        "id": "5328fd5f96947bd2",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "SetTiket",
        "func": "\nif(msg.payload!=\"Cansel\")\n{\n    let tiket_number=parseInt(msg.payload);\n\n    if(tiket_number>=1 && tiket_number<=100000){\n        global.set(\"TIKET_N\",tiket_number);\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1280,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "668e96e992844b25",
        "type": "ui_toast",
        "z": "619addbf2da107aa",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "Desea Iniciar Bache?",
        "name": "Fill1",
        "x": 1070,
        "y": 220,
        "wires": [
            [
                "bc13297a3ab23f0a",
                "d4efe672ca459e72"
            ]
        ]
    },
    {
        "id": "685ecf0080349123",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "SetsFill1",
        "func": "\n\nif(msg.payload!=\"Cansel\")\n{\n    global.set(\"STATUS_CISTERNA1\",2);\n    global.set(\"SEND_STATUS_CISTERNA1\",true);\n\n    //msg.params=[id_cisterna, date_string, id_product, fill_segment1.Vol_full]\n    \n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1460,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "3d2e13eab5990489",
        "type": "ui_toast",
        "z": "619addbf2da107aa",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "Desea Terminar el Bache?",
        "name": "Pause1",
        "x": 1080,
        "y": 260,
        "wires": [
            [
                "9d8d6664f2691042",
                "bc13297a3ab23f0a"
            ]
        ]
    },
    {
        "id": "9d8d6664f2691042",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "SetPause1",
        "func": "\nif(msg.payload!=\"Cansel\")\n{\n    global.set(\"STATUS_CISTERNA1\",3);\n    global.set(\"SEND_STATUS_CISTERNA1\",true);\n    \n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 240,
        "wires": [
            [
                "b430cb3540249bc6"
            ]
        ]
    },
    {
        "id": "1779d316384bdd4c",
        "type": "ui_toast",
        "z": "619addbf2da107aa",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "Desea Borrar Totalizadores?",
        "name": "Close1",
        "x": 1080,
        "y": 300,
        "wires": [
            [
                "bc13297a3ab23f0a",
                "384441782bb7e83d"
            ]
        ]
    },
    {
        "id": "384441782bb7e83d",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "SetClose1",
        "func": "let status_cisterna1=global.get(\"STATUS_CISTERNA1\");\n\n\n\n\nif(msg.payload!=\"Cansel\" && status_cisterna1===3)\n{\n    global.set(\"STATUS_CISTERNA1\",4);\n    global.set(\"SEND_STATUS_CISTERNA1\",true);\n    msg.topic=\"OK\";\n}\nelse\n{\n    msg.topic=null;\n    msg.payload = \"⚠️ El batch debe estar PAUSADO antes de borrar los totalizadore\";\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 280,
        "wires": [
            [
                "bb402655e34c6c09"
            ]
        ]
    },
    {
        "id": "bc13297a3ab23f0a",
        "type": "debug",
        "z": "619addbf2da107aa",
        "name": "debug 2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1280,
        "y": 80,
        "wires": []
    },
    {
        "id": "73ed113b1482079c",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "Create Tiket",
        "func": "let status_cisterna1=global.get(\"STATUS_CISTERNA1\");\n\nif(status_cisterna1===2)\n{\n    global.set(\"IS_REPORT\",true);\n    msg.topic=\"OK\";\n}\nelse{\n    msg.topic=null;\n    msg.payload = \"⚠️ El batch debe estar PAUSADO antes de Generar el tiquete\";\n\n}\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 460,
        "wires": [
            [
                "f6f66db1c4cf61c6"
            ]
        ]
    },
    {
        "id": "f6f66db1c4cf61c6",
        "type": "switch",
        "z": "619addbf2da107aa",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1290,
        "y": 460,
        "wires": [
            [],
            [
                "c61211dcc80df7fa"
            ]
        ]
    },
    {
        "id": "c61211dcc80df7fa",
        "type": "ui_toast",
        "z": "619addbf2da107aa",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1670,
        "y": 300,
        "wires": []
    },
    {
        "id": "bb402655e34c6c09",
        "type": "switch",
        "z": "619addbf2da107aa",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1450,
        "y": 280,
        "wires": [
            [
                "db08240ca43407ed"
            ],
            [
                "c61211dcc80df7fa"
            ]
        ]
    },
    {
        "id": "53e166a9b03ef43c",
        "type": "ui_template",
        "z": "619addbf2da107aa",
        "group": "f5490ef343d6cb98",
        "name": "AnalogSET",
        "order": 6,
        "width": 1,
        "height": 1,
        "format": "<style>\n    /* ---------- OVERLAY / MODAL ---------- */\n    .popup-overlay {\n        position: fixed;\n        inset: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background: rgba(0, 0, 0, 0.55);\n        z-index: 9999;\n        visibility: hidden;\n        opacity: 0;\n        transition: opacity .18s ease, visibility .18s ease;\n    }\n\n    .popup-overlay.active {\n        visibility: visible;\n        opacity: 1;\n    }\n\n    /* modal */\n    .popup-modal {\n        background: #ffffff !important;\n        color: #222;\n        width: 90%;\n        max-width: 640px;\n        border-radius: 10px;\n        box-shadow: 0 18px 60px rgba(0, 0, 0, 0.45);\n        transform: translateY(0);\n        max-height: 90vh;\n        overflow: hidden;\n        display: flex;\n        flex-direction: column;\n    }\n\n    /* header */\n    .popup-header {\n        background: linear-gradient(135deg, #1a73e8 0%, #0d47a1 100%);\n        color: #fff;\n        padding: 16px 20px;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    .popup-header h2 {\n        margin: 0;\n        font-size: 16px;\n        font-weight: 600;\n        display: flex;\n        gap: 12px;\n        align-items: center;\n    }\n\n    .tag-name-display {\n        background: rgba(255, 255, 255, 0.12);\n        padding: 4px 10px;\n        border-radius: 16px;\n        font-size: 13px;\n    }\n\n    /* content */\n    .popup-content {\n        padding: 18px 20px;\n        overflow: auto;\n        flex: 1 1 auto;\n    }\n\n    /* PV */\n    .pv-display {\n        background: linear-gradient(135deg, #263238 0%, #37474f 100%);\n        color: #00e676;\n        padding: 14px;\n        border-radius: 8px;\n        text-align: center;\n        margin-bottom: 14px;\n    }\n\n    .pv-value {\n        font-size: 26px;\n        font-weight: 700;\n        font-family: 'Courier New', monospace;\n    }\n\n    .pv-unit {\n        font-size: 12px;\n        color: #cfd8dc;\n        margin-top: 4px;\n    }\n\n    /* form */\n    .form-grid {\n        display: grid;\n        grid-template-columns: repeat(2, 1fr);\n        gap: 12px;\n    }\n\n    .form-grid.single {\n        grid-template-columns: 1fr;\n    }\n\n    .form-group {\n        display: flex;\n        flex-direction: column;\n    }\n\n    .form-group label {\n        font-size: 12px;\n        color: #444;\n        margin-bottom: 6px;\n        font-weight: 600;\n    }\n\n    .form-group input[type=\"text\"],\n    .form-group input[type=\"number\"],\n    .form-group input[type=\"color\"] {\n        padding: 10px 12px;\n        border-radius: 8px;\n        border: 1px solid #e0e0e0;\n        font-size: 14px;\n        background: #fff;\n        color: #222;\n    }\n\n    /* alarm row simplified */\n    .alarm-row {\n        display: grid;\n        grid-template-columns: 80px 1fr 72px;\n        gap: 10px;\n        align-items: center;\n        padding: 10px;\n        background: #f7f7f7;\n        border-radius: 8px;\n        margin-bottom: 10px;\n    }\n\n    /* toggles */\n    .toggle-wrapper {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n    }\n\n    /* footer */\n    .popup-footer {\n        background: #f8f9fa;\n        padding: 12px 18px;\n        display: flex;\n        justify-content: flex-end;\n        gap: 12px;\n        border-top: 1px solid #e8eaed;\n    }\n\n    /* buttons */\n    .btn {\n        padding: 10px 14px;\n        border-radius: 6px;\n        font-weight: 600;\n        cursor: pointer;\n        border: none;\n        min-width: 110px;\n    }\n\n    .btn-cancel {\n        background: #ffffff;\n        border: 1px solid #d6d6d6;\n        color: #444;\n    }\n\n    .btn-save {\n        background: linear-gradient(135deg, #34a853 0%, #1e8e3e 100%);\n        color: #fff;\n        box-shadow: 0 6px 18px rgba(30, 142, 62, 0.25);\n    }\n\n    /* responsive */\n    @media (max-width:520px) {\n        .form-grid {\n            grid-template-columns: 1fr;\n        }\n\n        .alarm-row {\n            grid-template-columns: 1fr;\n        }\n\n        .popup-modal {\n            max-width: 95%;\n        }\n\n        .popup-footer {\n            flex-direction: column;\n            gap: 8px;\n            align-items: stretch;\n        }\n\n        .btn {\n            width: 100%;\n            min-width: auto;\n        }\n    }\n</style>\n\n<!--\n<button class=\"tag-config-btn\" ng-click=\"openPopup()\">\n  <svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" style=\"margin-right:8px;vertical-align:middle\">\n    <path d=\"M12 15a3 3 0 100-6 3 3 0 000 6z\"></path>\n    <path d=\"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06...\"></path>\n  </svg>\n  Configurar Tag\n</button>\nBOTÓN PARA ABRIR -->\n\n<!-- POPUP -->\n<div class=\"popup-overlay\" ng-class=\"{'active': showPopup}\" ng-click=\"closeOnOverlay($event)\">\n    <div class=\"popup-modal\" ng-keypress=\"keyPress($event)\">\n\n        <!-- HEADER -->\n        <div class=\"popup-header\">\n            <h2>\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                    <path d=\"M12 15a3 3 0 100-6 3 3 0 000 6z\" />\n                </svg>\n                Configuración de Tag\n                <span class=\"tag-name-display\">{{tag.TagName}}</span>\n            </h2>\n            <button class=\"close-btn\" ng-click=\"closePopup()\" style=\"background:transparent;border:none;color:#fff;font-size:18px;cursor:pointer;\">\n        ✕\n      </button>\n        </div>\n\n        <!-- CONTENT -->\n        <div class=\"popup-content\">\n\n            <div class=\"pv-display\" ng-if=\"tag\">\n                <div class=\"pv-value\">{{tag.PV | number:2}}</div>\n                <div class=\"pv-unit\">{{tag.und}}</div>\n            </div>\n\n            <!-- BASIC -->\n            <div class=\"form-section\">\n                <div class=\"section-title\" style=\"margin-bottom:8px;font-weight:700;color:#555;\">Información básica\n                </div>\n\n                <div class=\"form-grid\">\n                    <div class=\"form-group\">\n                        <label>ID</label>\n                        <input type=\"number\" ng-model=\"tag.ID\" readonly>\n                    </div>\n                    <div class=\"form-group\">\n                        <label>Tag Name</label>\n                        <input type=\"text\" ng-model=\"tag.TagName\">\n                    </div>\n                </div>\n\n                <div class=\"form-grid single\" style=\"margin-top:12px;\">\n                    <div class=\"form-group\">\n                        <label>Descripción</label>\n                        <input type=\"text\" ng-model=\"tag.Descripcion\">\n                    </div>\n                </div>\n\n                <div class=\"form-grid\" style=\"margin-top:12px;\">\n                    <div class=\"form-group\">\n                        <label>Unidad</label>\n                        <input type=\"text\" ng-model=\"tag.und\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label>Valor Actual (PV)</label>\n                        <input type=\"number\" ng-model=\"tag.PV\" step=\"0.01\">\n                    </div>\n                </div>\n            </div>\n\n            <!-- Rango -->\n            <div class=\"form-section\">\n                <div class=\"section-title\" style=\"margin-bottom:8px;font-weight:700;color:#555;\">Rango de escala</div>\n                <div class=\"form-grid\">\n                    <div class=\"form-group\">\n                        <label>Mínimo</label>\n                        <input type=\"number\" ng-model=\"tag.Min\" step=\"0.01\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label>Máximo</label>\n                        <input type=\"number\" ng-model=\"tag.Max\" step=\"0.01\">\n                    </div>\n                </div>\n            </div>\n\n            <!-- Alarmas -->\n            <div class=\"form-section\">\n                <div class=\"section-title\" style=\"margin-bottom:8px;font-weight:700;color:#555;\">Límites de alarma</div>\n\n                <div class=\"alarm-row\">\n                    <div class=\"alarm-label hh\">HH</div>\n                    <input type=\"number\" ng-model=\"tag.HH\" step=\"0.01\" placeholder=\"High-High\">\n                    <div class=\"toggle-wrapper\">\n                        <label class=\"toggle-switch\">\n              <input type=\"checkbox\" ng-model=\"tag.enableHH\" ng-true-value=\"1\" ng-false-value=\"0\">\n              <span class=\"toggle-slider\"></span>\n            </label>\n                    </div>\n                </div>\n\n                <div class=\"alarm-row\">\n                    <div class=\"alarm-label h\">H</div>\n                    <input type=\"number\" ng-model=\"tag.H\" step=\"0.01\">\n                    <div class=\"toggle-wrapper\">\n                        <label class=\"toggle-switch\">\n              <input type=\"checkbox\" ng-model=\"tag.enableH\" ng-true-value=\"1\" ng-false-value=\"0\">\n              <span class=\"toggle-slider\"></span>\n            </label>\n                    </div>\n                </div>\n\n                <div class=\"alarm-row\">\n                    <div class=\"alarm-label l\">L</div>\n                    <input type=\"number\" ng-model=\"tag.L\" step=\"0.01\">\n                    <div class=\"toggle-wrapper\">\n                        <label class=\"toggle-switch\">\n              <input type=\"checkbox\" ng-model=\"tag.enableL\" ng-true-value=\"1\" ng-false-value=\"0\">\n              <span class=\"toggle-slider\"></span>\n            </label>\n                    </div>\n                </div>\n\n                <div class=\"alarm-row\">\n                    <div class=\"alarm-label ll\">LL</div>\n                    <input type=\"number\" ng-model=\"tag.LL\" step=\"0.01\">\n                    <div class=\"toggle-wrapper\">\n                        <label class=\"toggle-switch\">\n              <input type=\"checkbox\" ng-model=\"tag.enableLL\" ng-true-value=\"1\" ng-false-value=\"0\">\n              <span class=\"toggle-slider\"></span>\n            </label>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Estado -->\n            <div class=\"form-section\">\n                <div class=\"section-title\" style=\"margin-bottom:8px;font-weight:700;color:#555;\">Estado</div>\n                <div class=\"form-grid\">\n                    <div class=\"form-group\">\n                        <label>Color de Alarma</label>\n                        <div style=\"display:flex;gap:8px;align-items:center;\">\n                            <input type=\"color\" ng-model=\"tag.ALARM\">\n                            <input type=\"text\" ng-model=\"tag.ALARM\" style=\"flex:1;padding:8px;border-radius:6px;border:1px solid #e0e0e0;\">\n                        </div>\n                    </div>\n\n                    <div class=\"form-group\">\n                        <label>Estado de Falla</label>\n                        <div style=\"display:flex;align-items:center;gap:10px;\">\n                            <label class=\"toggle-switch\">\n                <input type=\"checkbox\" ng-model=\"tag.FAIL\" ng-true-value=\"1\" ng-false-value=\"0\">\n                <span class=\"toggle-slider\"></span>\n              </label>\n                            <span style=\"font-weight:600;color:#444;\">{{tag.FAIL ? 'EN FALLA' : 'NORMAL'}}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n\n        <!-- FOOTER -->\n        <div class=\"popup-footer\">\n            <button class=\"btn btn-cancel\" ng-click=\"closePopup()\">Cancelar</button>\n            <button class=\"btn btn-save\" ng-click=\"saveTagChanges()\">💾 Guardar Cambios</button>\n        </div>\n\n    </div>\n</div>\n\n<script>\n    (function(scope){\n\n  scope.showPopup = false;\n\n  scope.tag = {\n    ID: 1,\n    TagName: \"PIT_2001\",\n    Descripcion: \"Presion Vd-01\",\n    und: \"PSI\",\n    PV: 53.1,\n    HH: 100,\n    H: 95,\n    L: 2,\n    LL: 1.5,\n    Max: 200,\n    Min: 0,\n    enableHH: 1,\n    enableH: 1,\n    enableL: 1,\n    enableLL: 1,\n    ALARM: \"#00ba00\",\n    FAIL: 0\n  };\n\n  scope._originalTag = {};\n\n  scope.openPopup = function(){\n    scope._originalTag = angular.copy(scope.tag || {});\n    scope.showPopup = true;\n  };\n\n  scope.closePopup = function(){\n    scope.tag = angular.copy(scope._originalTag || scope.tag);\n    scope.showPopup = false;\n  };\n\n  scope.closeOnOverlay = function(e){\n    if(e && e.target && e.target.classList && e.target.classList.contains('popup-overlay')){\n      scope.closePopup();\n      // asegurar digest\n      if(!scope.$$phase) scope.$apply();\n    }\n  };\n\n  scope.saveTagChanges = function(){\n    // normalizar tipos\n    ['ID','PV','HH','H','L','LL','Max','Min'].forEach(function(k){\n      scope.tag[k] = parseFloat(scope.tag[k]) || 0;\n    });\n    ['enableHH','enableH','enableL','enableLL','FAIL'].forEach(function(k){\n      scope.tag[k] = scope.tag[k] ? 1 : 0;\n    });\n\n    scope.send({\n      topic: \"tag_update\",\n      payload: angular.copy(scope.tag)\n    });\n\n    scope.closePopup();\n  };\n\n  /* recibir mensaje para abrir y cargar tag */\n  scope.$watch('msg', function(msg){\n    if(!msg) return;\n    if(msg.topic === \"open_alarm_config\"){\n      // sobreescribir solo campos existentes\n      Object.keys(msg.payload || {}).forEach(function(k){\n        if(scope.tag.hasOwnProperty(k)){\n          scope.tag[k] = msg.payload[k];\n        }\n      });\n      scope.openPopup();\n    }\n  });\n\n  // exponer (opcional) para llamadas externas\n  window.openTagEditor = function(){\n    scope.openPopup();\n    if(!scope.$$phase) scope.$apply();\n  };\n\n})(scope);\n</script>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1310,
        "y": 660,
        "wires": [
            [
                "ea9da6f09b500e72"
            ]
        ]
    },
    {
        "id": "5f2f44f7618ef7f4",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "Get PIT",
        "func": "let tag=global.get(\"PIT_2001\");\nmsg.topic = \"open_alarm_config\";\nmsg.payload=tag;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 580,
        "wires": [
            [
                "53e166a9b03ef43c"
            ]
        ]
    },
    {
        "id": "2c7dff1a7105d11e",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "Get PIT",
        "func": "let tag=global.get(\"TIT_2001\");\nmsg.topic = \"open_alarm_config\";\nmsg.payload=tag;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 620,
        "wires": [
            [
                "53e166a9b03ef43c"
            ]
        ]
    },
    {
        "id": "537f53ef822ccf6f",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "Get FIT",
        "func": "let tag=global.get(\"FIT_2001\");\nmsg.topic = \"open_alarm_config\";\nmsg.payload=tag;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 700,
        "wires": [
            [
                "53e166a9b03ef43c"
            ]
        ]
    },
    {
        "id": "ea9da6f09b500e72",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "preparar query",
        "func": "// Verificar que viene del popup\nif (msg.topic === 'tag_update') {\n    var tag = msg.payload;\n    \n    // Debug - verificar datos\n\n    \n    msg.params= {\n        $HH: tag.HH,\n        $H: tag.H,\n        $L: tag.L,\n        $LL: tag.LL,\n        $Max: tag.Max,\n        $Min: tag.Min,\n        $enableHH: tag.enableHH,\n        $enableH: tag.enableH,\n        $enableL: tag.enableL,\n        $enableLL: tag.enableLL,\n        $ID: tag.ID\n    };\n\n    global.set(tag.TagName,tag);\n    \n    return msg;\n}\nreturn null;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1520,
        "y": 660,
        "wires": [
            [
                "a8f1f8f8a652b830"
            ]
        ]
    },
    {
        "id": "dfe627d839ab6604",
        "type": "sqlite",
        "z": "619addbf2da107aa",
        "mydb": "467989ca35bb4f62",
        "sqlquery": "prepared",
        "sql": " UPDATE tblTags SET HH = $HH, H = $H, L = $L, LL = $LL, Max = $Max, Min = $Min, enableHH = $enableHH, enableH = $enableH, enableL = $enableL, enableLL = $enableLL WHERE ID = $ID;",
        "name": "",
        "x": 1970,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "936d82591358bf5b",
        "type": "ui_template",
        "z": "619addbf2da107aa",
        "group": "f5490ef343d6cb98",
        "name": "LLenado",
        "order": 8,
        "width": 1,
        "height": 1,
        "format": "<style>\n    /* ---------- OVERLAY / MODAL ---------- */\n    .popup-overlay {\n        position: fixed;\n        inset: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background: rgba(0, 0, 0, 0.55);\n        z-index: 9999;\n        visibility: hidden;\n        opacity: 0;\n        transition: opacity .18s ease, visibility .18s ease;\n    }\n\n    .popup-overlay.active {\n        visibility: visible;\n        opacity: 1;\n    }\n\n    /* modal */\n    .popup-modal {\n        background: #ffffff !important;\n        color: #222;\n        width: 90%;\n        max-width: 640px;\n        border-radius: 10px;\n        box-shadow: 0 18px 60px rgba(0, 0, 0, 0.45);\n        transform: translateY(0);\n        max-height: 90vh;\n        overflow: hidden;\n        display: flex;\n        flex-direction: column;\n    }\n\n    /* header */\n    .popup-header {\n        background: linear-gradient(135deg, #1a73e8 0%, #0d47a1 100%);\n        color: #fff;\n        padding: 16px 20px;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    .popup-header h2 {\n        margin: 0;\n        font-size: 16px;\n        font-weight: 600;\n    }\n\n    /* content */\n    .popup-content {\n        padding: 18px 20px;\n        overflow: auto;\n        flex: 1 1 auto;\n    }\n\n    /* form */\n    .form-grid {\n        display: grid;\n        grid-template-columns: repeat(2, 1fr);\n        gap: 12px;\n    }\n\n    .form-grid.single {\n        grid-template-columns: 1fr;\n    }\n\n    .form-group {\n        display: flex;\n        flex-direction: column;\n    }\n\n    .form-group label {\n        font-size: 12px;\n        color: #444;\n        margin-bottom: 6px;\n        font-weight: 600;\n    }\n\n    .form-group input,\n    .form-group select {\n        padding: 10px 12px;\n        border-radius: 8px;\n        border: 1px solid #e0e0e0;\n        font-size: 14px;\n        background: #fff;\n        color: #222;\n    }\n\n    .form-group select {\n        cursor: pointer;\n        appearance: none;\n        background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23444' d='M6 8L1 3h10z'/%3E%3C/svg%3E\");\n        background-repeat: no-repeat;\n        background-position: right 12px center;\n        padding-right: 36px;\n    }\n\n    .form-group select:focus {\n        outline: none;\n        border-color: #1a73e8;\n        box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.15);\n    }\n\n    /* footer */\n    .popup-footer {\n        background: #f8f9fa;\n        padding: 12px 18px;\n        display: flex;\n        justify-content: flex-end;\n        gap: 12px;\n        border-top: 1px solid #e8eaed;\n    }\n\n    /* buttons */\n    .btn {\n        padding: 10px 14px;\n        border-radius: 6px;\n        font-weight: 600;\n        cursor: pointer;\n        border: none;\n        min-width: 110px;\n    }\n\n    .btn-cancel {\n        background: #ffffff;\n        border: 1px solid #d6d6d6;\n        color: #444;\n    }\n\n    .btn-save {\n        background: linear-gradient(135deg, #34a853 0%, #1e8e3e 100%);\n        color: #fff;\n        box-shadow: 0 6px 18px rgba(30, 142, 62, 0.25);\n    }\n\n    /* responsive */\n    @media (max-width:520px) {\n        .form-grid {\n            grid-template-columns: 1fr;\n        }\n\n        .popup-modal {\n            max-width: 95%;\n        }\n\n        .popup-footer {\n            flex-direction: column;\n            gap: 8px;\n            align-items: stretch;\n        }\n\n        .btn {\n            width: 100%;\n            min-width: auto;\n        }\n    }\n</style>\n\n<!-- POPUP LLENADO -->\n<div class=\"popup-overlay\" ng-class=\"{'active': showPopup}\" ng-click=\"closeOnOverlay($event)\">\n    <div class=\"popup-modal\" ng-keypress=\"keyPress($event)\">\n\n        <!-- HEADER -->\n        <div class=\"popup-header\">\n            <h2>Datos de Carga – Cisterna 1</h2>\n            <button style=\"background:transparent;border:none;color:#fff;font-size:20px;cursor:pointer;\"\n              ng-click=\"closePopup()\">✕</button>\n        </div>\n\n        <!-- CONTENT -->\n        <div class=\"popup-content\">\n\n            <div class=\"form-grid single\">\n                <div class=\"form-group\">\n                    <label>Cliente</label>\n                    <input type=\"text\" ng-model=\"data.cliente\" placeholder=\"Ej: RAYOGAS SAS\">\n                </div>\n            </div>\n\n            <div class=\"form-grid single\">\n                <div class=\"form-group\">\n                    <label>Producto</label>\n                    <select ng-model=\"data.producto\">\n                        <option value=\"\" disabled selected>-- Seleccione --</option>\n                        <option value=\"PROPANO\">PROPANO</option>\n                        <option value=\"BUTANO\">BUTANO</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class=\"form-grid single\">\n                <div class=\"form-group\">\n                    <label>Cisterna</label>\n                    <input type=\"text\" ng-model=\"data.cisterna\" placeholder=\"Ej: placaX\">\n                </div>\n            </div>\n\n            <div class=\"form-grid\">\n                <div class=\"form-group\">\n                    <label>Nro Tiquete</label>\n                    <input type=\"number\" ng-model=\"data.tiquete\">\n                </div>\n                <div class=\"form-group\">\n                    <label>Fecha</label>\n                    <input type=\"text\" ng-model=\"data.fecha\">\n                </div>\n            </div>\n\n            <div class=\"form-grid\">\n                <div class=\"form-group\">\n                    <label>RVP</label>\n                    <input type=\"number\" step=\"0.01\" ng-model=\"data.rvp\">\n                </div>\n                <div class=\"form-group\">\n                    <label>Volumen a llenar</label>\n                    <input type=\"number\" step=\"0.01\" ng-model=\"data.Vol_full\">\n                </div>\n            </div>\n\n        </div>\n\n        <!-- FOOTER -->\n        <div class=\"popup-footer\">\n            <button class=\"btn btn-cancel\" ng-click=\"closePopup()\">Cancelar</button>\n            <button class=\"btn btn-save\" ng-click=\"submitData()\">Guardar</button>\n        </div>\n\n    </div>\n</div>\n\n<script>\n    (function(scope) {\n\n    /* ESTADO */\n    scope.showPopup = false;\n    \n    scope._backup = {};\n\n    /* FIX: asegurar que siempre inicia cerrado */\n    setTimeout(() => {\n        scope.showPopup = false;\n        if (!scope.$$phase) scope.$apply();\n    }, 10);\n\n    /* ABRIR POR MENSAJE */\n    scope.$watch('msg', function(msg){\n    \n        // ignorar mensajes vacíos o internos del dashboard\n        if (!msg || !msg.topic) return;\n        \n        // abrir solo cuando el topic sea exactamente el que corresponde\n        if (msg.topic === \"LLENADO\") {\n            scope.data =angular.copy(msg.payload);\n            scope._backup = angular.copy(scope.data);\n            scope.showPopup = true;\n            return;\n        }\n    \n    });\n\n    /* Cierre por overlay */\n    scope.closeOnOverlay = function(e) {\n        if (e.target.classList.contains(\"popup-overlay\")) {\n            scope.closePopup();\n            if (!scope.$$phase) scope.$apply();\n        }\n    };\n\n    /* Abrir manualmente */\n    scope.openPopup = function() {\n        scope._backup = angular.copy(scope.data);\n        scope.showPopup = true;\n    };\n\n    /* Cancelar */\n    scope.closePopup = function() {\n        scope.data = angular.copy(scope._backup);\n        scope.showPopup = false;\n    };\n\n    /* Guardar */\n    scope.submitData = function() {\n        // Validar que se haya seleccionado un producto\n        if (!scope.data.producto) {\n            alert(\"Por favor seleccione un producto\");\n            return;\n        }\n        \n        const payload = angular.copy(scope.data);\n        payload.origen = \"LLENADO\";\n\n        scope.send({\n            topic: \"OK\",\n            payload: payload\n        });\n\n        scope.showPopup = false;\n        scope.data = { producto: \"\" };\n    };\n\n})(scope);\n</script>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1280,
        "y": 520,
        "wires": [
            [
                "60cb6c66917c7f28"
            ]
        ]
    },
    {
        "id": "a91aaf9aca1f6845",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "function 5",
        "func": "msg.topic=\"LLENADO\";\nglobal.set(\"ACTUAL_CISTERNA\",\"CISTERNA1\");\nlet cisterna= global.get(\"CISTERNA1\");\nlet date = new Date().toLocaleString().replaceAll('/','-')\n\n\n\nmsg.payload={\n    cliente: \"ALMAGAS\",\n    producto: \"select\",\n    cisterna: cisterna.numero_sisterna,\n    tiquete: 123,\n    fecha : date,\n    rvp:180,\n    Vol_full: 14000\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 500,
        "wires": [
            [
                "936d82591358bf5b"
            ]
        ]
    },
    {
        "id": "61552e5ef6f099b5",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "InserNewSegment",
        "func": "/*\nCREATE TABLE \"llenados\" (\n\t\"id\"\tINTEGER,\n\t\"cisterna_id\"\tINTEGER NOT NULL,\n\t\"fecha_inicio\"\tDATETIME NOT NULL,\n\t\"fecha_fin\"\tDATETIME,\n\t\"producto_id\"\tINTEGER NOT NULL,\n\t\"volumen_objetivo\"\tREAL,\n\t\"volumen_actual\"\tREAL DEFAULT 0,\n\t\"estado\"\tTEXT NOT NULL DEFAULT 'EN_PROCESO',\n\t\"RVP\"\tREAL NOT NULL DEFAULT 180,\n\tPRIMARY KEY(\"id\" AUTOINCREMENT),\n\tFOREIGN KEY(\"cisterna_id\") REFERENCES \"cisternas\"(\"id\"),\n\tFOREIGN KEY(\"producto_id\") REFERENCES \"productos\"(\"id\")\n)\n*/\n\nlet date_string = new Date().toLocaleString('en-US', { hour12: false }).replaceAll('/', '-');\ndate_string = date_string.replace(',', ' ');\n\nvar datos = global.get(\"FILL_SEGMENT1\");\nlet id_cisterna = msg.payload[0].id;\nlet id_product = datos.producto == \"PROPANO\" ? 1 : 2;\nglobal.set(\"ID_PRODUCTO\", id_product);\nglobal.set(\"ID_CISTERNA\", id_cisterna);\nif (msg.topic === \"OK\" && global.get(\"STATUS_CISTERNA1\") === 0) {\n\tmsg.payload = \"UpdateData\";\n\tlet promedios = {\n\n\t\tllenado_id: 0,\n\t\tflujo_promedio: 0.0,\n\t\tdensidad_promedio: 0.0,\n\t\tpresion_promedio: 0.0,\n\t\ttemperatura_promedio: 0.0,\n\t\tvolumen_total: 0\n\n\t};\n\tglobal.set(\"PROMEDIOS\", promedios);\n\t// Mapeamos los valores a los parámetros del query\n\tmsg.params = [id_cisterna, date_string, id_product, datos.Vol_full, 0, datos.rvp];\n\t\n\tglobal.set(\"STATUS_CISTERNA1\", 1);\n\n\n}\nelse {\n\tmsg.payload = null;\n}\n\n\n\n\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1850,
        "y": 520,
        "wires": [
            [
                "7abe5b8ecdab4956"
            ]
        ]
    },
    {
        "id": "aebb31bc1ff0fa83",
        "type": "sqlite",
        "z": "619addbf2da107aa",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "prepared",
        "sql": "INSERT INTO llenados (\n    \n\tcisterna_id,\n\tfecha_inicio,\n\tproducto_id\t,\n\tvolumen_objetivo,\n\tvolumen_actual,\t\n\tRVP\t\n    ) \n    VALUES (?,?,?,?,?,?)",
        "name": "",
        "x": 2280,
        "y": 520,
        "wires": [
            [
                "3472d7035568969e"
            ]
        ]
    },
    {
        "id": "ef7e2ca45160d518",
        "type": "ui_svg_graphics",
        "z": "619addbf2da107aa",
        "group": "f5490ef343d6cb98",
        "order": 1,
        "width": 30,
        "height": 15,
        "svgString": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg version=\"1.1\" id=\"svg1\" xml:space=\"preserve\" width=\"1230.3337\" height=\"786.73712\"\n    xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n    xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n    xmlns=\"http://www.w3.org/2000/svg\" xmlns:svg=\"http://www.w3.org/2000/svg\">\n    <defs id=\"defs1\">\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient96\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(1.0953743,0,0,0.23020825,736.80763,398.16276)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient22\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop22\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop24\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop23\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient95\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(1.0953743,0,0,0.23020825,872.65788,396.51388)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient3\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop1\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop2\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop3\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#SVGID_1_massflowmeter\" id=\"linearGradient88\"\n            gradientUnits=\"userSpaceOnUse\" x1=\"50.138401\" y1=\"86.6707\" x2=\"50.138401\" y2=\"71.114403\" />\n        <linearGradient class=\"linear\" id=\"SVGID_1_massflowmeter\" gradientUnits=\"userSpaceOnUse\" x1=\"50.138401\"\n            y1=\"86.6707\" x2=\"50.138401\" y2=\"71.114403\">\n\n\n            <stop offset=\"0\" stop-color=\"#de9c5f\" id=\"stop4\" />\n            <stop offset=\"1\" stop-color=\"#000000\" id=\"stop5\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#SVGID_2_massflowmeter\" id=\"linearGradient89\"\n            gradientUnits=\"userSpaceOnUse\" x1=\"72.862198\" y1=\"58.882999\" x2=\"83.862198\" y2=\"47.882999\" />\n        <linearGradient class=\"linear\" id=\"SVGID_2_massflowmeter\" gradientUnits=\"userSpaceOnUse\" x1=\"72.862198\"\n            y1=\"58.882999\" x2=\"83.862198\" y2=\"47.882999\">\n\n\n            <stop offset=\"0\" stop-color=\"#de9c5f\" id=\"stop6\" />\n            <stop offset=\"1\" stop-color=\"#000000\" id=\"stop7\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#SVGID_3_massflowmeter\" id=\"linearGradient90\"\n            gradientUnits=\"userSpaceOnUse\" x1=\"27.6476\" y1=\"58.456501\" x2=\"16.314199\" y2=\"47.789902\" />\n        <linearGradient class=\"linear\" id=\"SVGID_3_massflowmeter\" gradientUnits=\"userSpaceOnUse\" x1=\"27.6476\"\n            y1=\"58.456501\" x2=\"16.314199\" y2=\"47.789902\">\n\n\n            <stop offset=\"0\" stop-color=\"#de9c5f\" id=\"stop8\" />\n            <stop offset=\"1\" stop-color=\"#000000\" id=\"stop9\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient65\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(1.0951279,0,0,0.29097172,788.76224,541.99499)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient12\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop10\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop11\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop12\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient64\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(1.0951279,0,0,0.29097172,535.19592,698.37264)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient15\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop13\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop14\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop15\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient45\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(1.6427296,0,0,0.33359885,-1077.2578,118.1655)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient18\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop16\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop17\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop18\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient42\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(0,0.56527929,0.33388486,0,-2.018651,638.7638)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient21\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop19\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop20\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop21\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient44\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(0.18475165,0,0,0.33388486,7.664106,-826.0685)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient27\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop25\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop26\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop27\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient43\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(-0.4184877,0,0,-0.35132789,111.41705,857.64815)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient30\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop28\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop29\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop30\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient40\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(0.56527929,0,0,0.33388486,-1018.9457,-31.494834)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient33\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop31\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop32\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop33\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient39\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(-0.4184877,0,0,0.35132789,126.79766,835.10515)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient36\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop34\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop35\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop36\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient38\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(0.18475165,0,0,0.33388486,-21.812077,837.641)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient41\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop37\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop38\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop39\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient37\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(7.2413588,0,0,0.2882405,-1458.5426,698.09521)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient46\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop41\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop42\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop43\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient24\"\n            gradientUnits=\"userSpaceOnUse\" gradientTransform=\"matrix(6.5033605,0,0,0.2875976,-982.53393,543.47535)\"\n            x1=\"258.21692\" y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" />\n        <linearGradient id=\"linearGradient48\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop46\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop47\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop48\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#linearGradient22\" id=\"linearGradient23\" x1=\"258.21692\"\n            y1=\"72.793594\" x2=\"258.21692\" y2=\"138.89528\" gradientUnits=\"userSpaceOnUse\"\n            gradientTransform=\"matrix(5.5116659,0,0,0.2887649,-1236.8294,542.70149)\" />\n        <linearGradient id=\"linearGradient51\" inkscape:collect=\"always\">\n            <stop style=\"stop-color:#e65309;stop-opacity:0.99052501;\" offset=\"0\" id=\"stop49\" />\n            <stop style=\"stop-color:#f0f3f5;stop-opacity:0.98039216;\" offset=\"0.5\" id=\"stop50\" />\n            <stop style=\"stop-color:#e17313;stop-opacity:0.96796471;\" offset=\"1\" id=\"stop51\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#SVGID_1_massflowmeter\" id=\"linearGradient91\"\n            gradientUnits=\"userSpaceOnUse\" x1=\"50.138401\" y1=\"86.6707\" x2=\"50.138401\" y2=\"71.114403\" />\n        <linearGradient class=\"linear\" id=\"linearGradient53\" gradientUnits=\"userSpaceOnUse\" x1=\"50.138401\" y1=\"86.6707\"\n            x2=\"50.138401\" y2=\"71.114403\">\n\n\n            <stop offset=\"0\" stop-color=\"#de9c5f\" id=\"stop52\" />\n            <stop offset=\"1\" stop-color=\"#000000\" id=\"stop53\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#SVGID_2_massflowmeter\" id=\"linearGradient92\"\n            gradientUnits=\"userSpaceOnUse\" x1=\"72.862198\" y1=\"58.882999\" x2=\"83.862198\" y2=\"47.882999\" />\n        <linearGradient class=\"linear\" id=\"linearGradient55\" gradientUnits=\"userSpaceOnUse\" x1=\"72.862198\"\n            y1=\"58.882999\" x2=\"83.862198\" y2=\"47.882999\">\n\n\n            <stop offset=\"0\" stop-color=\"#de9c5f\" id=\"stop54\" />\n            <stop offset=\"1\" stop-color=\"#000000\" id=\"stop55\" />\n        </linearGradient>\n        <linearGradient inkscape:collect=\"always\" xlink:href=\"#SVGID_3_massflowmeter\" id=\"linearGradient93\"\n            gradientUnits=\"userSpaceOnUse\" x1=\"27.6476\" y1=\"58.456501\" x2=\"16.314199\" y2=\"47.789902\" />\n        <linearGradient class=\"linear\" id=\"linearGradient57\" gradientUnits=\"userSpaceOnUse\" x1=\"27.6476\" y1=\"58.456501\"\n            x2=\"16.314199\" y2=\"47.789902\">\n\n\n            <stop offset=\"0\" stop-color=\"#de9c5f\" id=\"stop56\" />\n            <stop offset=\"1\" stop-color=\"#000000\" id=\"stop57\" />\n        </linearGradient>\n    </defs>\n    <sodipodi:namedview id=\"namedview1\" pagecolor=\"#ffffff\" bordercolor=\"#000000\" borderopacity=\"0.25\"\n        inkscape:showpageshadow=\"2\" inkscape:pageopacity=\"0.0\" inkscape:pagecheckerboard=\"0\"\n        inkscape:deskcolor=\"#d1d1d1\" />\n    <inkscape:clipboard min=\"2.3741028e-08,0\" max=\"1230.3337,786.73712\" geom-min=\"2.3741028e-08,0.42294449\"\n        geom-max=\"1230.3337,786.73712\" />\n    <g id=\"g57\">\n        <rect\n            style=\"opacity:0.98;fill:#969696;fill-opacity:1;stroke:#050509;stroke-width:0.82668;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect90\" width=\"367.38129\" height=\"423.00577\" x=\"601.16608\" y=\"0.71800482\" ry=\"18.182081\" />\n        <rect\n            style=\"opacity:0.98;fill:#969696;fill-opacity:1;stroke:#050509;stroke-width:0.845889;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect89\" width=\"387.84851\" height=\"419.52042\" x=\"170.74724\" y=\"0.42294449\" ry=\"18.03227\" />\n        <g id=\"g68\" transform=\"matrix(1,0,0,0.95965085,111.44204,38.217673)\">\n            <g id=\"shape\" transform=\"matrix(1.9944138,0,0,1.7696592,214.04262,532.07217)\"\n                style=\"fill:#9d3600;fill-opacity:1\">\n                <path fill=\"#c78163\"\n                    d=\"m 67.676,31.745 -8.292,-0.622 -3.128,-3.128 0.651,-3.817 c 2.004,-0.37 3.408,-1.164 3.408,-2.086 0,-1.108 1.851,-2.141 4.297,-2.495 2.346,0 11.757,0 11.91,0 0.64,0 1.159,-2.118 1.159,-4.732 0,-2.614 -0.519,-4.732 -1.159,-4.732 -0.153,0 -9.563,0 -11.91,0 -2.446,-0.354 -4.298,-1.387 -4.298,-2.495 0,-1.271 -2.655,-2.311 -5.899,-2.311 h -8.259 c -3.245,0 -5.899,1.04 -5.899,2.311 0,1.108 -1.952,2.142 -4.532,2.495 -3.361,0 -11.291,0 -11.428,0 -0.64,0 -1.159,2.118 -1.159,4.732 0,2.614 0.519,4.732 1.159,4.732 0.137,0 8.068,0 11.428,0 2.58,0.354 4.532,1.387 4.532,2.495 0,0.873 1.266,1.627 3.102,2.02 l 0.662,3.882 -3.127,3.128 -8.292,0.622 L 0.277,64.069 10.332,86.722 H 89.945 L 100,64.069 Z M 80.634,71.149 H 19.643 l -1.359,-3.062 25.33,-25.33 0.356,-4.746 3.191,-3.191 c 1.653,-1.653 4.333,-1.653 5.985,0 l 3.159,3.159 0.359,4.778 25.33,25.33 z\"\n                    id=\"path1\" style=\"fill:#9d3600;fill-opacity:1\" />\n                <path fill=\"#c78163\" d=\"m 75.544,24.19 c 0.077,0 4.591,0 4.669,0 V 5.542 c -0.077,0 -4.591,0 -4.669,0 z\"\n                    id=\"path2\" style=\"fill:#9d3600;fill-opacity:1\" />\n                <path fill=\"#c78163\" d=\"m 20.449,24.19 c 0.077,0 4.591,0 4.669,0 V 5.542 c -0.077,0 -4.591,0 -4.669,0 z\"\n                    id=\"path3\" style=\"fill:#9d3600;fill-opacity:1\" />\n            </g>\n            <g id=\"linear\" transform=\"matrix(2.1295258,0,0,1.7696592,206.00506,532.07217)\">\n                <linearGradient class=\"linear\" id=\"linearGradient11\" gradientUnits=\"userSpaceOnUse\" x1=\"50.138401\"\n                    y1=\"86.6707\" x2=\"50.138401\" y2=\"71.114403\">\n\n\n                    <stop offset=\"0\" stop-color=\"#de9c5f\" id=\"stop58\" />\n                    <stop offset=\"1\" stop-color=\"#000000\" id=\"stop59\" />\n                </linearGradient>\n                <polygon class=\"linear\" fill=\"url(#SVGID_1_massflowmeter)\"\n                    points=\"19.643,71.149 80.634,71.149 89.945,86.722 10.332,86.722 \" id=\"polygon4\"\n                    style=\"fill:url(#linearGradient91)\" />\n                <linearGradient class=\"linear\" id=\"linearGradient13\" gradientUnits=\"userSpaceOnUse\" x1=\"72.862198\"\n                    y1=\"58.882999\" x2=\"83.862198\" y2=\"47.882999\">\n\n\n                    <stop offset=\"0\" stop-color=\"#de9c5f\" id=\"stop60\" />\n                    <stop offset=\"1\" stop-color=\"#000000\" id=\"stop61\" />\n                </linearGradient>\n                <polygon class=\"linear\" fill=\"url(#SVGID_2_massflowmeter)\"\n                    points=\"81.993,68.087 56.663,42.757 67.676,31.745 100,64.069 \" id=\"polygon6\"\n                    style=\"fill:url(#linearGradient92)\" />\n                <linearGradient class=\"linear\" id=\"linearGradient63\" gradientUnits=\"userSpaceOnUse\" x1=\"27.6476\"\n                    y1=\"58.456501\" x2=\"16.314199\" y2=\"47.789902\">\n\n\n                    <stop offset=\"0\" stop-color=\"#de9c5f\" id=\"stop62\" />\n                    <stop offset=\"1\" stop-color=\"#000000\" id=\"stop63\" />\n                </linearGradient>\n                <polygon class=\"linear\" fill=\"url(#SVGID_3_massflowmeter)\"\n                    points=\"0.277,64.069 32.601,31.745 43.613,42.757 18.284,68.087 \" id=\"polygon8\"\n                    style=\"fill:url(#linearGradient93)\" />\n            </g>\n            <g id=\"dark\" transform=\"matrix(2.1295258,0,0,1.7696592,206.00506,532.07217)\">\n                <circle fill=\"#947365\" cx=\"50.138\" cy=\"81.782997\" r=\"12.094\" id=\"circle8\" />\n                <polygon fill=\"#947365\" points=\"10.332,86.722 19.643,71.149 18.284,68.087 0.277,64.069 \"\n                    id=\"polygon9\" />\n                <polygon fill=\"#947365\" points=\"100,64.069 81.993,68.087 80.634,71.149 89.945,86.722 \" id=\"polygon10\" />\n            </g>\n            <g id=\"light\" transform=\"matrix(2.1295258,0,0,1.7696592,206.00506,532.07217)\"\n                style=\"fill:#4f4b4c;fill-opacity:1\">\n                <path fill=\"#de9c5f\"\n                    d=\"m 50.138,67.526 c -7.874,0 -14.257,6.383 -14.257,14.257 0,7.874 6.383,14.257 14.257,14.257 7.874,0 14.257,-6.383 14.257,-14.257 0,-7.874 -6.383,-14.257 -14.257,-14.257 z m 0,26.351 c -6.679,0 -12.094,-5.415 -12.094,-12.094 0,-6.679 5.415,-12.094 12.094,-12.094 6.679,0 12.094,5.415 12.094,12.094 0,6.679 -5.414,12.094 -12.094,12.094 z\"\n                    id=\"path10\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 18.284,68.337 c -0.018,0 -0.036,-0.002 -0.054,-0.006 L 0.223,64.313 c -0.135,-0.03 -0.22,-0.164 -0.19,-0.299 0.03,-0.134 0.163,-0.219 0.298,-0.189 l 18.007,4.018 c 0.135,0.03 0.22,0.164 0.19,0.299 -0.026,0.116 -0.13,0.195 -0.244,0.195 z\"\n                    id=\"path11\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 10.332,86.973 c -0.044,0 -0.088,-0.012 -0.128,-0.035 -0.118,-0.071 -0.157,-0.225 -0.086,-0.343 l 9.311,-15.574 c 0.07,-0.121 0.223,-0.157 0.343,-0.087 0.118,0.071 0.157,0.225 0.086,0.343 l -9.311,15.574 c -0.047,0.079 -0.13,0.122 -0.215,0.122 z\"\n                    id=\"path12\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 81.993,68.337 c -0.115,0 -0.218,-0.079 -0.244,-0.195 -0.03,-0.135 0.055,-0.269 0.189,-0.299 l 18.007,-4.018 c 0.141,-0.03 0.269,0.056 0.299,0.189 0.03,0.135 -0.055,0.269 -0.189,0.299 l -18.007,4.018 c -0.019,0.004 -0.037,0.006 -0.055,0.006 z\"\n                    id=\"path13\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 89.945,86.973 c -0.085,0 -0.168,-0.043 -0.215,-0.122 L 80.418,71.277 c -0.07,-0.118 -0.032,-0.271 0.087,-0.343 0.116,-0.07 0.271,-0.034 0.343,0.087 l 9.312,15.574 c 0.07,0.118 0.032,0.271 -0.087,0.343 -0.04,0.023 -0.084,0.035 -0.128,0.035 z\"\n                    id=\"path14\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\" d=\"m 75.544,8.023 c 0.077,0 4.591,0 4.669,0 V 5.542 c -0.077,0 -4.591,0 -4.669,0 z\"\n                    id=\"path15\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\" d=\"m 20.449,8.023 c 0.077,0 4.591,0 4.669,0 V 5.542 c -0.077,0 -4.591,0 -4.669,0 z\"\n                    id=\"path16\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 35.725,10.134 c -2.729,0 -8.472,0 -10.607,0 v 1.532 c 2.135,0 7.878,0 10.607,0 2.58,-0.221 4.532,-0.867 4.532,-1.56 V 7.639 c 0,1.109 -1.953,2.142 -4.532,2.495 z\"\n                    id=\"path17\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 64.847,10.134 c 2.729,0 8.472,0 10.607,0 v 1.532 c -2.135,0 -7.878,0 -10.607,0 -2.58,-0.221 -4.532,-0.867 -4.532,-1.56 V 7.639 c 0,1.109 1.952,2.142 4.532,2.495 z\"\n                    id=\"path18\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <rect x=\"42.813\" y=\"21.833\" fill=\"#de9c5f\" width=\"14.553\" height=\"2.2160001\" id=\"rect18\"\n                    style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 57.365,5.683 v 5.81 c -1.38,0.092 -2.522,1.017 -2.942,2.276 H 45.765 C 45.354,12.538 44.252,11.628 42.912,11.502 V 5.683 C 41.239,6.092 40.11,6.814 40.11,7.639 v 14.454 c 0,0.825 1.129,1.547 2.802,1.956 v -5.917 c 1.305,-0.122 2.388,-0.987 2.824,-2.169 h 8.716 c 0.446,1.209 1.568,2.088 2.913,2.178 v 5.908 c 1.585,-0.045 2.742,-0.883 2.802,-1.956 V 7.639 c 0,-0.825 -1.128,-1.547 -2.802,-1.956 z\"\n                    id=\"path19\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <polygon fill=\"#de9c5f\" points=\"40.893,31.123 32.601,31.745 33.75,33.25 \" id=\"polygon19\"\n                    style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <polygon fill=\"#de9c5f\" points=\"66.527,33.25 67.676,31.745 59.384,31.123 \" id=\"polygon20\"\n                    style=\"fill:#4f4b4c;fill-opacity:1\" />\n            </g>\n        </g>\n        <g id=\"shadow\" transform=\"matrix(2.1295258,0,0,1.698255,317.4471,548.82117)\">\n            <path fill=\"#000000\"\n                d=\"m 50.138,95.04 c -7.705,0 -13.966,-6.117 -14.232,-13.757 -0.006,0.167 -0.025,0.331 -0.025,0.5 0,7.874 6.383,14.257 14.257,14.257 7.874,0 14.257,-6.383 14.257,-14.257 0,-0.169 -0.019,-0.333 -0.025,-0.5 -0.266,7.641 -6.526,13.757 -14.232,13.757 z\"\n                id=\"path20\" />\n            <path fill=\"#000000\" d=\"m 75.544,24.19 c 0.077,0 4.591,0 4.669,0 v -2.481 c -0.077,0 -4.591,0 -4.669,0 z\"\n                id=\"path21\" />\n            <path fill=\"#000000\" d=\"m 20.449,24.19 c 0.077,0 4.591,0 4.669,0 v -2.481 c -0.077,0 -4.591,0 -4.669,0 z\"\n                id=\"path22\" />\n            <path fill=\"#000000\"\n                d=\"m 35.725,19.597 c -2.729,0 -8.472,0 -10.607,0 v -1.532 c 2.135,0 7.878,0 10.607,0 2.58,0.221 4.532,0.867 4.532,1.56 v 2.468 c 0,-1.109 -1.953,-2.142 -4.532,-2.496 z\"\n                id=\"path23\" />\n            <path fill=\"#000000\"\n                d=\"m 64.847,19.597 c 2.729,0 8.472,0 10.607,0 v -1.532 c -2.135,0 -7.878,0 -10.607,0 -2.58,0.221 -4.532,0.867 -4.532,1.56 v 2.468 c 0,-1.109 1.952,-2.142 4.532,-2.496 z\"\n                id=\"path24\" />\n            <path fill=\"#000000\" stroke=\"#808080\" stroke-width=\"0.5\" stroke-miterlimit=\"10\"\n                d=\"m 42.912,18.132 c 1.305,-0.122 2.388,-0.987 2.824,-2.169 h 8.716 c 0.446,1.209 1.568,2.088 2.913,2.178\"\n                id=\"path25\" />\n            <path fill=\"#000000\" stroke=\"#808080\" stroke-width=\"0.5\" stroke-miterlimit=\"10\"\n                d=\"m 40.109,22.093 c 0,0.825 1.129,1.547 2.802,1.956 h 14.454 c 1.585,-0.045 2.742,-0.883 2.802,-1.956\"\n                id=\"path26\" />\n        </g>\n        <g id=\"hlight\" transform=\"matrix(2.1295258,0,0,1.698255,317.4471,548.82117)\">\n            <rect x=\"42.813\" y=\"21.583\" fill=\"#fbbc5a\" width=\"14.553\" height=\"0.5\" id=\"rect26\" />\n            <path fill=\"#fbbc5a\"\n                d=\"m 50.138,68.526 c 7.705,0 13.966,6.117 14.232,13.757 0.006,-0.167 0.025,-0.331 0.025,-0.5 0,-7.874 -6.383,-14.257 -14.257,-14.257 -7.874,0 -14.257,6.383 -14.257,14.257 0,0.169 0.019,0.333 0.025,0.5 0.266,-7.64 6.527,-13.757 14.232,-13.757 z\"\n                id=\"path27\" />\n            <path fill=\"#fbbc5a\"\n                d=\"m 54.603,14.019 h -9.018 l -0.057,-0.171 c -0.387,-1.16 -1.423,-1.983 -2.639,-2.097 l 0.047,-0.498 c 1.352,0.127 2.513,1.009 3.005,2.266 h 8.307 c 0.506,-1.296 1.704,-2.183 3.102,-2.275 l 0.033,0.499 c -1.255,0.083 -2.323,0.91 -2.722,2.105 z\"\n                id=\"path28\" />\n        </g>\n        <rect style=\"fill:url(#linearGradient23);stroke:#b9b9b9;stroke-width:0.321702;stroke-opacity:1\" id=\"rect21\"\n            width=\"362.92484\" height=\"22.785622\" x=\"4.9134321\" y=\"561.8728\" />\n        <rect style=\"fill:url(#linearGradient24);stroke:#b9b9b9;stroke-width:0.348738;stroke-opacity:1\" id=\"rect24\"\n            width=\"428.2247\" height=\"22.693512\" x=\"482.63129\" y=\"562.56909\" />\n        <rect\n            style=\"opacity:0.98;fill:#969696;fill-opacity:1;stroke:#050509;stroke-width:0.309607;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect838\" width=\"121.34098\" height=\"55.719585\" x=\"742.37805\" y=\"468.7778\" ry=\"2.3949981\" />\n        <rect x=\"746.43616\" y=\"493.00516\"\n            style=\"fill:#20a040;stroke:#000000;stroke-width:0.348947;stroke-miterlimit:4;stroke-dasharray:none\"\n            id=\"PIT_2001_BACK\" width=\"113.01409\" height=\"29.468307\" ry=\"5.1593323\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"716.47937\" y=\"517.23303\"\n            id=\"e3_texte\" transform=\"scale(1.0621556,0.94148165)\">PIT_2001</text>\n        <rect x=\"751.14069\" y=\"497.82928\" style=\"fill:#000000;stroke:#000000;stroke-width:1.24256px\" id=\"PB_PIT_2001\"\n            width=\"102.68724\" height=\"19.799892\" ry=\"5.8519979\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#00ffff;stroke-width:0.941499\" x=\"712.95599\" y=\"546.17664\"\n            id=\"PIT_2001_PV\" transform=\"scale(1.0621556,0.94148165)\">###.##</text>\n        <rect\n            style=\"opacity:0.98;fill:#969696;fill-opacity:1;stroke:#050509;stroke-width:0.311577;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect25\" width=\"120.61327\" height=\"56.771408\" x=\"606.36633\" y=\"468.06213\" ry=\"2.4402084\" />\n        <rect x=\"610.4234\" y=\"492.28845\"\n            style=\"fill:#20a040;stroke:#000000;stroke-width:0.348947;stroke-miterlimit:4;stroke-dasharray:none\"\n            id=\"TIT_2001_BACK\" width=\"113.01344\" height=\"29.468307\" ry=\"5.1593323\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"584.85327\" y=\"516.61151\"\n            id=\"text27\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">TIT_2001</text>\n        <rect x=\"615.77911\" y=\"496.72159\" style=\"fill:#000000;stroke:#000000;stroke-width:1.1803px\" id=\"PB_TIT_2001\"\n            width=\"102.15053\" height=\"19.802582\" ry=\"5.3080778\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#00ffff;stroke-width:0.941499\" x=\"585.92834\" y=\"543.56152\"\n            id=\"TIT_2001_PV\" transform=\"scale(1.0621556,0.94148165)\">###.##</text>\n        <rect\n            style=\"opacity:0.98;fill:#969696;fill-opacity:1;stroke:#050509;stroke-width:1.39188;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect25-6\" width=\"216.81451\" height=\"132.43634\" x=\"320.47061\" y=\"419.99622\" ry=\"5.6925182\" />\n        <rect x=\"414.79248\" y=\"449.86966\"\n            style=\"fill:#20a040;stroke:#000000;stroke-width:0.350796;stroke-miterlimit:4;stroke-dasharray:none\"\n            id=\"FIT_2001_FLOW_BACK\" width=\"114.22176\" height=\"29.466579\" ry=\"5.15903\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"365.13995\" y=\"465.06985\"\n            id=\"text27-2\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">UIT_2001</text>\n        <rect x=\"418.90073\" y=\"453.63004\" style=\"fill:#000000;stroke:#000000;stroke-width:1.22293px\" id=\"PB_FIT_2001\"\n            width=\"106.0258\" height=\"21.620897\" ry=\"5.4900417\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#00ffff;stroke-width:0.941499\" x=\"399.14825\" y=\"500.35895\"\n            id=\"UIT_2001_FLOW\" transform=\"scale(1.0621556,0.94148165)\">###.##</text>\n        <rect x=\"417.81348\" y=\"520.94904\" style=\"fill:#000000;stroke:#000000;stroke-width:1.18845px\" id=\"rect30\"\n            width=\"106.37447\" height=\"20.352203\" ry=\"5.167891\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#00ffff;stroke-width:0.941499\" x=\"401.24234\" y=\"570.04993\"\n            id=\"UIT_2001_TBATCH\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"344.18802\" y=\"500.49564\"\n            id=\"text32\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">Flujo</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"309.12512\" y=\"534.23145\"\n            id=\"text33\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">Densidad</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"333.71948\" y=\"569.65308\"\n            id=\"text34\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">Total</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"320.94705\" y=\"206.50562\"\n            id=\"text36\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\" />\n        <path id=\"path45\" style=\"fill:#0000ff;fill-opacity:1;stroke:#303130;stroke-width:0.711583;stroke-opacity:1\"\n            d=\"m 661.22266,530.0951 a 15.582288,12.974112 0 0 0 -15.58158,12.97403 15.582288,12.974112 0 0 0 8.90422,11.7084 v 8.16975 h 12.16971 v -7.77201 a 15.582288,12.974112 0 0 0 10.09093,-12.10614 15.582288,12.974112 0 0 0 -15.58328,-12.97403 z\" />\n        <ellipse style=\"fill:#4e802b;fill-opacity:1;stroke:#d6d6d6;stroke-width:1.11432;stroke-opacity:1\" id=\"path46\"\n            cx=\"661.01398\" cy=\"543.2218\" rx=\"10.866348\" ry=\"9.1685762\" />\n        <path id=\"path47\" style=\"fill:#0000ff;fill-opacity:1;stroke:#303130;stroke-width:0.711583;stroke-opacity:1\"\n            d=\"m 804.1012,529.01377 a 15.582288,12.974112 0 0 0 -15.58158,12.97404 15.582288,12.974112 0 0 0 8.90422,11.70839 v 8.16976 h 12.16971 v -7.77202 a 15.582288,12.974112 0 0 0 10.09093,-12.10613 15.582288,12.974112 0 0 0 -15.58328,-12.97404 z\" />\n        <ellipse style=\"fill:#4e802b;fill-opacity:1;stroke:#d6d6d6;stroke-width:1.11432;stroke-opacity:1\" id=\"ellipse47\"\n            cx=\"803.89258\" cy=\"542.14038\" rx=\"10.866348\" ry=\"9.1685762\" />\n        <rect style=\"fill:#1c1c1d;fill-opacity:1;stroke:#303130;stroke-width:0.756691;stroke-opacity:1\" id=\"rect47\"\n            width=\"4.5628271\" height=\"4.4093719\" x=\"936.94312\" y=\"515.44788\" />\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:1.15538;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect48\" width=\"113.59943\" height=\"21.148193\" x=\"609.87329\" y=\"470.59576\" ry=\"2.6970325\"\n            rx=\"2.0581615\" />\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:1.15538;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect49\" width=\"113.59943\" height=\"21.148193\" x=\"745.48755\" y=\"471.36307\" ry=\"2.6970325\"\n            rx=\"2.0581615\" />\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:0.706155;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect50\" width=\"205.1111\" height=\"20.789564\" x=\"326.16443\" y=\"423.46579\" ry=\"2.6512964\" rx=\"3.7161436\" />\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:0.757358;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect51\" width=\"205.38753\" height=\"97.289093\" x=\"326.02625\" y=\"446.55084\" ry=\"4.8515029\"\n            rx=\"3.7211518\" />\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:0.653929;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect55\" width=\"344.62949\" height=\"243.24173\" x=\"201.43588\" y=\"50.691113\" ry=\"10.026546\"\n            rx=\"8.8643131\" /><text style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\"\n            x=\"401.96143\" y=\"94.559341\" id=\"PRODUCTO1\" transform=\"scale(1.0621556,0.94148165)\"\n            onclick=\"\">###.##</text><text\n            style=\"font-size:8.52474px;font-family:Arial;fill:#ffeeaa;stroke-width:0.426236\" x=\"793.72864\" y=\"449.22867\"\n            id=\"text19\" transform=\"scale(0.82249443,1.2158137)\" inkscape:label=\"LABEL\">8888</text><text\n            style=\"font-size:8.52474px;font-family:Arial;fill:#ffeeaa;stroke-width:0.426236\" x=\"967.78326\" y=\"449.22867\"\n            id=\"text2\" transform=\"scale(0.82249443,1.2158137)\" inkscape:label=\"LABEL\">8888</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"207.18355\" y=\"75.966614\"\n            id=\"text35\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">CLIENTE</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"206.59512\" y=\"96.778252\"\n            id=\"text39\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">PRODUCTO.</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"206.59512\" y=\"117.58988\"\n            id=\"text44\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">FECHA:</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"287.71207\" y=\"116.00746\"\n            id=\"FECHA1\" transform=\"scale(1.0621556,0.94148165)\">DD-MM-AAAA HH:MM:SS</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"207.71681\" y=\"138.4015\"\n            id=\"text46\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">TIQUETE No.</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"206.59512\" y=\"162.39436\"\n            id=\"text47\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">RVP</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"206.59512\" y=\"183.02213\"\n            id=\"text48\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">MASA CORIOLIS</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"208.05702\" y=\"203.83376\"\n            id=\"text49\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">VOL. INDICADO</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"206.59512\" y=\"224.64537\"\n            id=\"text50\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">MASA VAPORES</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"401.96143\" y=\"73.377876\"\n            id=\"CLIENTE1\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"401.96143\" y=\"137.37282\"\n            id=\"TIQUETE1\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"401.96143\" y=\"158.55431\"\n            id=\"RVP1\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"401.96143\" y=\"179.73581\"\n            id=\"MASA1\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"401.96143\" y=\"200.91728\"\n            id=\"VOL_INDICADO1\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"401.96143\" y=\"222.09877\"\n            id=\"VAPORES1\" transform=\"scale(1.0621556,0.94148165)\">###.##</text>\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:0.653929;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect53\" width=\"344.41705\" height=\"243.3687\" x=\"610.06207\" y=\"50.570736\" ry=\"10.797618\" rx=\"12.354315\" />\n        <text style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"799.27209\" y=\"94.432281\"\n            id=\"PRODUCTO2\" transform=\"scale(1.0621556,0.94148165)\" onclick=\"\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"586.08624\" y=\"73.644524\"\n            id=\"text59\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">CLIENTE</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"585.49786\" y=\"94.416634\"\n            id=\"text60\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">PRODUCTO.</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"585.49786\" y=\"115.18877\"\n            id=\"text61\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">FECHA:</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"673.72437\" y=\"115.75333\"\n            id=\"FECHA2\" transform=\"scale(1.0621556,0.94148165)\">DD-MM-AAAA HH:MM:SS</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"586.61951\" y=\"135.96091\"\n            id=\"text63\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">TIQUETE No.</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"585.49786\" y=\"159.91425\"\n            id=\"text64\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">RVP</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"585.49786\" y=\"180.50247\"\n            id=\"text65\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">MASA CORIOLIS</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"586.95978\" y=\"201.2746\"\n            id=\"text66\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">VOL. INDICADO</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"585.49786\" y=\"222.04674\"\n            id=\"text67\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">MASA VAPORES</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"799.27209\" y=\"73.377876\"\n            id=\"CLIENTE2\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"799.27209\" y=\"136.99158\"\n            id=\"TIQUETE2\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"799.27209\" y=\"158.04597\"\n            id=\"RVP2\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"799.27209\" y=\"179.10037\"\n            id=\"MASA2\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"799.27209\" y=\"200.15479\"\n            id=\"VOL_INDICADO2\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"799.27209\" y=\"221.2092\"\n            id=\"VAPORES2\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"208.05702\" y=\"245.45699\"\n            id=\"text74\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">VOL. OBJETIVO</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"208.05702\" y=\"266.26868\"\n            id=\"text75\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">VOL. ACUAL</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"207.71681\" y=\"286.88721\"\n            id=\"text76\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">TEMPERATURA</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"206.59512\" y=\"308.96295\"\n            id=\"text77\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">PRESION</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"586.95978\" y=\"242.81886\"\n            id=\"text78\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">VOL. OBJETIVO</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"586.95978\" y=\"263.591\"\n            id=\"text79\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">VOL. ACUAL</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"586.61951\" y=\"284.17007\"\n            id=\"text80\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">TEMPERATURA</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"585.49786\" y=\"305.24295\"\n            id=\"text81\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">PRESION</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"401.96143\" y=\"243.28026\"\n            id=\"VOL_FULL1\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"401.96143\" y=\"264.46179\"\n            id=\"VOL_CURRENT1\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"401.96143\" y=\"285.64325\"\n            id=\"TEMPERATURE1\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"401.96143\" y=\"306.82474\"\n            id=\"PRESSURE1\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"799.27209\" y=\"242.2636\"\n            id=\"VOL_FULL2\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"799.27209\" y=\"263.31802\"\n            id=\"VOL_CURRENT2\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"799.27209\" y=\"284.37241\"\n            id=\"TEMPERATURE2\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"799.27209\" y=\"305.42682\"\n            id=\"PRESSURE2\" transform=\"scale(1.0621556,0.94148165)\">###.##</text>\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:0.653929;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rectM\" width=\"339.73895\" height=\"32.123138\" x=\"204.13187\" y=\"9.4288406\" ry=\"4.0966697\" rx=\"6.1552911\" />\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:0.653929;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rectN\" width=\"339.73895\" height=\"32.123138\" x=\"610.13824\" y=\"9.4288406\" ry=\"4.0966697\" rx=\"6.1552911\" />\n        <text style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"215.13992\" y=\"31.447716\"\n            id=\"PB_CREATE_CISTERNA1\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">CISTERNA\n            1</text><text style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"352.25049\"\n            y=\"33.694866\" id=\"ID_CISTERNA1\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"599.13513\" y=\"32.618221\"\n            id=\"PB_CREATE_CISTERNA2\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">CISTERNA\n            2</text><text style=\"font-size:18.83px;font-family:Arial;fill:#000080;stroke-width:0.941499\" x=\"756.9585\"\n            y=\"34.865379\" id=\"ID_CISTERNA2\" transform=\"scale(1.0621556,0.94148165)\">###.##</text>\n        <rect\n            style=\"opacity:0.98;fill:#969696;fill-opacity:1;stroke:#050509;stroke-width:0.311577;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect1\" width=\"120.61327\" height=\"56.771408\" x=\"157.28235\" y=\"467.64178\" ry=\"2.4402084\" />\n        <rect x=\"161.33946\" y=\"491.86813\"\n            style=\"fill:#20a040;stroke:#000000;stroke-width:0.348947;stroke-miterlimit:4;stroke-dasharray:none\"\n            id=\"DIT_2001_BACK\" width=\"113.01344\" height=\"29.468307\" ry=\"5.1593323\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"162.04893\" y=\"516.16473\"\n            id=\"text6\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">DIT_2001</text>\n        <rect x=\"166.69516\" y=\"496.30127\" style=\"fill:#000000;stroke:#000000;stroke-width:1.1803px\" id=\"PB_DIT_2001\"\n            width=\"102.15053\" height=\"19.802582\" ry=\"5.3080778\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#00ffff;stroke-width:0.941499\" x=\"163.12401\" y=\"543.11475\"\n            id=\"DIT_2001_PV\" transform=\"scale(1.0621556,0.94148165)\">###.##</text>\n        <path id=\"path33\" style=\"fill:#0000ff;fill-opacity:1;stroke:#303130;stroke-width:0.711583;stroke-opacity:1\"\n            d=\"m 212.13867,529.67478 a 15.582288,12.974112 0 0 0 -15.58158,12.97404 15.582288,12.974112 0 0 0 8.90422,11.70839 v 8.16976 h 12.1697 v -7.77202 a 15.582288,12.974112 0 0 0 10.09093,-12.10613 15.582288,12.974112 0 0 0 -15.58327,-12.97404 z\" />\n        <ellipse style=\"fill:#4e802b;fill-opacity:1;stroke:#d6d6d6;stroke-width:1.11432;stroke-opacity:1\" id=\"ellipse33\"\n            cx=\"211.93004\" cy=\"542.80151\" rx=\"10.866348\" ry=\"9.1685762\" />\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:1.15538;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect33\" width=\"113.59943\" height=\"21.148193\" x=\"160.78934\" y=\"470.17545\" ry=\"2.6970325\"\n            rx=\"2.0581615\" /><text style=\"font-size:8.52474px;font-family:Arial;fill:#ffeeaa;stroke-width:0.426236\"\n            x=\"247.72617\" y=\"448.88284\" id=\"text37\" transform=\"scale(0.82249443,1.2158137)\"\n            inkscape:label=\"LABEL\">8888</text>\n        <rect style=\"fill:url(#linearGradient37);stroke:#b9b9b9;stroke-width:0.368407;stroke-opacity:1\" id=\"rect37\"\n            width=\"476.81937\" height=\"22.744238\" x=\"172.88889\" y=\"717.23175\" />\n        <g id=\"g37\" transform=\"matrix(1.3211866,0,0,1.1594169,-78.734007,-117.60806)\">\n            <rect fill=\"none\" width=\"100\" height=\"100\" id=\"rect1-3\" x=\"551.3703\" y=\"680\" />\n            <rect fill=\"#c78163\" width=\"100\" height=\"100\" opacity=\"0\" id=\"rect2-7\" x=\"551.3703\" y=\"680\" />\n            <path fill=\"#c78163\" d=\"m 574.37027,707 c 0,-14.912 12.088,-27 27,-27 14.912,0 27,12.088 27,27 z\"\n                id=\"path2-5\" />\n            <rect x=\"596.3703\" y=\"700.16699\" fill=\"#c78163\" width=\"10\" height=\"29.833\" id=\"rect3-3\" />\n            <rect y=\"720.5\" fill=\"#c78163\" width=\"5.6669998\" height=\"19\" id=\"rect4-5\" x=\"551.3703\" />\n            <rect x=\"645.70325\" y=\"720.5\" fill=\"#c78163\" width=\"5.6669998\" height=\"19\" id=\"rect5-6\" />\n            <g fill=\"#c78163\" id=\"g6\" transform=\"translate(551.37027,680)\">\n                <rect x=\"70\" y=\"42\" fill=\"#006837\" width=\"30\" height=\"16\" id=\"rect6-2\" />\n            </g>\n            <g fill=\"#c78163\" id=\"g7\" transform=\"translate(551.37027,680)\">\n                <rect y=\"42\" fill=\"#006837\" width=\"30\" height=\"16\" id=\"rect7-9\" x=\"0\" />\n            </g>\n            <g fill=\"#c78163\" id=\"g8\" transform=\"translate(551.37027,680)\">\n                <path fill=\"#006837\"\n                    d=\"m 81.5,68.75 c -0.459,0 -0.918,-0.105 -1.342,-0.316 L 50,53.354 19.842,68.434 c -0.93,0.463 -2.034,0.415 -2.919,-0.132 C 16.039,67.755 15.5,66.79 15.5,65.75 v -31.5 c 0,-1.04 0.539,-2.005 1.423,-2.552 0.885,-0.547 1.988,-0.597 2.919,-0.131 L 50,46.646 80.158,31.567 c 0.93,-0.466 2.034,-0.417 2.919,0.131 0.885,0.546 1.423,1.512 1.423,2.552 v 31.5 c 0,1.04 -0.538,2.005 -1.423,2.552 C 82.596,68.6 82.049,68.75 81.5,68.75 Z\"\n                    id=\"path7-1\" />\n            </g>\n            <rect fill=\"#947365\" width=\"100\" height=\"100\" opacity=\"0\" id=\"rect8\" x=\"551.3703\" y=\"680\" />\n            <rect x=\"621.3703\" y=\"723\" fill=\"#947365\" width=\"30\" height=\"14\" id=\"rect9\" />\n            <rect y=\"723\" fill=\"#947365\" width=\"30\" height=\"14\" id=\"rect10\" x=\"551.3703\" />\n            <rect x=\"597.3703\" y=\"704.633\" fill=\"#947365\" width=\"8\" height=\"23.867001\" id=\"rect11\" />\n            <path fill=\"#947365\"\n                d=\"m 601.37027,681 c -14.024,0 -25.448,11.105 -25.975,25 h 51.949 c -0.526,-13.895 -11.95,-25 -25.974,-25 z\"\n                id=\"path11-7\" style=\"fill:#fb5700;fill-opacity:1\" />\n            <path fill=\"#947365\"\n                d=\"m 632.87027,747.75 c -0.306,0 -0.612,-0.07 -0.895,-0.211 l -30.605,-15.303 -30.605,15.303 c -0.62,0.309 -1.357,0.276 -1.946,-0.088 -0.59,-0.364 -0.949,-1.008 -0.949,-1.701 v -31.5 c 0,-0.693 0.359,-1.337 0.949,-1.701 0.589,-0.365 1.326,-0.398 1.946,-0.088 l 30.605,15.303 30.605,-15.303 c 0.619,-0.309 1.356,-0.276 1.946,0.088 0.589,0.364 0.948,1.008 0.948,1.701 v 31.5 c 0,0.693 -0.359,1.337 -0.948,1.701 -0.321,0.198 -0.686,0.299 -1.051,0.299 z\"\n                id=\"path12-0\" />\n            <rect fill=\"#de9c5f\" width=\"100\" height=\"100\" opacity=\"0\" id=\"rect12\" x=\"551.3703\" y=\"680\" />\n            <rect x=\"621.3703\" y=\"725\" fill=\"#de9c5f\" width=\"30\" height=\"10\" id=\"rect13\"\n                style=\"fill:#fb5700;fill-opacity:1;stroke:none;stroke-opacity:1\" />\n            <rect y=\"725\" fill=\"#de9c5f\" width=\"30\" height=\"10\" id=\"rect14\" x=\"551.3703\"\n                style=\"fill:#fb5700;fill-opacity:1\" />\n            <path fill=\"#de9c5f\"\n                d=\"m 569.87027,746.25 c -0.091,0 -0.183,-0.025 -0.263,-0.074 -0.147,-0.092 -0.237,-0.253 -0.237,-0.426 v -31.5 c 0,-0.173 0.09,-0.334 0.237,-0.425 0.147,-0.091 0.331,-0.099 0.486,-0.022 l 31.5,15.75 c 0.17,0.085 0.277,0.258 0.277,0.447 0,0.189 -0.107,0.362 -0.276,0.447 l -31.5,15.75 c -0.071,0.035 -0.147,0.053 -0.224,0.053 z\"\n                id=\"path14-6\" style=\"fill:#fb5700;fill-opacity:1\" />\n            <path fill=\"#de9c5f\"\n                d=\"m 632.87027,746.25 c -0.076,0 -0.153,-0.018 -0.224,-0.053 l -31.5,-15.75 c -0.169,-0.085 -0.276,-0.258 -0.276,-0.447 0,-0.189 0.107,-0.362 0.276,-0.447 l 31.5,-15.75 c 0.154,-0.078 0.34,-0.069 0.486,0.022 0.148,0.091 0.238,0.252 0.238,0.425 v 31.5 c 0,0.173 -0.09,0.334 -0.237,0.426 -0.08,0.049 -0.171,0.074 -0.263,0.074 z\"\n                id=\"path15-0\" style=\"fill:#fb5700;fill-opacity:1;stroke:none;stroke-opacity:1\" />\n            <rect fill=\"#fbbc5a\" width=\"100\" height=\"100\" opacity=\"0\" id=\"rect15\" x=\"551.3703\" y=\"680\" />\n            <rect x=\"621.3703\" y=\"726.5\" fill=\"#fbbc5a\" width=\"30\" height=\"7\" id=\"rect16\"\n                style=\"fill:#fb5700;fill-opacity:1\" />\n            <rect y=\"726.5\" fill=\"#fbbc5a\" width=\"30\" height=\"7\" id=\"rect17\" x=\"551.3703\"\n                style=\"fill:#fb5700;fill-opacity:1\" />\n            <polygon fill=\"#fbbc5a\" points=\"48.882,50 19,35.059 19,64.941 \" id=\"polygon17\"\n                transform=\"translate(551.37027,680)\" style=\"fill:#fb5700;fill-opacity:1\" />\n            <polygon fill=\"#fbbc5a\" points=\"81,35.059 51.118,50 81,64.941 \" id=\"polygon18\"\n                transform=\"translate(551.37027,680)\" style=\"fill:#fb5700;fill-opacity:1\" />\n        </g>\n        <g id=\"g40\" transform=\"matrix(0,0.87268639,1.0000159,0,-719.43017,570.99957)\">\n            <rect style=\"fill:url(#linearGradient40);stroke:none;stroke-width:0.110782;stroke-opacity:1\" id=\"rect40\"\n                width=\"37.22176\" height=\"26.345909\" x=\"-891.59186\" y=\"-9.3277912\" transform=\"rotate(-90)\" />\n            <path id=\"rect39\" style=\"fill:url(#linearGradient39);stroke:none;stroke-width:0.0977772;stroke-opacity:1\"\n                d=\"m 19.810224,859.80947 v 26.34306 h -5.584212 c -5.1340393,0 -9.2670162,-5.87434 -9.2670162,-13.17153 0,-7.29719 4.1329769,-13.17153 9.2670162,-13.17153 z\" />\n            <rect style=\"fill:url(#linearGradient38);stroke:none;stroke-width:0.0633333;stroke-opacity:1\" id=\"rect38\"\n                width=\"12.165281\" height=\"26.345909\" x=\"19.811279\" y=\"859.80804\" />\n        </g>\n        <g id=\"g45\" transform=\"matrix(1.0000159,0,0,0.87268639,171.96083,13.324763)\">\n            <g id=\"g44\" transform=\"translate(-50.44206,29.042398)\">\n                <path id=\"rect41\" style=\"fill:url(#linearGradient42);stroke:none;stroke-width:0.110782;stroke-opacity:1\"\n                    d=\"m 20.148438,766.11719 v 18.00586 c -7.74e-4,6.39196 8.067249,17.25172 18.019531,17.25195 2.903408,-0.01 5.759387,1.52979 8.326172,0.6582 v -35.91601 z\" />\n                <rect style=\"fill:url(#linearGradient44);stroke:none;stroke-width:0.0633333;stroke-opacity:1\"\n                    id=\"rect42\" width=\"12.165281\" height=\"26.345909\" x=\"49.287464\" y=\"-803.90143\"\n                    transform=\"scale(1,-1)\" />\n            </g>\n            <path id=\"path41\" style=\"fill:url(#linearGradient43);stroke:none;stroke-width:0.0977772;stroke-opacity:1\"\n                d=\"m 4.4296161,832.94383 v -26.34306 h -5.584212 c -5.134039,0 -9.2670161,5.87434 -9.2670161,13.17153 0,7.29719 4.1329771,13.17153 9.2670161,13.17153 z\" />\n        </g>\n        <rect style=\"fill:url(#linearGradient45);stroke:#b9b9b9;stroke-width:0.188771;stroke-opacity:1\" id=\"rect45\"\n            width=\"108.16829\" height=\"26.323341\" x=\"-707.1615\" y=\"140.31349\" transform=\"rotate(-90)\" />\n        <g id=\"g64\" transform=\"matrix(1.3211866,0,0,1.1594169,174.90577,-273.58155)\">\n            <rect fill=\"none\" width=\"100\" height=\"100\" id=\"rect2\" x=\"551.3703\" y=\"680\" />\n            <rect fill=\"#c78163\" width=\"100\" height=\"100\" opacity=\"0\" id=\"rect3\" x=\"551.3703\" y=\"680\" />\n            <path fill=\"#c78163\" d=\"m 574.37027,707 c 0,-14.912 12.088,-27 27,-27 14.912,0 27,12.088 27,27 z\"\n                id=\"path4\" />\n            <rect x=\"596.3703\" y=\"700.16699\" fill=\"#c78163\" width=\"10\" height=\"29.833\" id=\"rect4\" />\n            <rect y=\"720.5\" fill=\"#c78163\" width=\"5.6669998\" height=\"19\" id=\"rect5\" x=\"551.3703\" />\n            <rect x=\"645.70325\" y=\"720.5\" fill=\"#c78163\" width=\"5.6669998\" height=\"19\" id=\"rect19\" />\n            <g fill=\"#c78163\" id=\"g20\" transform=\"translate(551.37027,680)\">\n                <rect x=\"70\" y=\"42\" fill=\"#006837\" width=\"30\" height=\"16\" id=\"rect20\" />\n            </g>\n            <g fill=\"#c78163\" id=\"g22\" transform=\"translate(551.37027,680)\">\n                <rect y=\"42\" fill=\"#006837\" width=\"30\" height=\"16\" id=\"rect22\" x=\"0\" />\n            </g>\n            <g fill=\"#c78163\" id=\"g34\" transform=\"translate(551.37027,680)\">\n                <path fill=\"#006837\"\n                    d=\"m 81.5,68.75 c -0.459,0 -0.918,-0.105 -1.342,-0.316 L 50,53.354 19.842,68.434 c -0.93,0.463 -2.034,0.415 -2.919,-0.132 C 16.039,67.755 15.5,66.79 15.5,65.75 v -31.5 c 0,-1.04 0.539,-2.005 1.423,-2.552 0.885,-0.547 1.988,-0.597 2.919,-0.131 L 50,46.646 80.158,31.567 c 0.93,-0.466 2.034,-0.417 2.919,0.131 0.885,0.546 1.423,1.512 1.423,2.552 v 31.5 c 0,1.04 -0.538,2.005 -1.423,2.552 C 82.596,68.6 82.049,68.75 81.5,68.75 Z\"\n                    id=\"path34\" />\n            </g>\n            <rect fill=\"#947365\" width=\"100\" height=\"100\" opacity=\"0\" id=\"rect34\" x=\"551.3703\" y=\"680\" />\n            <rect x=\"621.3703\" y=\"723\" fill=\"#947365\" width=\"30\" height=\"14\" id=\"rect35\" />\n            <rect y=\"723\" fill=\"#947365\" width=\"30\" height=\"14\" id=\"rect36\" x=\"551.3703\" />\n            <rect x=\"597.3703\" y=\"704.633\" fill=\"#947365\" width=\"8\" height=\"23.867001\" id=\"rect43\" />\n            <path fill=\"#947365\"\n                d=\"m 601.37027,681 c -14.024,0 -25.448,11.105 -25.975,25 h 51.949 c -0.526,-13.895 -11.95,-25 -25.974,-25 z\"\n                id=\"path43\" style=\"fill:#fb5700;fill-opacity:1\" />\n            <path fill=\"#947365\"\n                d=\"m 632.87027,747.75 c -0.306,0 -0.612,-0.07 -0.895,-0.211 l -30.605,-15.303 -30.605,15.303 c -0.62,0.309 -1.357,0.276 -1.946,-0.088 -0.59,-0.364 -0.949,-1.008 -0.949,-1.701 v -31.5 c 0,-0.693 0.359,-1.337 0.949,-1.701 0.589,-0.365 1.326,-0.398 1.946,-0.088 l 30.605,15.303 30.605,-15.303 c 0.619,-0.309 1.356,-0.276 1.946,0.088 0.589,0.364 0.948,1.008 0.948,1.701 v 31.5 c 0,0.693 -0.359,1.337 -0.948,1.701 -0.321,0.198 -0.686,0.299 -1.051,0.299 z\"\n                id=\"path44\" />\n            <rect fill=\"#de9c5f\" width=\"100\" height=\"100\" opacity=\"0\" id=\"rect44\" x=\"551.3703\" y=\"680\" />\n            <rect x=\"621.3703\" y=\"725\" fill=\"#de9c5f\" width=\"30\" height=\"10\" id=\"rect52\"\n                style=\"fill:#fb5700;fill-opacity:1;stroke:none;stroke-opacity:1\" />\n            <rect y=\"725\" fill=\"#de9c5f\" width=\"30\" height=\"10\" id=\"rect56\" x=\"551.3703\"\n                style=\"fill:#fb5700;fill-opacity:1\" />\n            <path fill=\"#de9c5f\"\n                d=\"m 569.87027,746.25 c -0.091,0 -0.183,-0.025 -0.263,-0.074 -0.147,-0.092 -0.237,-0.253 -0.237,-0.426 v -31.5 c 0,-0.173 0.09,-0.334 0.237,-0.425 0.147,-0.091 0.331,-0.099 0.486,-0.022 l 31.5,15.75 c 0.17,0.085 0.277,0.258 0.277,0.447 0,0.189 -0.107,0.362 -0.276,0.447 l -31.5,15.75 c -0.071,0.035 -0.147,0.053 -0.224,0.053 z\"\n                id=\"path60\" style=\"fill:#fb5700;fill-opacity:1\" />\n            <path fill=\"#de9c5f\"\n                d=\"m 632.87027,746.25 c -0.076,0 -0.153,-0.018 -0.224,-0.053 l -31.5,-15.75 c -0.169,-0.085 -0.276,-0.258 -0.276,-0.447 0,-0.189 0.107,-0.362 0.276,-0.447 l 31.5,-15.75 c 0.154,-0.078 0.34,-0.069 0.486,0.022 0.148,0.091 0.238,0.252 0.238,0.425 v 31.5 c 0,0.173 -0.09,0.334 -0.237,0.426 -0.08,0.049 -0.171,0.074 -0.263,0.074 z\"\n                id=\"path61\" style=\"fill:#fb5700;fill-opacity:1;stroke:none;stroke-opacity:1\" />\n            <rect fill=\"#fbbc5a\" width=\"100\" height=\"100\" opacity=\"0\" id=\"rect61\" x=\"551.3703\" y=\"680\" />\n            <rect x=\"621.3703\" y=\"726.5\" fill=\"#fbbc5a\" width=\"30\" height=\"7\" id=\"rect62\"\n                style=\"fill:#fb5700;fill-opacity:1\" />\n            <rect y=\"726.5\" fill=\"#fbbc5a\" width=\"30\" height=\"7\" id=\"rect63\" x=\"551.3703\"\n                style=\"fill:#fb5700;fill-opacity:1\" />\n            <polygon fill=\"#fbbc5a\" points=\"19,64.941 48.882,50 19,35.059 \" id=\"polygon63\"\n                transform=\"translate(551.37027,680)\" style=\"fill:#fb5700;fill-opacity:1\" />\n            <polygon fill=\"#fbbc5a\" points=\"81,64.941 81,35.059 51.118,50 \" id=\"polygon64\"\n                transform=\"translate(551.37027,680)\" style=\"fill:#fb5700;fill-opacity:1\" />\n        </g>\n        <rect style=\"fill:url(#linearGradient64);stroke:#b9b9b9;stroke-width:0.143945;stroke-opacity:1\" id=\"rect64\"\n            width=\"72.110519\" height=\"22.959755\" x=\"781.92114\" y=\"717.69049\" />\n        <rect style=\"fill:url(#linearGradient65);stroke:#b9b9b9;stroke-width:0.143945;stroke-opacity:1\" id=\"rect65\"\n            width=\"72.110519\" height=\"22.959755\" x=\"1035.4875\" y=\"561.31287\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#45f0f7;fill-opacity:1;stroke-width:0.941499\" x=\"1046.4139\"\n            y=\"615.20154\" id=\"text68\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">A CISTERNA</text>\n        <g id=\"g88\" transform=\"matrix(0.53028617,0,0,0.51781626,920.2557,133.75026)\">\n            <g id=\"g70\" transform=\"matrix(1.9944138,0,0,1.7696592,214.04262,532.07217)\"\n                style=\"fill:#9d3600;fill-opacity:1\">\n                <path fill=\"#c78163\"\n                    d=\"m 67.676,31.745 -8.292,-0.622 -3.128,-3.128 0.651,-3.817 c 2.004,-0.37 3.408,-1.164 3.408,-2.086 0,-1.108 1.851,-2.141 4.297,-2.495 2.346,0 11.757,0 11.91,0 0.64,0 1.159,-2.118 1.159,-4.732 0,-2.614 -0.519,-4.732 -1.159,-4.732 -0.153,0 -9.563,0 -11.91,0 -2.446,-0.354 -4.298,-1.387 -4.298,-2.495 0,-1.271 -2.655,-2.311 -5.899,-2.311 h -8.259 c -3.245,0 -5.899,1.04 -5.899,2.311 0,1.108 -1.952,2.142 -4.532,2.495 -3.361,0 -11.291,0 -11.428,0 -0.64,0 -1.159,2.118 -1.159,4.732 0,2.614 0.519,4.732 1.159,4.732 0.137,0 8.068,0 11.428,0 2.58,0.354 4.532,1.387 4.532,2.495 0,0.873 1.266,1.627 3.102,2.02 l 0.662,3.882 -3.127,3.128 -8.292,0.622 L 0.277,64.069 10.332,86.722 H 89.945 L 100,64.069 Z M 80.634,71.149 H 19.643 l -1.359,-3.062 25.33,-25.33 0.356,-4.746 3.191,-3.191 c 1.653,-1.653 4.333,-1.653 5.985,0 l 3.159,3.159 0.359,4.778 25.33,25.33 z\"\n                    id=\"path68\" style=\"fill:#9d3600;fill-opacity:1\" />\n                <path fill=\"#c78163\" d=\"m 75.544,24.19 c 0.077,0 4.591,0 4.669,0 V 5.542 c -0.077,0 -4.591,0 -4.669,0 z\"\n                    id=\"path69\" style=\"fill:#9d3600;fill-opacity:1\" />\n                <path fill=\"#c78163\" d=\"m 20.449,24.19 c 0.077,0 4.591,0 4.669,0 V 5.542 c -0.077,0 -4.591,0 -4.669,0 z\"\n                    id=\"path70\" style=\"fill:#9d3600;fill-opacity:1\" />\n            </g>\n            <g id=\"g75\" transform=\"matrix(2.1295258,0,0,1.7696592,206.00506,532.07217)\">\n                <linearGradient class=\"linear\" id=\"linearGradient71\" gradientUnits=\"userSpaceOnUse\" x1=\"50.138401\"\n                    y1=\"86.6707\" x2=\"50.138401\" y2=\"71.114403\">\n\n\n                    <stop offset=\"0\" stop-color=\"#de9c5f\" id=\"stop70\" />\n                    <stop offset=\"1\" stop-color=\"#000000\" id=\"stop71\" />\n                </linearGradient>\n                <polygon class=\"linear\" fill=\"url(#SVGID_1_massflowmeter)\"\n                    points=\"80.634,71.149 89.945,86.722 10.332,86.722 19.643,71.149 \" id=\"polygon71\"\n                    style=\"fill:url(#linearGradient88)\" />\n                <linearGradient class=\"linear\" id=\"linearGradient73\" gradientUnits=\"userSpaceOnUse\" x1=\"72.862198\"\n                    y1=\"58.882999\" x2=\"83.862198\" y2=\"47.882999\">\n\n\n                    <stop offset=\"0\" stop-color=\"#de9c5f\" id=\"stop72\" />\n                    <stop offset=\"1\" stop-color=\"#000000\" id=\"stop73\" />\n                </linearGradient>\n                <polygon class=\"linear\" fill=\"url(#SVGID_2_massflowmeter)\"\n                    points=\"56.663,42.757 67.676,31.745 100,64.069 81.993,68.087 \" id=\"polygon73\"\n                    style=\"fill:url(#linearGradient89)\" />\n                <linearGradient class=\"linear\" id=\"linearGradient75\" gradientUnits=\"userSpaceOnUse\" x1=\"27.6476\"\n                    y1=\"58.456501\" x2=\"16.314199\" y2=\"47.789902\">\n\n\n                    <stop offset=\"0\" stop-color=\"#de9c5f\" id=\"stop74\" />\n                    <stop offset=\"1\" stop-color=\"#000000\" id=\"stop75\" />\n                </linearGradient>\n                <polygon class=\"linear\" fill=\"url(#SVGID_3_massflowmeter)\"\n                    points=\"32.601,31.745 43.613,42.757 18.284,68.087 0.277,64.069 \" id=\"polygon75\"\n                    style=\"fill:url(#linearGradient90)\" />\n            </g>\n            <g id=\"g77\" transform=\"matrix(2.1295258,0,0,1.7696592,206.00506,532.07217)\">\n                <circle fill=\"#947365\" cx=\"50.138\" cy=\"81.782997\" r=\"12.094\" id=\"circle75\" />\n                <polygon fill=\"#947365\" points=\"19.643,71.149 18.284,68.087 0.277,64.069 10.332,86.722 \"\n                    id=\"polygon76\" />\n                <polygon fill=\"#947365\" points=\"81.993,68.087 80.634,71.149 89.945,86.722 100,64.069 \" id=\"polygon77\" />\n            </g>\n            <g id=\"g87\" transform=\"matrix(2.1295258,0,0,1.7696592,206.00506,532.07217)\"\n                style=\"fill:#4f4b4c;fill-opacity:1\">\n                <path fill=\"#de9c5f\"\n                    d=\"m 50.138,67.526 c -7.874,0 -14.257,6.383 -14.257,14.257 0,7.874 6.383,14.257 14.257,14.257 7.874,0 14.257,-6.383 14.257,-14.257 0,-7.874 -6.383,-14.257 -14.257,-14.257 z m 0,26.351 c -6.679,0 -12.094,-5.415 -12.094,-12.094 0,-6.679 5.415,-12.094 12.094,-12.094 6.679,0 12.094,5.415 12.094,12.094 0,6.679 -5.414,12.094 -12.094,12.094 z\"\n                    id=\"path77\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 18.284,68.337 c -0.018,0 -0.036,-0.002 -0.054,-0.006 L 0.223,64.313 c -0.135,-0.03 -0.22,-0.164 -0.19,-0.299 0.03,-0.134 0.163,-0.219 0.298,-0.189 l 18.007,4.018 c 0.135,0.03 0.22,0.164 0.19,0.299 -0.026,0.116 -0.13,0.195 -0.244,0.195 z\"\n                    id=\"path78\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 10.332,86.973 c -0.044,0 -0.088,-0.012 -0.128,-0.035 -0.118,-0.071 -0.157,-0.225 -0.086,-0.343 l 9.311,-15.574 c 0.07,-0.121 0.223,-0.157 0.343,-0.087 0.118,0.071 0.157,0.225 0.086,0.343 l -9.311,15.574 c -0.047,0.079 -0.13,0.122 -0.215,0.122 z\"\n                    id=\"path79\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 81.993,68.337 c -0.115,0 -0.218,-0.079 -0.244,-0.195 -0.03,-0.135 0.055,-0.269 0.189,-0.299 l 18.007,-4.018 c 0.141,-0.03 0.269,0.056 0.299,0.189 0.03,0.135 -0.055,0.269 -0.189,0.299 l -18.007,4.018 c -0.019,0.004 -0.037,0.006 -0.055,0.006 z\"\n                    id=\"path80\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 89.945,86.973 c -0.085,0 -0.168,-0.043 -0.215,-0.122 L 80.418,71.277 c -0.07,-0.118 -0.032,-0.271 0.087,-0.343 0.116,-0.07 0.271,-0.034 0.343,0.087 l 9.312,15.574 c 0.07,0.118 0.032,0.271 -0.087,0.343 -0.04,0.023 -0.084,0.035 -0.128,0.035 z\"\n                    id=\"path81\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\" d=\"m 75.544,8.023 c 0.077,0 4.591,0 4.669,0 V 5.542 c -0.077,0 -4.591,0 -4.669,0 z\"\n                    id=\"path82\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\" d=\"m 20.449,8.023 c 0.077,0 4.591,0 4.669,0 V 5.542 c -0.077,0 -4.591,0 -4.669,0 z\"\n                    id=\"path83\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 35.725,10.134 c -2.729,0 -8.472,0 -10.607,0 v 1.532 c 2.135,0 7.878,0 10.607,0 2.58,-0.221 4.532,-0.867 4.532,-1.56 V 7.639 c 0,1.109 -1.953,2.142 -4.532,2.495 z\"\n                    id=\"path84\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 64.847,10.134 c 2.729,0 8.472,0 10.607,0 v 1.532 c -2.135,0 -7.878,0 -10.607,0 -2.58,-0.221 -4.532,-0.867 -4.532,-1.56 V 7.639 c 0,1.109 1.952,2.142 4.532,2.495 z\"\n                    id=\"path85\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <rect x=\"42.813\" y=\"21.833\" fill=\"#de9c5f\" width=\"14.553\" height=\"2.2160001\" id=\"rect85\"\n                    style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <path fill=\"#de9c5f\"\n                    d=\"m 57.365,5.683 v 5.81 c -1.38,0.092 -2.522,1.017 -2.942,2.276 H 45.765 C 45.354,12.538 44.252,11.628 42.912,11.502 V 5.683 C 41.239,6.092 40.11,6.814 40.11,7.639 v 14.454 c 0,0.825 1.129,1.547 2.802,1.956 v -5.917 c 1.305,-0.122 2.388,-0.987 2.824,-2.169 h 8.716 c 0.446,1.209 1.568,2.088 2.913,2.178 v 5.908 c 1.585,-0.045 2.742,-0.883 2.802,-1.956 V 7.639 c 0,-0.825 -1.128,-1.547 -2.802,-1.956 z\"\n                    id=\"path86\" style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <polygon fill=\"#de9c5f\" points=\"40.893,31.123 32.601,31.745 33.75,33.25 \" id=\"polygon86\"\n                    style=\"fill:#4f4b4c;fill-opacity:1\" />\n                <polygon fill=\"#de9c5f\" points=\"66.527,33.25 67.676,31.745 59.384,31.123 \" id=\"polygon87\"\n                    style=\"fill:#4f4b4c;fill-opacity:1\" />\n            </g>\n        </g><text style=\"font-size:18.83px;font-family:Arial;fill:#45f0f7;fill-opacity:1;stroke-width:0.941499\"\n            x=\"815.67474\" y=\"775.89697\" id=\"text95\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">A\n            GLP</text>\n        <rect style=\"fill:url(#linearGradient95);stroke:#b9b9b9;stroke-width:0.128051;stroke-opacity:1\" id=\"rect95\"\n            width=\"72.126747\" height=\"18.165081\" x=\"1119.4387\" y=\"411.79764\" />\n        <rect style=\"fill:url(#linearGradient96);stroke:#b9b9b9;stroke-width:0.128051;stroke-opacity:1\" id=\"rect96\"\n            width=\"72.126747\" height=\"18.165081\" x=\"983.58838\" y=\"413.4465\" />\n        <rect\n            style=\"opacity:0.98;fill:#969696;fill-opacity:1;stroke:#050509;stroke-width:1.40431;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect97\" width=\"216.80182\" height=\"134.8215\" x=\"989.48181\" y=\"274.0546\" ry=\"5.7950401\" />\n        <rect x=\"1083.7975\" y=\"303.92194\"\n            style=\"fill:#20a040;stroke:#000000;stroke-width:0.350796;stroke-miterlimit:4;stroke-dasharray:none\"\n            id=\"rect98\" width=\"114.22176\" height=\"29.466579\" ry=\"5.15903\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"994.99603\" y=\"310.05057\"\n            id=\"text98\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">UIT_2003</text>\n        <rect x=\"1087.9056\" y=\"307.68231\" style=\"fill:#000000;stroke:#000000;stroke-width:1.22293px\" id=\"rect99\"\n            width=\"106.0258\" height=\"21.620897\" ry=\"5.4900417\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#00ffff;stroke-width:0.941499\" x=\"1029.0044\" y=\"345.33963\"\n            id=\"UIT_2003_FLOW\" transform=\"scale(1.0621556,0.94148165)\">###.##</text>\n        <rect x=\"1088.2112\" y=\"339.27579\" style=\"fill:#000000;stroke:#000000;stroke-width:1.18243px\" id=\"rect100\"\n            width=\"105.26901\" height=\"20.357832\" ry=\"5.1693211\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#00ffff;stroke-width:0.941499\" x=\"1030.9208\" y=\"377.06342\"\n            id=\"UIT_2003_DENSITY\" transform=\"scale(1.0621556,0.94148165)\">###.##</text>\n        <rect x=\"1086.8185\" y=\"367.3241\" style=\"fill:#000000;stroke:#000000;stroke-width:1.18845px\" id=\"rect101\"\n            width=\"106.37447\" height=\"20.352203\" ry=\"5.167891\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#00ffff;stroke-width:0.941499\" x=\"1030.1809\" y=\"407.72592\"\n            id=\"UIT_2003_TOTAL\" transform=\"scale(1.0621556,0.94148165)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"974.04413\" y=\"345.47632\"\n            id=\"text102\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">Flujo</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"938.9812\" y=\"377.17401\"\n            id=\"text103\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">Densidad</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#000000;stroke-width:0.941499\" x=\"963.57556\" y=\"404.44144\"\n            id=\"text104\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">Total</text>\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:0.706155;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect104\" width=\"205.1111\" height=\"20.789564\" x=\"995.16931\" y=\"277.51807\" ry=\"2.6512964\"\n            rx=\"3.7161436\" />\n        <rect\n            style=\"opacity:0.98;fill:none;fill-opacity:1;stroke:#050505;stroke-width:0.772577;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect105\" width=\"205.37198\" height=\"101.24598\" x=\"995.03882\" y=\"300.61057\" ry=\"5.04882\" rx=\"3.7208705\" />\n        <g id=\"PB_LLENAR1\" transform=\"matrix(1,0,0,0.95965085,147.30387,0.07064623)\">\n            <rect\n                style=\"fill:#d5d6d6;fill-opacity:0.980392;stroke:#080807;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1\"\n                id=\"rect106\" width=\"90\" height=\"23\" x=\"77.25396\" y=\"314.3736\" rx=\"4.1175871\" ry=\"4.0392413\" /><text\n                style=\"font-size:17.1456px;font-family:Arial;fill:#000000;fill-opacity:1;stroke-width:0.857277\"\n                x=\"79.542839\" y=\"354.96265\" id=\"text106\" transform=\"scale(1.072359,0.93252353)\">LLENAR</text>\n        </g>\n        <g id=\"PB_PAUSAR1\" transform=\"matrix(1,0,0,0.95965085,147.30387,0.07064623)\">\n            <rect\n                style=\"fill:#d4d5d5;fill-opacity:1;stroke:#7e7d7c;stroke-width:1.389;stroke-dasharray:none;stroke-opacity:1\"\n                id=\"rect107\" width=\"90\" height=\"23\" x=\"173.25397\" y=\"314.3736\" rx=\"2.6002176\" ry=\"3.2805564\" /><text\n                style=\"font-size:17.1318px;font-family:Arial;fill:#000000;fill-opacity:1;stroke-width:0.856589\"\n                x=\"164.3788\" y=\"365.03033\" id=\"text107\" transform=\"scale(1.1026784,0.90688274)\">PAUSAR</text>\n        </g>\n        <g id=\"PB_CERRAR1\" transform=\"matrix(1,0,0,0.95965085,147.30387,0.07064623)\">\n            <rect\n                style=\"fill:#d4d5d5;fill-opacity:1;stroke:#7e7d7c;stroke-width:1.39729;stroke-dasharray:none;stroke-opacity:1\"\n                id=\"rect108\" width=\"91.110321\" height=\"22.991711\" x=\"269.25812\" y=\"314.37775\" rx=\"3.0012867\"\n                ry=\"4.3397856\" /><text\n                style=\"font-size:17.0382px;font-family:Arial;fill:#000000;fill-opacity:1;stroke-width:0.851907\"\n                x=\"250.56654\" y=\"362.89777\" id=\"text108\" transform=\"scale(1.0966533,0.91186521)\">CERRAR</text>\n        </g>\n        <rect\n            style=\"fill:#cacccc;fill-opacity:1;stroke:#151418;stroke-width:0.517284;stroke-dasharray:none;stroke-opacity:0.906977\"\n            id=\"PB_CISTERNA1\" width=\"211.92793\" height=\"43.265659\" x=\"212.59735\" y=\"333.45181\" rx=\"11.536555\"\n            ry=\"10.425867\" />\n        <ellipse\n            style=\"fill:#d5d3d6;fill-opacity:1;stroke:#141310;stroke-width:5.87771;stroke-dasharray:none;stroke-opacity:0.906977\"\n            id=\"circle109\" cx=\"255.76358\" cy=\"403.42215\" rx=\"7.9448342\" ry=\"7.6242671\" />\n        <path id=\"rect110\"\n            style=\"fill:#2e302f;fill-opacity:1;stroke:#4a4c4e;stroke-width:0.763532;stroke-dasharray:none;stroke-opacity:0.906977\"\n            d=\"m 217.73228,379.04514 c -0.78945,0 -1.42382,0.60878 -1.42382,1.36638 v 4.69891 h 20.44336 c 2.06204,0 3.72265,1.87934 3.72265,4.21534 v 8.67059 l 2.7461,0.01 a 14.691795,14.098994 0 0 1 12.73437,-7.1374 14.691795,14.098994 0 0 1 1.01367,0.0375 c 0.2042,-0.0139 0.41088,-0.0559 0.61328,-0.0562 2.97236,6.5e-4 5.95425,0.51453 8.32618,3.08138 0.59837,0.59528 1.11944,1.42302 1.56835,2.29417 a 14.691795,14.098994 0 0 1 1.60938,2.42724 l 3.79492,-0.0487 a 14.691795,14.098994 0 0 1 13.07422,-7.73531 14.691795,14.098994 0 0 1 13.0332,7.59848 l 5.75977,-0.0244 v -10.50743 c 0,-1.96247 1.66061,-3.54058 3.72266,-3.54058 h 84.10937 c 2.06204,0 3.72266,1.57811 3.72266,3.54058 v 10.1157 l 4.90234,-0.0206 a 14.691795,14.098994 0 0 1 12.75,-7.16177 14.691795,14.098994 0 0 1 12.7207,7.05119 l 1.0586,-0.004 c 0.78944,-0.004 1.42578,-0.61066 1.42578,-1.36825 v -7.83278 h -27.89844 c -0.9939,0 -1.79492,-1.57115 -1.79492,-3.52184 v -5.55736 c 0,-0.20145 0.0109,-0.39838 0.0273,-0.59041 z\" />\n        <ellipse\n            style=\"fill:#d5d3d6;fill-opacity:1;stroke:#252421;stroke-width:5.87771;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"circle113\" cx=\"285.13577\" cy=\"403.42215\" rx=\"7.9448342\" ry=\"7.6242671\" />\n        <ellipse\n            style=\"fill:#d5d3d6;fill-opacity:1;stroke:#252421;stroke-width:5.87771;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"circle114\" cx=\"414.09879\" cy=\"403.42215\" rx=\"7.9448342\" ry=\"7.6242671\" />\n        <rect\n            style=\"fill:#7d7e10;fill-opacity:1;stroke:#4a4c4e;stroke-width:0.622804;stroke-dasharray:none;stroke-opacity:0.906977\"\n            id=\"rect114\" width=\"30.609106\" height=\"12.884856\" x=\"397.11963\" y=\"378.78207\" rx=\"1.6553366\"\n            ry=\"3.6006863\" />\n        <path\n            style=\"fill:#7d1910;fill-opacity:0.905979;stroke:#bec14e;stroke-width:0.519197;stroke-dasharray:none;stroke-opacity:0.906977\"\n            d=\"m 426.14275,350.63876 19.84901,-0.2302 c 9.21337,0.70709 17.02762,5.20479 23.44277,13.49309 l 7.04385,15.03402 24.50614,6.45256 0.48372,17.75647 -6.16012,0.31446 0.20108,-5.28538 c -8.50759,-12.15398 -17.10265,-9.90192 -24.05888,-1.32726 l -1.31328,5.39379 -1.25916,2.35962 -12.8892,0.33816 -1.11296,-9.28631 -27.13598,0.29322 -0.011,-4.27805 c 0,0 -1.56955,-41.74816 -1.58605,-41.02819 z\"\n            id=\"path115\" sodipodi:nodetypes=\"cccccccccccccccsc\" />\n        <rect\n            style=\"fill:#d8cfd1;fill-opacity:0.894118;stroke:#9b9b99;stroke-width:0.548661;stroke-dasharray:none;stroke-opacity:0.906977\"\n            id=\"rect115\" width=\"22.834776\" height=\"12.041784\" x=\"431.45773\" y=\"366.99588\" rx=\"1.5379061\"\n            ry=\"1.7497113\" />\n        <path\n            style=\"fill:#e1e0e3;fill-opacity:0.817618;stroke:#99918e;stroke-width:0.472954;stroke-dasharray:none;stroke-opacity:1\"\n            d=\"m 456.07547,366.77735 0.31397,12.07079 15.41376,-0.0409 -5.34485,-12.30783 z\" id=\"path116\"\n            sodipodi:nodetypes=\"ccccc\" />\n        <rect\n            style=\"fill:#07106d;fill-opacity:0.905979;stroke:#37094e;stroke-width:0.519197;stroke-dasharray:none;stroke-opacity:0.906977\"\n            id=\"rect116\" width=\"24.938877\" height=\"8.2195711\" x=\"430.49332\" y=\"396.18512\" rx=\"0.98509765\"\n            ry=\"1.2864321\" />\n        <ellipse\n            style=\"fill:#d5d3d6;fill-opacity:1;stroke:#252421;stroke-width:5.87771;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"circle117\" cx=\"482.31915\" cy=\"403.42215\" rx=\"7.9448342\" ry=\"7.6242671\" />\n        <ellipse\n            style=\"fill:#d5d3d6;fill-opacity:1;stroke:#292b2b;stroke-width:5.87771;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"circle118\" cx=\"700.62738\" cy=\"401.15921\" rx=\"7.9448342\" ry=\"7.6242671\" />\n        <path id=\"path118\"\n            style=\"fill:#111110;fill-opacity:1;stroke:#4a4c4e;stroke-width:0.763532;stroke-dasharray:none;stroke-opacity:0.906977\"\n            d=\"m 662.59615,376.7822 c -0.78945,0 -1.42382,0.60878 -1.42382,1.36638 v 4.69891 h 20.44336 c 2.06204,0 3.72265,1.87934 3.72265,4.21534 v 8.67059 l 2.7461,0.01 a 14.691795,14.098994 0 0 1 12.73437,-7.13741 14.691795,14.098994 0 0 1 1.01367,0.0375 c 0.2042,-0.0139 0.41088,-0.0559 0.61328,-0.0562 2.97236,6.4e-4 5.95425,0.51453 8.32618,3.08138 0.59837,0.59527 1.11944,1.42302 1.56835,2.29416 a 14.691795,14.098994 0 0 1 1.60938,2.42725 l 3.79492,-0.0488 a 14.691795,14.098994 0 0 1 13.07422,-7.73532 14.691795,14.098994 0 0 1 13.0332,7.59849 l 5.75977,-0.0244 v -10.50742 c 0,-1.96247 1.66061,-3.54059 3.72266,-3.54059 h 84.10937 c 2.06204,0 3.72266,1.57812 3.72266,3.54059 v 10.1157 l 4.90234,-0.0206 a 14.691795,14.098994 0 0 1 12.75,-7.16177 14.691795,14.098994 0 0 1 12.7207,7.05119 l 1.0586,-0.004 c 0.78944,-0.004 1.42578,-0.61065 1.42578,-1.36825 v -7.83277 h -27.89844 c -0.9939,0 -1.79492,-1.57115 -1.79492,-3.52184 v -5.55736 c 0,-0.20145 0.0109,-0.39838 0.0273,-0.59041 z\" />\n        <ellipse\n            style=\"fill:#d5d3d6;fill-opacity:1;stroke:#292b2b;stroke-width:5.87771;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"circle119\" cx=\"729.99957\" cy=\"401.15921\" rx=\"7.9448342\" ry=\"7.6242671\" />\n        <ellipse\n            style=\"fill:#d5d3d6;fill-opacity:1;stroke:#292b2b;stroke-width:5.87771;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"circle120\" cx=\"858.96265\" cy=\"401.15921\" rx=\"7.9448342\" ry=\"7.6242671\" />\n        <rect\n            style=\"fill:#7d7e10;fill-opacity:1;stroke:#4a4c4e;stroke-width:0.622804;stroke-dasharray:none;stroke-opacity:0.906977\"\n            id=\"rect120\" width=\"30.609106\" height=\"12.884856\" x=\"841.98346\" y=\"376.51913\" rx=\"1.6553366\"\n            ry=\"3.6006863\" />\n        <g id=\"g121\" transform=\"matrix(1,0,0,0.95965085,1168.6863,-118.24249)\">\n            <path\n                style=\"fill:#7d1910;fill-opacity:0.905979;stroke:#bec14e;stroke-width:0.53;stroke-dasharray:none;stroke-opacity:0.906977\"\n                d=\"m -297.67975,486.23759 19.84901,-0.23988 c 9.21337,0.73682 17.02762,5.42362 23.44277,14.06041 l 7.04385,15.66614 24.50614,6.72386 0.48372,18.50305 -6.16012,0.32768 0.20108,-5.5076 c -8.50759,-12.66501 -17.10265,-10.31826 -24.05888,-1.38307 l -1.31328,5.62058 -1.25916,2.45883 -12.8892,0.35238 -1.11296,-9.67676 -27.13598,0.30555 -0.011,-4.45793 c 0,0 -1.56955,-43.50349 -1.58605,-42.75324 z\"\n                id=\"path120\" sodipodi:nodetypes=\"cccccccccccccccsc\" />\n            <rect\n                style=\"fill:#d8cfd1;fill-opacity:0.894118;stroke:#bec14e;stroke-width:0.408906;stroke-dasharray:none;stroke-opacity:0.906977\"\n                id=\"rect121\" width=\"17.128859\" height=\"8.9165564\" x=\"-292.44034\" y=\"504.67111\" rx=\"3.2130783\"\n                ry=\"3.0297778\" />\n            <path\n                style=\"fill:#e1e0e3;fill-opacity:0.817618;stroke:#bec14e;stroke-width:0.53;stroke-dasharray:none;stroke-opacity:0.906977\"\n                d=\"m -271.04133,502.9865 -0.15759,12.22316 17.02151,-0.6472 -4.42725,-11.97666 z\" id=\"path121\"\n                sodipodi:nodetypes=\"ccccc\" />\n        </g>\n        <rect\n            style=\"fill:#141c71;fill-opacity:1;stroke:#bec14e;stroke-width:0.519197;stroke-dasharray:none;stroke-opacity:0.906977\"\n            id=\"rect122\" width=\"24.938877\" height=\"8.2195711\" x=\"875.35718\" y=\"393.92218\" rx=\"0.98509765\"\n            ry=\"1.2864321\" />\n        <ellipse\n            style=\"fill:#d5d3d6;fill-opacity:1;stroke:#1f2121;stroke-width:5.87771;stroke-dasharray:none;stroke-opacity:0.906977\"\n            id=\"circle122\" cx=\"927.18298\" cy=\"401.15921\" rx=\"7.9448342\" ry=\"7.6242671\" />\n        <rect\n            style=\"fill:#cacccc;fill-opacity:1;stroke:#151418;stroke-width:0.517284;stroke-dasharray:none;stroke-opacity:0.906977\"\n            id=\"PB_CISTERNA2\" width=\"211.92793\" height=\"43.265659\" x=\"658.82196\" y=\"332.46835\" rx=\"11.536555\"\n            ry=\"10.425867\" />\n        <g id=\"PB_LLENAR2\" transform=\"matrix(1,0,0,0.95965085,559.93664,2.9535817)\">\n            <rect\n                style=\"fill:#d5d6d6;fill-opacity:0.980392;stroke:#080807;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1\"\n                id=\"rect131\" width=\"90\" height=\"23\" x=\"77.25396\" y=\"314.3736\" rx=\"4.1175871\" ry=\"4.0392413\" /><text\n                style=\"font-size:17.1456px;font-family:Arial;fill:#000000;fill-opacity:1;stroke-width:0.857277\"\n                x=\"79.542839\" y=\"354.96265\" id=\"text131\" transform=\"scale(1.072359,0.93252353)\">LLENAR</text>\n        </g>\n        <g id=\"PB_PAUSAR2\" transform=\"matrix(1,0,0,0.95965085,559.93664,2.9535817)\">\n            <rect\n                style=\"fill:#d4d5d5;fill-opacity:1;stroke:#7e7d7c;stroke-width:1.389;stroke-dasharray:none;stroke-opacity:1\"\n                id=\"rect132\" width=\"90\" height=\"23\" x=\"173.25397\" y=\"314.3736\" rx=\"2.6002176\" ry=\"3.2805564\" /><text\n                style=\"font-size:17.1318px;font-family:Arial;fill:#000000;fill-opacity:1;stroke-width:0.856589\"\n                x=\"164.3788\" y=\"365.03033\" id=\"text132\" transform=\"scale(1.1026784,0.90688274)\">PAUSAR</text>\n        </g>\n        <g id=\"PB_CERRAR2\" transform=\"matrix(1,0,0,0.95965085,559.93664,2.9535817)\">\n            <rect\n                style=\"fill:#d4d5d5;fill-opacity:1;stroke:#7e7d7c;stroke-width:1.39729;stroke-dasharray:none;stroke-opacity:1\"\n                id=\"rect133\" width=\"91.110321\" height=\"22.991711\" x=\"269.25812\" y=\"314.37775\" rx=\"3.0012867\"\n                ry=\"4.3397856\" /><text\n                style=\"font-size:17.0382px;font-family:Arial;fill:#000000;fill-opacity:1;stroke-width:0.851907\"\n                x=\"250.56654\" y=\"362.89777\" id=\"text133\" transform=\"scale(1.0966533,0.91186521)\">CERRAR</text>\n        </g>\n        <rect\n            style=\"opacity:0.98;fill:#4e4e4f;fill-opacity:1;stroke:#050505;stroke-width:0.598013;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect135\" width=\"128.94591\" height=\"41.8353\" x=\"254.08836\" y=\"334.84265\" ry=\"0\" rx=\"0\" />\n        <rect\n            style=\"fill:#ebd806;fill-opacity:1;stroke:#151418;stroke-width:0.315178;stroke-dasharray:none;stroke-opacity:0.906977\"\n            id=\"CIRTENA1_BACK\" width=\"128.937\" height=\"14.274755\" x=\"254.09296\" y=\"362.44275\" rx=\"0\" ry=\"0\" />\n        <rect\n            style=\"opacity:0.98;fill:#ffffff;fill-opacity:1;stroke:#050505;stroke-width:0.343558;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect54\" width=\"109.64929\" height=\"16.237751\" x=\"264.32996\" y=\"344.28064\" ry=\"2.0708034\"\n            rx=\"1.9865942\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#1a1a1a;fill-opacity:1;stroke-width:0.941499\" x=\"253.08679\"\n            y=\"381.0668\" id=\"CISTERNA1_STATUS\" transform=\"scale(1.0621556,0.94148165)\">###.##</text>\n        <rect\n            style=\"opacity:0.98;fill:#4e4e4f;fill-opacity:1;stroke:#050505;stroke-width:0.590949;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect136\" width=\"128.94591\" height=\"40.852753\" x=\"700.08832\" y=\"334.84265\" ry=\"0\" rx=\"0\" />\n        <rect\n            style=\"fill:#00d806;fill-opacity:1;stroke:#151418;stroke-width:0.513486;stroke-dasharray:none;stroke-opacity:0.906977\"\n            id=\"rect137\" width=\"128.95737\" height=\"37.883015\" x=\"700.0827\" y=\"336.75217\" rx=\"0\" ry=\"0\" />\n        <rect\n            style=\"opacity:0.98;fill:#f9f9f9;fill-opacity:1;stroke:#050505;stroke-width:0.343536;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect73\" width=\"109.64931\" height=\"16.235619\" x=\"709.19696\" y=\"345.44791\" ry=\"2.0705314\"\n            rx=\"1.9865946\" /><text\n            style=\"font-size:17.5615px;font-family:Arial;fill:#000000;fill-opacity:1;stroke-width:0.878075\"\n            x=\"719.88684\" y=\"356.41174\" id=\"CISTERNA2_STATUS\" transform=\"scale(0.99060373,1.0094854)\">###.##</text>\n        <path\n            style=\"fill:none;fill-opacity:1;stroke:#99918e;stroke-width:0.244904;stroke-dasharray:none;stroke-opacity:1\"\n            d=\"m 456.21184,366.65232 -0.12576,28.05011 16.21765,0.0604 0.0106,-15.79003 -5.73081,-12.38073 z\"\n            id=\"path137\" sodipodi:nodetypes=\"cccccc\" />\n        <rect\n            style=\"fill:#30312f;fill-opacity:0.905979;stroke:#99918e;stroke-width:0.244904;stroke-dasharray:none;stroke-opacity:1\"\n            id=\"rect138\" width=\"0.94288671\" height=\"3.3780768\" x=\"456.02325\" y=\"379.68204\" rx=\"3.7220988\"\n            ry=\"3.3780768\" />\n        <rect x=\"414.79248\" y=\"484.41708\"\n            style=\"fill:#20a040;stroke:#000000;stroke-width:0.350796;stroke-miterlimit:4;stroke-dasharray:none\"\n            id=\"UIT_2001_DENSITY_BACK\" width=\"114.22176\" height=\"29.466579\" ry=\"5.15903\" />\n        <rect x=\"419.20633\" y=\"489.0621\" style=\"fill:#000000;stroke:#000000;stroke-width:1.18243px\"\n            id=\"PB_UIT_2001_DENSITY\" width=\"105.26901\" height=\"20.357832\" ry=\"5.1693211\" /><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#00ffff;stroke-width:0.941499\" x=\"401.06461\" y=\"536.15942\"\n            id=\"UIT_2001_DENS\" transform=\"scale(1.0621556,0.94148165)\">###.##</text>\n        <rect x=\"29.176533\" y=\"564.49634\" style=\"fill:#000000;stroke:#000000;stroke-width:0.987925px\" id=\"rect6\"\n            width=\"97.48304\" height=\"15.346277\" ry=\"3.8967714\" /><text\n            style=\"font-size:17.5679px;font-family:Arial;fill:#00ffff;stroke-width:0.87839\" x=\"40.487415\" y=\"658.19598\"\n            id=\"ProductInLine\" transform=\"scale(1.1384672,0.87837402)\">###.##</text><text\n            style=\"font-size:18.83px;font-family:Arial;fill:#45f0f7;fill-opacity:1;stroke-width:0.941499\" x=\"-1.5446484\"\n            y=\"585.51727\" id=\"text68-5\" transform=\"scale(1.0621556,0.94148165)\" inkscape:label=\"LABEL\">DE\n            POLIDUCT</text>\n    </g>\n</svg>",
        "clickableShapes": [
            {
                "targetId": "#TIKET_N",
                "action": "click",
                "payload": "Numero De Tikete",
                "payloadType": "str",
                "topic": "TIKET_N"
            },
            {
                "targetId": "#PB_LLENAR1",
                "action": "click",
                "payload": "LLENAR1",
                "payloadType": "str",
                "topic": "PB_LLENAR1"
            },
            {
                "targetId": "#PB_PAUSAR1",
                "action": "click",
                "payload": "PAUSAR1",
                "payloadType": "str",
                "topic": "PB_PAUSAR1"
            },
            {
                "targetId": "#PB_CERRAR1",
                "action": "click",
                "payload": "CERRAR1",
                "payloadType": "str",
                "topic": "PB_CERRAR1"
            },
            {
                "targetId": "#PB_LLENAR2",
                "action": "click",
                "payload": "LLENAR2",
                "payloadType": "str",
                "topic": "PB_LLENAR2"
            },
            {
                "targetId": "#PB_PAUSAR2",
                "action": "click",
                "payload": "PAUSAR2",
                "payloadType": "str",
                "topic": "PB_PAUSAR2"
            },
            {
                "targetId": "#PB_CERRAR2",
                "action": "click",
                "payload": "CERRAR2",
                "payloadType": "str",
                "topic": "PB_CERRAR2"
            },
            {
                "targetId": "#GenerarTiquete",
                "action": "click",
                "payload": "GenerarTiquete",
                "payloadType": "str",
                "topic": "GenerarTiquete"
            },
            {
                "targetId": "#PB_CISTERNA1",
                "action": "click",
                "payload": "butano",
                "payloadType": "str",
                "topic": "PB_CISTERNA1"
            },
            {
                "targetId": "#PB_CISTERNA2",
                "action": "click",
                "payload": "PB_CISTERNA2",
                "payloadType": "str",
                "topic": "PB_CISTERNA2"
            },
            {
                "targetId": "#PB_PIT_2001",
                "action": "click",
                "payload": "PB_PIT_2001",
                "payloadType": "str",
                "topic": "PB_PIT_2001"
            },
            {
                "targetId": "#PB_TIT_2001",
                "action": "click",
                "payload": "PB_TIT_2001",
                "payloadType": "str",
                "topic": "PB_TIT_2001"
            },
            {
                "targetId": "#PB_FIT_2001",
                "action": "click",
                "payload": "PB_FIT_2001",
                "payloadType": "str",
                "topic": "PB_FIT_2001"
            },
            {
                "targetId": "#PB_CREATE_CISTERNA1",
                "action": "click",
                "payload": "ADICIONAR CISTERNA",
                "payloadType": "str",
                "topic": "PB_CREATE_CISTERNA1"
            },
            {
                "targetId": "#PB_CREATE_CISTERNA2",
                "action": "click",
                "payload": "ADICIONAR CISTERNA",
                "payloadType": "str",
                "topic": "PB_CREATE_CISTERNA2"
            },
            {
                "targetId": "#PB_UIT_2001_DENSITY",
                "action": "click",
                "payload": "UIT_2001_DENSITY",
                "payloadType": "str",
                "topic": "PB_UIT_2001_DENSITY"
            }
        ],
        "javascriptHandlers": [],
        "smilAnimations": [],
        "bindings": [
            {
                "selector": "#PIT_2001_PV",
                "bindSource": "payload.PIT_2001_PV",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#PIT_2001_BACK",
                "bindSource": "payload.PIT_2001_ALARM",
                "bindType": "style",
                "attribute": "fill"
            },
            {
                "selector": "#TIT_2001_PV",
                "bindSource": "payload.TIT_2001_PV",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#TIT_2001_BACK",
                "bindSource": "payload.TIT_2001_ALARM",
                "bindType": "style",
                "attribute": "fill"
            },
            {
                "selector": "#Date_Time",
                "bindSource": "payload.DATE_STRING",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#TIKET_N",
                "bindSource": "payload.TIKET_N",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#UIT_2001_FLOW",
                "bindSource": "payload.UIT_2001_FLOW",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#UIT_2001_DENS",
                "bindSource": "payload.UIT_2001_DENS",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#UIT_2001_TBATCH",
                "bindSource": "payload.UIT_2001_TBATCH",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#DIT_2001_PV",
                "bindSource": "payload.DIT_2001_PV",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#UIT_2003_FLOW",
                "bindSource": "payload.UIT_2003_FLOW",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#UIT_2003_DENSITY",
                "bindSource": "payload.UIT_2003_DENSITY",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#UIT_2003_TOTAL",
                "bindSource": "payload.UIT_2003_TOTAL",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#CISTERNA1_STATUS",
                "bindSource": "payload.STR_STATUS_CISTERNA1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#PB_LLENAR2",
                "bindSource": "payload.CISTERNA2_VISIBLE",
                "bindType": "style",
                "attribute": "opacity"
            },
            {
                "selector": "#PB_PAUSAR2",
                "bindSource": "payload.CISTERNA2_VISIBLE",
                "bindType": "style",
                "attribute": "opacity"
            },
            {
                "selector": "#PB_CERRAR2",
                "bindSource": "payload.CISTERNA2_VISIBLE",
                "bindType": "style",
                "attribute": "opacity"
            },
            {
                "selector": "#CLIENTE1",
                "bindSource": "payload.CLIENTE1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#PRODUCTO1",
                "bindSource": "payload.PRODUCTO1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#TIQUETE1",
                "bindSource": "payload.TIQUETE_No1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#RVP1",
                "bindSource": "payload.RVP1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#FECHA1",
                "bindSource": "payload.FECHA1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#MASA1",
                "bindSource": "payload.MASA1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#VAPORES1",
                "bindSource": "payload.VAPORES1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#VOL_INDICADO1",
                "bindSource": "payload.VOL_INDICADO1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#VOL_FULL1",
                "bindSource": "payload.VOL_FULL1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#PRESSURE1",
                "bindSource": "payload.PRESSURE1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#TEMPERATURE1",
                "bindSource": "payload.TEMPERATURE1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#VOL_CURRENT1",
                "bindSource": "payload.VOL_CURRENT1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#CLIENTE2",
                "bindSource": "payload.CLIENTE2",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#PRODUCTO2",
                "bindSource": "payload.PRODUCTO2",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#TIQUETE2",
                "bindSource": "payload.TIQUETE_No2",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#RVP2",
                "bindSource": "payload.RVP2",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#FECHA2",
                "bindSource": "payload.FECHA2",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#MASA2",
                "bindSource": "payload.MASA2",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#VAPORES2",
                "bindSource": "payload.VAPORES2",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#VOL_INDICADO2",
                "bindSource": "payload.VOL_INDICADO2",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#VOL_FULL2",
                "bindSource": "payload.VOL_FULL2",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#PRESSURE2",
                "bindSource": "payload.PRESSURE2",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#TEMPERATURE2",
                "bindSource": "payload.TEMPERATURE2",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#VOL_CURRENT2",
                "bindSource": "payload.VOL_CURRENT2",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#ID_CISTERNA1",
                "bindSource": "payload.ID_CISTERNA1",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#UIT_2001_DENSITY_BACK",
                "bindSource": "payload.UIT_2001_DENSITY_COLOR",
                "bindType": "style",
                "attribute": "fill"
            },
            {
                "selector": "#ProductInLine",
                "bindSource": "payload.INLINE_PRODUCT",
                "bindType": "text",
                "attribute": ""
            },
            {
                "selector": "#ID_CISTERNA2",
                "bindSource": "payload.ID_CISTERNA2",
                "bindType": "text",
                "attribute": ""
            }
        ],
        "showCoordinates": false,
        "autoFormatAfterEdit": false,
        "showBrowserErrors": false,
        "showBrowserEvents": false,
        "enableJsDebugging": false,
        "sendMsgWhenLoaded": false,
        "noClickWhenDblClick": false,
        "outputField": "payload",
        "editorUrl": "//drawsvg.org/drawsvg.html",
        "directory": "",
        "panning": "disabled",
        "zooming": "disabled",
        "panOnlyWhenZoomed": false,
        "doubleClickZoomEnabled": false,
        "mouseWheelZoomEnabled": false,
        "dblClickZoomPercentage": 150,
        "cssString": "div.ui-svg svg{\n    color: var(--nr-dashboard-widgetColor);\n    fill: currentColor !important;\n}\ndiv.ui-svg path {\n    fill: inherit;\n}",
        "name": "",
        "x": 600,
        "y": 460,
        "wires": [
            [
                "89cf21ba1acbaf97"
            ]
        ]
    },
    {
        "id": "333b823a91d5a282",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "Create Cisterna1",
        "func": "msg.topic=\"SELECT * FROM cisternas\";\n\nglobal.set(\"SEL_CISTERNA\",\"CISTERNA1\");\n\n\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 740,
        "wires": [
            [
                "f59c6d604bec2dab"
            ]
        ]
    },
    {
        "id": "49958ca9210d0c38",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "Prepare Query",
        "func": "// Ejemplo de cómo manejar las acciones\nconst data = msg.payload;\nconst action = msg.topic;\nconst sel_cisterna=global.get(\"SEL_CISTERNA\");\n\nswitch(action) {\n    case \"CISTERNA_SELECCIONADA\":\n        global.set(\"NoPLACA\",data.placa);\n        let dtCisterna=global.get(sel_cisterna);\n        dtCisterna.numero_sisterna=data.placa;\n        dtCisterna.empresa_cliente=data.cliente;\n        dtCisterna.galones_objetivo=data.capacidad;\n        global.set(sel_cisterna,dtCisterna);\n        global.set(\"NoPLACA\",data.placa);\n        msg.payload=null;\n        break;\n    case \"INSERT\":\n        msg.topic = `INSERT INTO cisternas (placa, cliente, capacidad, activa) VALUES ('${data.placa}', '${data.cliente}', ${data.capacidad}, ${data.activa})`;\n        break;\n    case \"UPDATE\":\n        msg.topic = `UPDATE cisternas SET placa='${data.placa}', cliente='${data.cliente}', capacidad=${data.capacidad}, activa=${data.activa} WHERE id=${data.id}`;\n        break;\n    case \"DELETE\":\n        msg.topic = `DELETE FROM cisternas WHERE id=${data.id}`;\n        break;\n    default:\n        msg.payload=null;    \n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1540,
        "y": 840,
        "wires": [
            [
                "cf819ea6b4736158"
            ]
        ]
    },
    {
        "id": "a2b56aa8b32f10c7",
        "type": "sqlite",
        "z": "619addbf2da107aa",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "msg.topic",
        "sql": "INSERT INTO sisternas (\n        placa, \n        cliente, \n        capacidad, \n        \n    ) VALUES (\n        $placa, \n        $cliente, \n        $capacidad, \n        \n    )",
        "name": "",
        "x": 1940,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "fd6cca632e02d099",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "Create Cisterna2",
        "func": "\nglobal.set(\"SEL_CISTERNA\",\"CISTERNA2\");\n\nmsg.topic=\"SELECT * FROM cisternas\";\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 780,
        "wires": [
            [
                "f59c6d604bec2dab"
            ]
        ]
    },
    {
        "id": "2a250466ad53578d",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "GeTDENSITY",
        "func": "let tag=global.get(\"UIT_2001_DENSITY\");\nmsg.topic = \"open_alarm_config\";\nmsg.payload=tag;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 660,
        "wires": [
            [
                "53e166a9b03ef43c"
            ]
        ]
    },
    {
        "id": "a8f1f8f8a652b830",
        "type": "switch",
        "z": "619addbf2da107aa",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1710,
        "y": 660,
        "wires": [
            [
                "dfe627d839ab6604"
            ]
        ]
    },
    {
        "id": "7abe5b8ecdab4956",
        "type": "switch",
        "z": "619addbf2da107aa",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2050,
        "y": 520,
        "wires": [
            [
                "aebb31bc1ff0fa83"
            ]
        ]
    },
    {
        "id": "cf819ea6b4736158",
        "type": "switch",
        "z": "619addbf2da107aa",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1730,
        "y": 840,
        "wires": [
            [
                "a2b56aa8b32f10c7"
            ]
        ]
    },
    {
        "id": "60cb6c66917c7f28",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "GetCisternaID",
        "func": "let data=msg.payload;\n\nlet sel_cisterna=global.get(\"SEL_CISTERNA\");\nlet sel_segment=sel_cisterna===\"CISTERNA1\" ? \"FILL_SEGMENT1\":\"FILL_SEGMENT2\";\n\nglobal.set(sel_segment,data);\nlet noPlaca=global.get(\"NoPLACA\");\nif(noPlaca==null)\n{\n    node.warn(\"Seleccione una CISTERNA\");\n}\n\nmsg.params=[noPlaca]\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1440,
        "y": 520,
        "wires": [
            [
                "b7d6c06668454e0d"
            ]
        ]
    },
    {
        "id": "b7d6c06668454e0d",
        "type": "sqlite",
        "z": "619addbf2da107aa",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "prepared",
        "sql": "SELECT ID FROM cisternas WHERE placa=?",
        "name": "GetCisternaID",
        "x": 1640,
        "y": 520,
        "wires": [
            [
                "61552e5ef6f099b5"
            ]
        ]
    },
    {
        "id": "afd199cb463bd18a",
        "type": "ui_template",
        "z": "619addbf2da107aa",
        "group": "f5490ef343d6cb98",
        "name": "",
        "order": 9,
        "width": 1,
        "height": 1,
        "format": "<style>\n    .my-modal-overlay {\n        position: fixed;\n        z-index: 9999;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.6);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n\n    .my-modal {\n        background: #ffffff;\n        padding: 25px;\n        border-radius: 12px;\n        color: #333;\n        font-family: sans-serif;\n        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    }\n\n    .my-modal h3 {\n        margin-top: 0;\n        color: #1a73e8;\n    }\n\n    .modal-form {\n        width: 380px;\n    }\n\n    .modal-lista {\n        width: 600px;\n        max-width: 90vw;\n    }\n\n    .form-group {\n        margin-bottom: 15px;\n        display: flex;\n        flex-direction: column;\n    }\n\n    .form-group label {\n        font-weight: bold;\n        font-size: 0.9em;\n        margin-bottom: 5px;\n    }\n\n    .form-group input {\n        padding: 10px;\n        border: 1px solid #ccc;\n        border-radius: 4px;\n        font-size: 1em;\n    }\n\n    .form-group input:focus {\n        outline: none;\n        border-color: #1a73e8;\n        box-shadow: 0 0 3px rgba(26, 115, 232, 0.3);\n    }\n\n    .row-check {\n        flex-direction: row !important;\n        align-items: center;\n        gap: 10px;\n    }\n\n    .row-check input[type=\"checkbox\"] {\n        width: 18px;\n        height: 18px;\n        cursor: pointer;\n    }\n\n    .button-row {\n        display: flex;\n        justify-content: space-between;\n        gap: 10px;\n        margin-top: 20px;\n    }\n\n    .btn {\n        border: none;\n        padding: 12px 16px;\n        border-radius: 6px;\n        cursor: pointer;\n        font-weight: bold;\n        font-size: 0.95em;\n        transition: all 0.2s ease;\n    }\n\n    .btn-guardar {\n        background: #28a745;\n        color: white;\n        flex: 1;\n    }\n\n    .btn-guardar:hover {\n        background: #218838;\n    }\n\n    .btn-editar {\n        background: #1a73e8;\n        color: white;\n        flex: 1;\n    }\n\n    .btn-editar:hover {\n        background: #1557b0;\n    }\n\n    .btn-borrar {\n        background: #dc3545;\n        color: white;\n    }\n\n    .btn-borrar:hover {\n        background: #c82333;\n    }\n\n    .btn-cancelar {\n        background: #6c757d;\n        color: white;\n    }\n\n    .btn-cancelar:hover {\n        background: #5a6268;\n    }\n\n    .btn-nuevo {\n        background: #17a2b8;\n        color: white;\n    }\n\n    .btn-nuevo:hover {\n        background: #138496;\n    }\n\n    .btn-sm {\n        padding: 6px 12px;\n        font-size: 0.85em;\n    }\n\n    .tabla-container {\n        max-height: 400px;\n        overflow-y: auto;\n        margin: 15px 0;\n        border: 1px solid #dee2e6;\n        border-radius: 8px;\n    }\n\n    .tabla-cisternas {\n        width: 100%;\n        border-collapse: collapse;\n        font-size: 0.9em;\n    }\n\n    .tabla-cisternas thead {\n        background: #1a73e8;\n        color: white;\n        position: sticky;\n        top: 0;\n    }\n\n    .tabla-cisternas th,\n    .tabla-cisternas td {\n        padding: 12px 10px;\n        text-align: left;\n        border-bottom: 1px solid #dee2e6;\n    }\n\n    .tabla-cisternas tbody tr:hover {\n        background: #f1f3f4;\n    }\n\n    .tabla-cisternas tbody tr.seleccionada {\n        background: #e3f2fd;\n    }\n\n    .tabla-cisternas tbody tr {\n        cursor: pointer;\n        transition: background 0.2s;\n        user-select: none;\n    }\n\n    .estado-activo {\n        color: #28a745;\n        font-weight: bold;\n    }\n\n    .estado-inactivo {\n        color: #dc3545;\n        font-weight: bold;\n    }\n\n    .acciones-celda {\n        display: flex;\n        gap: 5px;\n    }\n\n    .sin-datos {\n        text-align: center;\n        padding: 30px;\n        color: #6c757d;\n        font-style: italic;\n    }\n\n    .busqueda {\n        margin-bottom: 15px;\n    }\n\n    .busqueda input {\n        width: 100%;\n        padding: 10px 15px;\n        border: 1px solid #ccc;\n        border-radius: 6px;\n        font-size: 1em;\n    }\n\n    .hint {\n        font-size: 0.8em;\n        color: #6c757d;\n        margin-top: 5px;\n        font-style: italic;\n    }\n</style>\n\n<!-- ================= POPUP LISTA DE CISTERNAS ================= -->\n<div class=\"my-modal-overlay\" ng-show=\"showLista\" ng-click=\"closeOnOverlay($event, 'lista')\">\n    <div class=\"my-modal modal-lista\" ng-click=\"$event.stopPropagation()\">\n        <h3>📋 Lista de Cisternas</h3>\n        <hr>\n\n        <div class=\"busqueda\">\n            <input type=\"text\" ng-model=\"filtro\" placeholder=\"🔍 Buscar por placa o cliente...\">\n            <div class=\"hint\">💡 Doble click para seleccionar cisterna e iniciar llenado</div>\n        </div>\n\n        <div class=\"tabla-container\">\n            <table class=\"tabla-cisternas\">\n                <thead>\n                    <tr>\n                        <th>ID</th>\n                        <th>Placa</th>\n                        <th>Cliente</th>\n                        <th>Capacidad (L)</th>\n                        <th>Estado</th>\n                        <th>Acciones</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat=\"c in cisternas | filter:filtro track by c.id\"\n                        ng-class=\"{'seleccionada': c.id === seleccionada.id}\" ng-click=\"seleccionar(c)\"\n                        ng-dblclick=\"seleccionarParaLlenado(c)\">\n                        <td>{{c.id}}</td>\n                        <td><strong>{{c.placa}}</strong></td>\n                        <td>{{c.cliente}}</td>\n                        <td>{{c.capacidad | number}}</td>\n                        <td>\n                            <span ng-class=\"c.activa == 1 ? 'estado-activo' : 'estado-inactivo'\">\n                                {{c.activa == 1 ? '✔ Activa' : '✖ Inactiva'}}\n                            </span>\n                        </td>\n                        <td class=\"acciones-celda\">\n                            <button class=\"btn btn-editar btn-sm\" ng-click=\"editarCisterna(c); $event.stopPropagation();\" title=\"Editar\">\n                                ✏️\n                            </button>\n                            <button class=\"btn btn-borrar btn-sm\" ng-click=\"eliminarCisterna(c); $event.stopPropagation();\" title=\"Eliminar\">\n                                🗑️\n                            </button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            <div class=\"sin-datos\" ng-if=\"(cisternas | filter:filtro).length === 0\">\n                No se encontraron cisternas\n            </div>\n        </div>\n\n        <div class=\"button-row\">\n            <button class=\"btn btn-cancelar\" ng-click=\"closeLista()\">Cerrar</button>\n            <button class=\"btn btn-nuevo\" ng-click=\"nuevaCisterna()\">+ Nueva Cisterna</button>\n        </div>\n    </div>\n</div>\n\n<!-- ================= POPUP FORMULARIO CISTERNA ================= -->\n<div class=\"my-modal-overlay\" ng-show=\"showPopup\" ng-click=\"closeOnOverlay($event, 'form')\">\n    <div class=\"my-modal modal-form\" ng-click=\"$event.stopPropagation()\">\n        <h3>{{isNew ? '➕ Nueva Cisterna' : '✏️ Gestionar Cisterna'}}</h3>\n        <hr>\n\n        <div class=\"form-group\">\n            <label>Placa (Única):</label>\n            <input type=\"text\" ng-model=\"cisterna.placa\" placeholder=\"Ej: ABC-123\" ng-disabled=\"!isNew && !editMode\">\n        </div>\n        <div class=\"form-group\">\n            <label>Cliente:</label>\n            <input type=\"text\" ng-model=\"cisterna.cliente\" ng-disabled=\"!isNew && !editMode\">\n        </div>\n        <div class=\"form-group\">\n            <label>Capacidad (GAL):</label>\n            <input type=\"number\" ng-model=\"cisterna.capacidad\" ng-disabled=\"!isNew && !editMode\">\n        </div>\n        <div class=\"form-group row-check\">\n            <input type=\"checkbox\" ng-model=\"cisterna.activa\" ng-true-value=\"1\" ng-false-value=\"0\" ng-disabled=\"!isNew && !editMode\">\n            <label>Cisterna Activa</label>\n        </div>\n\n        <div class=\"button-row\">\n            <button class=\"btn btn-cancelar\" ng-click=\"closePopup()\">Cancelar</button>\n            <button class=\"btn btn-borrar\" ng-if=\"!isNew\" ng-click=\"sendAction('DELETE')\">Borrar</button>\n            <button class=\"btn btn-editar\" ng-if=\"!isNew && !editMode\" ng-click=\"enableEdit()\">Editar</button>\n            <button class=\"btn btn-guardar\" ng-if=\"isNew || editMode\" ng-click=\"sendAction(isNew ? 'INSERT' : 'UPDATE')\">Guardar</button>\n        </div>\n    </div>\n</div>\n\n<script>\n    (function(scope) {\n    // ========== ESTADO INICIAL ==========\n    scope.showPopup = false;\n    scope.showLista = false;\n    scope.isNew = true;\n    scope.editMode = false;\n    scope.filtro = \"\";\n    scope.cisternas = [];\n    scope.seleccionada = {};\n\n    scope.cisterna = {\n        id: null,\n        placa: \"\",\n        cliente: \"\",\n        capacidad: 0,\n        activa: 1\n    };\n\n    scope._originalCisterna = {};\n\n    // ========== FUNCIONES LISTA ==========\n\n    scope.openLista = function(data) {\n        scope.cisternas = Array.isArray(data) ? data : [];\n        scope.filtro = \"\";\n        scope.seleccionada = {};\n        scope.showLista = true;\n    };\n\n    scope.closeLista = function() {\n        scope.showLista = false;\n        scope.filtro = \"\";\n    };\n\n    // Click simple: solo selecciona (resalta la fila)\n    scope.seleccionar = function(c) {\n        scope.seleccionada = c;\n    };\n\n    // ★★★ DOBLE CLICK: Envía la cisterna seleccionada para iniciar llenado ★★★\n    scope.seleccionarParaLlenado = function(c) {\n        scope.send({\n            topic: \"CISTERNA_SELECCIONADA\",\n            payload: angular.copy(c)\n        });\n        scope.closeLista(); // Cierra el popup automáticamente\n    };\n\n    // Botón editar: abre formulario\n    scope.editarCisterna = function(c) {\n        scope.openPopup(c);\n    };\n\n    scope.eliminarCisterna = function(c) {\n        if (confirm(\"¿Está seguro de eliminar la cisterna \" + c.placa + \"?\")) {\n            scope.send({\n                topic: \"DELETE\",\n                payload: angular.copy(c)\n            });\n            var idx = scope.cisternas.findIndex(function(x) { return x.id === c.id; });\n            if (idx > -1) {\n                scope.cisternas.splice(idx, 1);\n            }\n        }\n    };\n\n    scope.nuevaCisterna = function() {\n        scope.openPopup(null);\n    };\n\n    // ========== FUNCIONES FORMULARIO ==========\n\n    scope.openPopup = function(data) {\n        if (data && data.id) {\n            scope.cisterna = angular.copy(data);\n            scope.isNew = false;\n            scope.editMode = false;\n        } else {\n            scope.cisterna = {\n                id: null,\n                placa: \"\",\n                cliente: \"\",\n                capacidad: 0,\n                activa: 1\n            };\n            scope.isNew = true;\n            scope.editMode = false;\n        }\n        scope._originalCisterna = angular.copy(scope.cisterna);\n        scope.showPopup = true;\n    };\n\n    scope.closePopup = function() {\n        scope.cisterna = angular.copy(scope._originalCisterna);\n        scope.showPopup = false;\n        scope.editMode = false;\n    };\n\n    scope.enableEdit = function() {\n        scope.editMode = true;\n    };\n\n    scope.closeOnOverlay = function(e, tipo) {\n        if (e && e.target && e.target.classList.contains('my-modal-overlay')) {\n            if (tipo === 'lista') {\n                scope.closeLista();\n            } else {\n                scope.closePopup();\n            }\n        }\n    };\n\n    // ========== ENVIAR ACCIÓN ==========\n\n    scope.sendAction = function(accion) {\n        if ((accion === 'INSERT' || accion === 'UPDATE') && !scope.cisterna.placa) {\n            alert(\"La placa es obligatoria.\");\n            return;\n        }\n\n        if (accion === 'DELETE') {\n            if (!confirm(\"¿Está seguro de eliminar esta cisterna?\")) {\n                return;\n            }\n        }\n\n        scope.cisterna.capacidad = parseFloat(scope.cisterna.capacidad) || 0;\n        scope.cisterna.activa = (scope.cisterna.activa === 1 || scope.cisterna.activa === true) ? 1 : 0;\n\n        scope.send({\n            topic: accion,\n            payload: angular.copy(scope.cisterna)\n        });\n\n        if (scope.showLista && accion === 'DELETE') {\n            var idx = scope.cisternas.findIndex(function(x) { return x.id === scope.cisterna.id; });\n            if (idx > -1) {\n                scope.cisternas.splice(idx, 1);\n            }\n        }\n\n        scope.showPopup = false;\n        scope.editMode = false;\n    };\n\n    // ========== RECIBIR MENSAJES ==========\n\n    scope.$watch('msg', function(msg) {\n        if (!msg) return;\n\n        if (msg.topic === \"LISTA_CISTERNAS\") {\n            scope.openLista(msg.payload);\n        }\n\n        if (msg.topic === \"EDIT_CISTERNA\" || msg.topic === \"OPEN_POPUP\") {\n            scope.openPopup(msg.payload);\n        }\n\n        if (msg.topic === \"REFRESH_LISTA\" && scope.showLista) {\n            scope.cisternas = Array.isArray(msg.payload) ? msg.payload : scope.cisternas;\n        }\n    });\n\n})(scope);\n</script>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1720,
        "y": 780,
        "wires": [
            [
                "49958ca9210d0c38"
            ]
        ]
    },
    {
        "id": "f59c6d604bec2dab",
        "type": "sqlite",
        "z": "619addbf2da107aa",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "",
        "x": 1340,
        "y": 780,
        "wires": [
            [
                "74414f08c72643f4"
            ]
        ]
    },
    {
        "id": "74414f08c72643f4",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "Prepare Datos",
        "func": "msg.topic=\"LISTA_CISTERNAS\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1540,
        "y": 780,
        "wires": [
            [
                "afd199cb463bd18a"
            ]
        ]
    },
    {
        "id": "4fa5802f87cd7479",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "function 12",
        "func": "msg.topic=\"LLENADO\";\nglobal.set(\"ACTUAL_CISTERNA\",\"CISTERNA2\");\nlet cisterna= global.get(\"CISTERNA2\");\nlet date = new Date().toLocaleString().replaceAll('/','-')\n\nmsg.payload={\n    cliente: \"ALMAGAS\",\n    producto: \"select\",\n    cisterna: cisterna.numero_sisterna,\n    tiquete: 123,\n    fecha : date,\n    rvp:180,\n    Vol_full: 14000\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 540,
        "wires": [
            [
                "936d82591358bf5b"
            ]
        ]
    },
    {
        "id": "f354c163160c51e9",
        "type": "ui_toast",
        "z": "619addbf2da107aa",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "Desea Iniciar Bache?",
        "name": "To Fill2",
        "x": 1080,
        "y": 340,
        "wires": [
            [
                "2c298e88651cf372"
            ]
        ]
    },
    {
        "id": "c283f9e1cec329bf",
        "type": "ui_toast",
        "z": "619addbf2da107aa",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "Desea Terminar el Bache?",
        "name": "To Pause2",
        "x": 1090,
        "y": 380,
        "wires": [
            [
                "41aed4ea1799c110"
            ]
        ]
    },
    {
        "id": "8af4475aa8cbd5ca",
        "type": "ui_toast",
        "z": "619addbf2da107aa",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "Desea Borrar Totalizadores?",
        "name": "To Close3",
        "x": 1080,
        "y": 420,
        "wires": [
            [
                "7e87dcedaac27b98"
            ]
        ]
    },
    {
        "id": "2c298e88651cf372",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "SetsFill1",
        "func": "let date_string=new Date().toLocaleString('en-US',{hour12: false}).replaceAll('/','-');\ndate_string=date_string.replace(',',' ');\nlet id_cisterna=global.get(\"ID_CISTERNA\") || 2; \nlet actual_cisterna=global.get(\"ACTUAL_CISTERNA\");\n\nif(msg.payload!=\"Cansel\")\n{\n    global.set(\"STATUS_CISTERNA2\",2);\n    global.set(\"SEND_STATUS_CISTERNA1\",true);\n\n    msg.params=[1, date_string, 1, 14000]\n    \n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1300,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "41aed4ea1799c110",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "SetPause1",
        "func": "\nif(msg.payload!=\"Cansel\")\n{\n    global.set(\"STATUS_CISTERNA2\",3);\n    global.set(\"SEND_STATUS_CISTERNA1\",true);\n    \n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "7e87dcedaac27b98",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "SetClose1",
        "func": "let status_cisterna=global.get(\"STATUS_CISTERNA2\");\n\n\nif(msg.payload!=\"Cansel\" && status_cisterna===3)\n{\n    global.set(\"STATUS_CISTERNA2\",4);\n    global.set(\"SEND_STATUS_CISTERNA1\",true);\n    msg.topic=\"OK\";\n}\nelse\n{\n    msg.topic=null;\n    msg.payload = \"⚠️ El batch debe estar PAUSADO antes de borrar los totalizadore\";\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "db08240ca43407ed",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "function 14",
        "func": "msg.payload = {\n    \"massFlow\": 22000,\n    \"fluid\": \"propano\",\n    \"observedTempF\": 95,\n    \"observedPressurePSI\": 120,\n    \"observedDensity\": 474.48,\n    \"rvp\": 180,\n    \"mFactor\": 1,\n    \"cliente\": \"RAYOGAS_SAS\",\n    \"numeroTiquete\": \"100\",\n    \"stream\": \"1\",\n    \"bala\": \"BA - 1\",\n    \"pulsosBatch\": \"4315244\",\n    \"kFactor\": \"14000.00\"\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1650,
        "y": 260,
        "wires": [
            [
                "5fd5af0d0bbd6104",
                "6e1fd277c82c8121"
            ]
        ]
    },
    {
        "id": "e6ca43222d55e088",
        "type": "ui_ui_control",
        "z": "619addbf2da107aa",
        "name": "",
        "events": "change",
        "x": 2220,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "7b7ba2f3f91a6f0f",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "function 15",
        "func": "msg.payload = { \"tab\": \"TiqueteLPG\" };\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2070,
        "y": 280,
        "wires": [
            [
                "e6ca43222d55e088"
            ]
        ]
    },
    {
        "id": "5fd5af0d0bbd6104",
        "type": "link out",
        "z": "619addbf2da107aa",
        "name": "FromClose",
        "mode": "link",
        "links": [
            "2e62e22aabdf80a2"
        ],
        "x": 1845,
        "y": 200,
        "wires": []
    },
    {
        "id": "6e1fd277c82c8121",
        "type": "delay",
        "z": "619addbf2da107aa",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1880,
        "y": 280,
        "wires": [
            [
                "7b7ba2f3f91a6f0f"
            ]
        ]
    },
    {
        "id": "c89976765dd58728",
        "type": "ui_button",
        "z": "619addbf2da107aa",
        "name": "",
        "group": "f5490ef343d6cb98",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Base de Datos",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"tab\":\"DBDisplay\"}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 140,
        "y": 760,
        "wires": [
            [
                "e51b3e5685e51b2e"
            ]
        ]
    },
    {
        "id": "d4efe672ca459e72",
        "type": "switch",
        "z": "619addbf2da107aa",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1290,
        "y": 200,
        "wires": [
            [
                "685ecf0080349123"
            ],
            [
                "49ca4dcaab021e0d"
            ]
        ]
    },
    {
        "id": "76b0e2057c9b9e08",
        "type": "ui_toast",
        "z": "619addbf2da107aa",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1670,
        "y": 200,
        "wires": []
    },
    {
        "id": "49ca4dcaab021e0d",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "function 16",
        "func": "\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1470,
        "y": 200,
        "wires": [
            [
                "76b0e2057c9b9e08"
            ]
        ]
    },
    {
        "id": "3472d7035568969e",
        "type": "sqlite",
        "z": "619addbf2da107aa",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "fixed",
        "sql": "SELECT last_insert_rowid() AS id_llenado;",
        "name": "",
        "x": 2280,
        "y": 580,
        "wires": [
            [
                "898546ccddd35730"
            ]
        ]
    },
    {
        "id": "898546ccddd35730",
        "type": "function",
        "z": "619addbf2da107aa",
        "name": "Id Llenado",
        "func": "global.set(\"ID_LLENADO\",msg.payload[0].id_llenado);\nmsg.payload=msg.payload[0].id_llenado;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2490,
        "y": 580,
        "wires": [
            [
                "41a6f0637e63061d"
            ]
        ]
    },
    {
        "id": "41a6f0637e63061d",
        "type": "debug",
        "z": "619addbf2da107aa",
        "name": "debug 10",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2660,
        "y": 580,
        "wires": []
    },
    {
        "id": "b430cb3540249bc6",
        "type": "link out",
        "z": "619addbf2da107aa",
        "name": "Pausar1",
        "mode": "link",
        "links": [
            "bac54a5a69138a3a"
        ],
        "x": 1425,
        "y": 240,
        "wires": []
    },
    {
        "id": "83ee44d06bbae547",
        "type": "function",
        "z": "b29ed1d9bf2c7ea9",
        "name": "Flow Calc",
        "func": "const PI = Math.PI;\n    \n    // Parámetros de la tubería y placa de orificio\nconst D = 3; // Diámetro de la tubería en pulgadas\nconst d = 1.75; // Diámetro del orificio en pulgadas\nconst beta = d / D; // Relación de diámetros\n\n// Datos del transmisor multivariable\nconst P = msg.payload.presionEstatica; // Presión estática en psia\nconst dP = msg.payload.presionDiferencial; // Presión diferencial en inH2O\nconst T = msg.payload.temperatura; // Temperatura en °F\n\n// Datos actualizados de la cromatografía\nconst cromatografia = {\n    C1: 0.6631,  // Metano\n    C2: 0.1169,  // Etano\n    C3: 0.0470,  // Propano\n    iC4: 0.0077, // i-Butano\n    nC4: 0.0122, // n-Butano\n    iC5: 0.0040, // i-Pentano\n    nC5: 0.0037, // n-Pentano\n    C6: 0.0013,  // n-Hexano\n    C7: 0.0009,  // n-Heptano\n    C8: 0.0005,  // n-Octano\n    C9: 0.0003,  // n-Nonano\n    H2O: 0.0025, // Agua\n    CO2: 0.0849, // Dióxido de carbono\n    N2: 0.0547,  // Nitrógeno\n    H2S: 0.0002  // Sulfuro de hidrógeno\n};\n\n// Cálculo del peso molecular\nfunction calcularPesoMolecular(cromatografia) {\n    const pesosMoleculares = {\n        C1: 16.043, C2: 30.070, C3: 44.097,\n        iC4: 58.123, nC4: 58.123,\n        iC5: 72.150, nC5: 72.150,\n        C6: 86.177, C7: 100.204, C8: 114.231, C9: 128.258,\n        H2O: 18.015, CO2: 44.010, N2: 28.013, H2S: 34.082\n    };\n    return Object.keys(cromatografia).reduce((sum, componente) =>\n        sum + cromatografia[componente] * pesosMoleculares[componente], 0);\n}\n\nconst MW = calcularPesoMolecular(cromatografia);\n\n// Cálculo del factor de compresibilidad (Z)\n// Nota: Este es un cálculo simplificado. Para mayor precisión, se recomienda\n// usar métodos más avanzados como la ecuación de estado AGA8 o GERG-2008\nfunction calcularFactorCompresibilidad(P, T, MW) {\n    const Pc = 667 + 15 * MW - 0.05 * Math.pow(MW, 2); // Presión crítica estimada\n    const Tc = 343 + 7 * MW - 0.01 * Math.pow(MW, 2); // Temperatura crítica estimada\n    const Tr = (T + 460) / Tc; // Temperatura reducida\n    const Pr = P / Pc; // Presión reducida\n    return 1 - (0.06 + 0.01 * Pr) / Tr;\n}\n\n// Implementación simplificada del método AGA8-DC92\nfunction calcularFactorCompresibilidadAGA8(P, T, composicion) {\n    // Constantes para los componentes (orden: C1, C2, C3, iC4, nC4, iC5, nC5, N2, CO2)\n    const Tc = [190.56, 305.32, 369.83, 407.8, 425.12, 460.4, 469.7, 126.2, 304.12]; // K\n    const Pc = [45.99, 48.72, 42.48, 36.4, 37.96, 33.8, 33.7, 33.98, 73.74]; // bar\n    const omega = [0.0115, 0.0995, 0.1523, 0.1852, 0.2010, 0.2275, 0.2510, 0.0377, 0.2239];\n    \n    // Convertir temperatura a Kelvin y presión a bar\n    const Tk = (T + 459.67) * 5/9;\n    const Pbar = P * 0.0689476;\n    \n    // Calcular parámetros de mezcla\n    let Tcm = 0, Pcm = 0, omega_m = 0;\n    const componentes = ['C1', 'C2', 'C3', 'iC4', 'nC4', 'iC5', 'nC5', 'N2', 'CO2'];\n    componentes.forEach((comp, i) => {\n        const xi = composicion[comp];\n        Tcm += xi * Tc[i];\n        Pcm += xi * Pc[i];\n        omega_m += xi * omega[i];\n    });\n    \n    // Calcular factor acéntrico de mezcla\n    const omega_m_adj = 0.3796 + 1.5226 * omega_m - 0.2967 * Math.pow(omega_m, 2);\n    \n    // Calcular Z usando la ecuación de estado de Peng-Robinson\n    const R = 8.3145; // Constante de gas universal en J/(mol·K)\n    const a = 0.45724 * Math.pow(R * Tcm, 2) / Pcm * Math.pow(1 + (0.37464 + 1.54226 * omega_m_adj - 0.26992 * Math.pow(omega_m_adj, 2)) * (1 - Math.sqrt(Tk / Tcm)), 2);\n    const b = 0.0778 * R * Tcm / Pcm;\n    \n    const A = a * Pbar / Math.pow(R * Tk, 2);\n    const B = b * Pbar / (R * Tk);\n    \n    const coef = [1, -(1-B), A-3*Math.pow(B,2)-2*B, -(A*B-Math.pow(B,2)-Math.pow(B,3))];\n    \n    // Resolver la ecuación cúbica para Z\n    const roots = solveCubic(coef);\n    const Z = Math.max(...roots); // Tomar la raíz más grande\n    \n    return Z;\n}\n\n// Función auxiliar para resolver ecuaciones cúbicas\nfunction solveCubic(coef) {\n    const [a, b, c, d] = coef;\n    const p = (3*a*c - Math.pow(b,2)) / (3*Math.pow(a,2));\n    const q = (2*Math.pow(b,3) - 9*a*b*c + 27*Math.pow(a,2)*d) / (27*Math.pow(a,3));\n    const D = Math.pow(q/2,2) + Math.pow(p/3,3);\n    \n    if (D > 0) {\n        const u = Math.cbrt(-q/2 + Math.sqrt(D));\n        const v = Math.cbrt(-q/2 - Math.sqrt(D));\n        return [u + v - b/(3*a)];\n    } else if (D === 0) {\n        const u = Math.cbrt(-q/2);\n        return [2*u - b/(3*a), -u - b/(3*a)];\n    } else {\n        const phi = Math.acos(-q / (2*Math.sqrt(Math.pow(-p/3,3))));\n        const r = 2 * Math.sqrt(-p/3);\n        return [\n            r * Math.cos(phi/3) - b/(3*a),\n            r * Math.cos((phi + 2*Math.PI)/3) - b/(3*a),\n            r * Math.cos((phi + 4*Math.PI)/3) - b/(3*a)\n        ];\n    }\n}\n\n// Usar el nuevo método AGA8 para calcular Z\nconst Z = calcularFactorCompresibilidadAGA8(P, T, cromatografia);\n\n// Función actualizada para calcular Cd usando el número de Reynolds\nfunction calcularCd(beta, D, P, dP, Re) {\n    // Esta es una versión simplificada. La ecuación completa es más compleja.\n    const L1 = 0.0254 / D; // Asumiendo una toma de presión en la esquina\n    const L2 = 0.0254 / D;\n    const A = Math.pow(19000 * beta / Re, 0.8);\n    \n    return 0.5961 + 0.0261 * Math.pow(beta, 2) - 0.216 * Math.pow(beta, 8) +\n           0.000521 * Math.pow(1e6 * beta / Re, 0.7) +\n           (0.0188 + 0.0063 * A) * Math.pow(beta, 3.5) * Math.pow(1e6 / Re, 0.3) +\n           (0.043 + 0.080 * Math.exp(-10 * L1) - 0.123 * Math.exp(-7 * L1)) * \n           (1 - 0.11 * A) * Math.pow(beta, 4) / (1 - Math.pow(beta, 4)) -\n           0.031 * (L2 - 0.8 * Math.pow(L2, 1.1)) * Math.pow(beta, 1.3);\n}\n\n\n// Función para calcular el número de Reynolds\nfunction Reynolds(D, P, T, MW, dP, Z) {\n    const mu = 1.8e-5; // Viscosidad dinámica estimada en Pa·s\n    const rho = P * MW / (Z * 10.73 * (T + 460)); // Densidad del gas en lb/ft³\n    const velocidad = 0.0119 * Math.sqrt(dP * P / (MW * (T + 460))); // Velocidad en ft/s\n    return 7000 * rho * velocidad * D / mu; // Reynolds (adimensional)\n}\n\n\n\nconst Re = Reynolds(D, P, T, MW, dP, Z);\nconst Cd = calcularCd(beta, D, P, dP, Re);\n\n// Cálculo del factor de expansión\nconst Y = 1 - (0.41 + 0.35 * Math.pow(beta, 4)) * (dP / (P * 27.7076));\n\n// Cálculo del flujo másico\nconst Qm = 359 * Cd * Y * Math.pow(d, 2) * Math.sqrt(dP * P * MW / ((T + 460) * Z));\n\n// Cálculo del flujo volumétrico a condiciones de proceso\nconst Qv = Qm * (Z * 10.73 * (T + 460)) / (MW * P);\n\n// Asignamos el resultado al payload\nmsg.payload = {\n    flujoMasico: Qm, // en lb/h\n    flujoVolumetrico: Qv, // en ft³/h a condiciones de proceso\n    pesoMolecular: MW,\n    factorCompresibilidad: Z,\n    coeficienteDescarga: Cd\n};\n    \nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 220,
        "wires": [
            [
                "5c4351fcc7cd9285"
            ]
        ]
    },
    {
        "id": "99caf9430ccab308",
        "type": "function",
        "z": "b29ed1d9bf2c7ea9",
        "name": "Load MV",
        "func": " msg.payload={\n    \"presionEstatica\": 800,\n    \"presionDiferencial\" : 125.0,\n    \"temperatura\":80.12\n }\n \n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 220,
        "wires": [
            [
                "83ee44d06bbae547"
            ]
        ]
    },
    {
        "id": "5c4351fcc7cd9285",
        "type": "debug",
        "z": "b29ed1d9bf2c7ea9",
        "name": "debug 11",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 760,
        "y": 220,
        "wires": []
    },
    {
        "id": "978306859f254413",
        "type": "inject",
        "z": "b29ed1d9bf2c7ea9",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 220,
        "wires": [
            [
                "99caf9430ccab308"
            ]
        ]
    },
    {
        "id": "dae0b9c53ccd4541",
        "type": "flujo-estandar",
        "z": "b29ed1d9bf2c7ea9",
        "name": "",
        "x": 640,
        "y": 380,
        "wires": [
            [
                "2595af1074df87ad"
            ]
        ]
    },
    {
        "id": "09c260b0ee996f18",
        "type": "inject",
        "z": "b29ed1d9bf2c7ea9",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 380,
        "wires": [
            [
                "b9cda2dfb10a2908"
            ]
        ]
    },
    {
        "id": "2595af1074df87ad",
        "type": "debug",
        "z": "b29ed1d9bf2c7ea9",
        "name": "debug 13",
        "active": true,
        "tosidebar": true,
        "console": true,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 380,
        "wires": []
    },
    {
        "id": "b9cda2dfb10a2908",
        "type": "function",
        "z": "b29ed1d9bf2c7ea9",
        "name": "function 13",
        "func": "// msg.payload = {\n//     massFlow: 18580.72,         // kg/h (masa del Coriolis)\n//     fluid: 'propano',\n//     observedTempF: 84.75,       // °F\n//     observedPressurePSI: 195.54, // PSIG\n//     observedDensity: 481.8,     // kg/m³ (densidad observada del Coriolis)\n//     rvp: 180,                   // PSI @ 100°F (del laboratorio)\n//     mFactor: 1.0010             // Factor del medidor (opcional)\n// };\n\n// msg.payload = {\n//     massFlow: 12200.92,         // kg/h (masa del Coriolis)\n//     fluid: 'butano',\n//     observedTempF: 82.61,       // °F\n//     observedPressurePSI: 58.05, // PSIG\n//     observedDensity: 560.1,     // kg/m³ (densidad observada del Coriolis)\n//     rvp: 40,                   // PSI @ 100°F (del laboratorio)\n//     mFactor: 1.0010            // Factor del medidor (opcional)\n// };\n\nmsg.payload = {\n    massFlow: 23561.23,         // kg/h (masa del Coriolis)\n    fluid: 'propano',\n    observedTempF: 95,       // °F\n    observedPressurePSI: 120, // PSIG\n    observedDensity: 475.2,     // kg/m³ (densidad observada del Coriolis)\n    rvp: 180,                   // PSI @ 100°F (del laboratorio)\n    mFactor: 0.9839338          // Factor del medidor (opcional)\n};\nreturn msg;\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 380,
        "wires": [
            [
                "dae0b9c53ccd4541"
            ]
        ]
    },
    {
        "id": "4dfbb168def9e801",
        "type": "function",
        "z": "33c28a10b022eebb",
        "name": "function 4",
        "func": "var coilAddress = 0;\n\nif (global.get(\"START_BATCH\")==true) {\n    coilAddress = 0;  // Iniciar\n    global.set(\"START_BATCH\",false);\n    global.set(\"STATUS_BATCH\", \"ACTIVO\");\n    \n} else if (global.get(\"STOP_BATCH\")==true) {\n    coilAddress = 1;  // Parar\n    global.set(\"STOP_BATCH\",false);\n    global.set(\"STATUS_BATCH\", \"PAUSADO\");\n} else if (global.get(\"CLEAR_BATCH\")==true) {\n    coilAddress = 2;  // Borrar\n    global.set(\"CLEAR_BATCH\",false);\n    global.set(\"STATUS_BATCH\", \"LISTO\");\n}else {\n    msg.payload=null;\n    \n}\n\nif(msg.payload!=null)\n{\n        // Preparar mensaje para Modbus Write\n    msg.payload = {\n        'value': true,\n        'fc': 5,  // Function Code 5: Write Single Coil\n        'unitid': 1,\n        'address': coilAddress,\n        'quantity': 1 \n    };\n\n}\n\n\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 320,
        "wires": [
            [
                "c58dc7a7fda31044"
            ]
        ]
    },
    {
        "id": "20a6434651bedcad",
        "type": "modbus-flex-write",
        "z": "33c28a10b022eebb",
        "name": "Force coils",
        "showStatusActivities": true,
        "showErrors": true,
        "showWarnings": true,
        "server": "c2bd2524a791d21d",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 950,
        "y": 320,
        "wires": [
            [],
            [
                "73f537ef172e2f75"
            ]
        ]
    },
    {
        "id": "c58dc7a7fda31044",
        "type": "switch",
        "z": "33c28a10b022eebb",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 320,
        "wires": [
            [
                "20a6434651bedcad"
            ],
            []
        ]
    },
    {
        "id": "0c86295d17891846",
        "type": "inject",
        "z": "33c28a10b022eebb",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 320,
        "y": 420,
        "wires": [
            [
                "4dfbb168def9e801",
                "2defad94d0e11e37",
                "5aa25cc5d3347c2c",
                "b9fbb6874756dd88",
                "4f5d5c07dd3ff517",
                "602ecd7cb027211e",
                "ed489812d37be530"
            ]
        ]
    },
    {
        "id": "73f537ef172e2f75",
        "type": "debug",
        "z": "33c28a10b022eebb",
        "name": "debug 3",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 300,
        "wires": []
    },
    {
        "id": "2defad94d0e11e37",
        "type": "function",
        "z": "33c28a10b022eebb",
        "name": "SetHH",
        "func": "let sendHH=global.get(\"SendHH\") || false;\nlet pit=global.get(\"PIT_2002\");\nif(sendHH)\n{\n    sendHH=false;\n    msg.payload= Math.floor(pit.HH* 10) & 0xFFFF;\n}\nelse\n{\n    msg.payload=null;\n}\n\nglobal.set(\"SendHH\",sendHH);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 360,
        "wires": [
            [
                "fd7c9f9ff1b6c93a"
            ]
        ]
    },
    {
        "id": "fd7c9f9ff1b6c93a",
        "type": "switch",
        "z": "33c28a10b022eebb",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 360,
        "wires": [
            [
                "f9f463e87d10a679"
            ],
            []
        ]
    },
    {
        "id": "f9f463e87d10a679",
        "type": "modbus-write",
        "z": "33c28a10b022eebb",
        "name": "SendHH",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "79",
        "quantity": "1",
        "server": "c11465eb77fd5a0c",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 940,
        "y": 360,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "5aa25cc5d3347c2c",
        "type": "function",
        "z": "33c28a10b022eebb",
        "name": "SetH",
        "func": "let sendH=global.get(\"SendH\") || false;\nlet pit=global.get(\"PIT_2002\");\nif(sendH)\n{\n    sendH=false;\n    msg.payload= msg.payload= Math.floor(pit.H* 10) & 0xFFFF;;\n}\nelse\n{\n    msg.payload=null;\n}\n\nglobal.set(\"SendH\",sendH);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 400,
        "wires": [
            [
                "e7391dbd1e52173e"
            ]
        ]
    },
    {
        "id": "e7391dbd1e52173e",
        "type": "switch",
        "z": "33c28a10b022eebb",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 400,
        "wires": [
            [
                "8db58ac801477dd0"
            ],
            []
        ]
    },
    {
        "id": "8db58ac801477dd0",
        "type": "modbus-write",
        "z": "33c28a10b022eebb",
        "name": "SendH",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "80",
        "quantity": "1",
        "server": "c11465eb77fd5a0c",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 930,
        "y": 400,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "b9fbb6874756dd88",
        "type": "function",
        "z": "33c28a10b022eebb",
        "name": "Set PressureIN\"",
        "func": "let sendpi=global.get(\"SendPressureIN\") || false;\nlet uit=global.get(\"UIT_2002\");\nif(sendpi)\n{\n    sendpi=false;\n    msg.payload= msg.payload= Math.floor(uit.PRESSURE_IN* 1) & 0xFFFF;;\n}\nelse\n{\n    msg.payload=null;\n}\n\nglobal.set(\"SendPressureIN\",sendpi);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 440,
        "wires": [
            [
                "ccb152c676e34a58"
            ]
        ]
    },
    {
        "id": "ccb152c676e34a58",
        "type": "switch",
        "z": "33c28a10b022eebb",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 440,
        "wires": [
            [
                "68ddc6aef91b0a8b"
            ],
            []
        ]
    },
    {
        "id": "68ddc6aef91b0a8b",
        "type": "modbus-write",
        "z": "33c28a10b022eebb",
        "name": "SendPressureIN",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "73",
        "quantity": "1",
        "server": "c11465eb77fd5a0c",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 960,
        "y": 440,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "4f5d5c07dd3ff517",
        "type": "function",
        "z": "33c28a10b022eebb",
        "name": "Set SIC_CV",
        "func": "let sendSP=global.get(\"SendSIC_CV\") || false;\nlet pid=global.get(\"SIC_2002\");\nif(sendSP)\n{\n    sendSP=false;\n    msg.payload= msg.payload= Math.floor(pid.CV* 10) & 0xFFFF;;\n}\nelse\n{\n    msg.payload=null;\n}\n\nglobal.set(\"SendSIC_CV\",sendSP);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 480,
        "wires": [
            [
                "63fe6990244c7c2c"
            ]
        ]
    },
    {
        "id": "63fe6990244c7c2c",
        "type": "switch",
        "z": "33c28a10b022eebb",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 480,
        "wires": [
            [
                "c827128f50dbefdb"
            ],
            []
        ]
    },
    {
        "id": "c827128f50dbefdb",
        "type": "modbus-write",
        "z": "33c28a10b022eebb",
        "name": "SendSIC_CV",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "75",
        "quantity": "1",
        "server": "c11465eb77fd5a0c",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 950,
        "y": 480,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "602ecd7cb027211e",
        "type": "function",
        "z": "33c28a10b022eebb",
        "name": "Set SIC_SP",
        "func": "let sendSP=global.get(\"SendSIC_SP\") || false;\nlet pid=global.get(\"SIC_2002\");\nif(sendSP)\n{\n    sendSP=false;\n    msg.payload= msg.payload= Math.floor(pid.SP* 1000) & 0xFFFF;;\n}\nelse\n{\n    msg.payload=null;\n}\n\nglobal.set(\"SendSIC_SP\",sendSP);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 520,
        "wires": [
            [
                "d735ea79cd5f4cdc"
            ]
        ]
    },
    {
        "id": "d735ea79cd5f4cdc",
        "type": "switch",
        "z": "33c28a10b022eebb",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 730,
        "y": 520,
        "wires": [
            [
                "0def2218fa61aa2e"
            ],
            []
        ]
    },
    {
        "id": "0def2218fa61aa2e",
        "type": "modbus-write",
        "z": "33c28a10b022eebb",
        "name": "SendSIC_SP",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "76",
        "quantity": "1",
        "server": "c11465eb77fd5a0c",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 950,
        "y": 520,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "ed489812d37be530",
        "type": "function",
        "z": "33c28a10b022eebb",
        "name": "SendSTATUS_CISTERNA1",
        "func": "\nlet cisterna1=global.get(\"STATUS_CISTERNA1\");\nlet send_status_cisterna1=global.get(\"SEND_STATUS_CISTERNA1\") || false;\n\nif(send_status_cisterna1===true)\n{\n    msg.payload=cisterna1;\n    global.set(\"SEND_STATUS_CISTERNA1\",false);\n}\nelse{\n    msg.payload=null;\n}\n\n\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 580,
        "wires": [
            [
                "c3143ed55b9244d9"
            ]
        ]
    },
    {
        "id": "c3143ed55b9244d9",
        "type": "switch",
        "z": "33c28a10b022eebb",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 580,
        "wires": [
            [
                "b881977001e3d8f5"
            ],
            []
        ]
    },
    {
        "id": "b881977001e3d8f5",
        "type": "modbus-write",
        "z": "33c28a10b022eebb",
        "name": "SendSIC_SP",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "",
        "dataType": "HoldingRegister",
        "adr": "115",
        "quantity": "1",
        "server": "017a736946a464a1",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 1030,
        "y": 580,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "nodo-calculo",
        "type": "function",
        "z": "flujo-tiquete-lpg",
        "name": "Preparar datos adicionales",
        "func": "// Guardar datos adicionales antes del cálculo\nmsg.datosAdicionales = {\n    cliente: msg.payload.cliente,\n    numeroTiquete: msg.payload.numeroTiquete,\n    stream: msg.payload.stream,\n    bala: msg.payload.bala,\n    pulsosBatch: msg.payload.pulsosBatch,\n    kFactor: msg.payload.kFactor,\n    operacion: msg.payload.operacion || 'Ventas',\n    empresa: msg.payload.empresa || 'PETROSANTANDER COLOMBIA INC',\n    origen: msg.payload.origen || 'PETROSANTANDER',\n    tipoMedidor: msg.payload.tipoMedidor || 'CORIOLIS'\n};\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 100,
        "wires": [
            [
                "flujo-estandar"
            ]
        ]
    },
    {
        "id": "flujo-estandar",
        "type": "flujo-estandar",
        "z": "flujo-tiquete-lpg",
        "name": "Calcular Flujo Estándar",
        "x": 650,
        "y": 100,
        "wires": [
            [
                "merge-datos"
            ]
        ]
    },
    {
        "id": "merge-datos",
        "type": "function",
        "z": "flujo-tiquete-lpg",
        "name": "Combinar con datos adicionales",
        "func": "// Combinar resultado del cálculo con datos adicionales\nif (msg.datosAdicionales) {\n    msg.payload.cliente = msg.datosAdicionales.cliente;\n    msg.payload.numeroTiquete = msg.datosAdicionales.numeroTiquete;\n    msg.payload.stream = msg.datosAdicionales.stream;\n    msg.payload.bala = msg.datosAdicionales.bala;\n    msg.payload.pulsosBatch = msg.datosAdicionales.pulsosBatch;\n    msg.payload.kFactor = msg.datosAdicionales.kFactor;\n    msg.payload.operacion = msg.datosAdicionales.operacion;\n    msg.payload.empresa = msg.datosAdicionales.empresa;\n    msg.payload.origen = msg.datosAdicionales.origen;\n    msg.payload.tipoMedidor = msg.datosAdicionales.tipoMedidor;\n    msg.payload.fechaHora = new Date().toLocaleString('es-CO');\n}\n\nglobal.set(\"STATUS_CISTERNA1\",0);\nglobal.set(\"SEND_STATUS_CISTERNA1\",true);\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 100,
        "wires": [
            [
                "ui-tiquete",
                "debug-output"
            ]
        ]
    },
    {
        "id": "ui-tiquete",
        "type": "ui_template",
        "z": "flujo-tiquete-lpg",
        "group": "grupo-tiquete",
        "name": "Tiquete LPG",
        "order": 1,
        "width": 12,
        "height": 20,
        "format": "<style>\n    .tiquete-container {\n        font-family: 'Courier New', monospace;\n        font-size: 11px;\n        background: white;\n        color: black;\n        padding: 10px;\n        margin: 0 auto;\n        border: 1px solid #ccc;\n        line-height: 1.4;\n    }\n\n    .tiquete-header {\n        text-align: center;\n        border-bottom: 2px double #000;\n        padding-bottom: 8px;\n        margin-bottom: 8px;\n    }\n\n    .tiquete-header h1 {\n        font-size: 12px;\n        margin: 0;\n        letter-spacing: 2px;\n    }\n\n    .tiquete-header h2 {\n        font-size: 11px;\n        margin: 3px 0;\n        font-weight: normal;\n    }\n\n    .tiquete-info {\n        display: flex;\n        justify-content: space-between;\n        border-bottom: 1px solid #000;\n        padding: 5px 0;\n        margin-bottom: 8px;\n        font-size: 10px;\n    }\n\n    .tiquete-section {\n        margin-bottom: 10px;\n    }\n\n    .tiquete-section-title {\n        font-weight: bold;\n        border-bottom: 1px dashed #999;\n        margin-bottom: 5px;\n        padding-bottom: 2px;\n        font-size: 11px;\n    }\n\n    .tiquete-row {\n        display: flex;\n        justify-content: space-between;\n        padding: 1px 0;\n    }\n\n    .tiquete-row .label {\n        flex: 1;\n    }\n\n    .tiquete-row .value {\n        text-align: right;\n        min-width: 80px;\n        font-weight: bold;\n    }\n\n    .tiquete-row .unit {\n        text-align: left;\n        min-width: 70px;\n        padding-left: 8px;\n    }\n\n    .tiquete-totales {\n        background: #f0f0f0;\n        padding: 8px;\n        border: 1px solid #ccc;\n        margin-top: 10px;\n    }\n\n    .tiquete-totales .value {\n        color: #006400;\n        font-size: 12px;\n    }\n\n    .tiquete-separator {\n        border-top: 2px double #000;\n        margin: 10px 0;\n    }\n\n    .tiquete-stream {\n        text-align: center;\n        font-weight: bold;\n        margin: 8px 0;\n        font-size: 11px;\n        background: #eee;\n        padding: 3px;\n    }\n\n    .tiquete-footer {\n        margin-top: 15px;\n        padding-top: 10px;\n        border-top: 1px dashed #999;\n    }\n\n    .tiquete-firmas {\n        display: flex;\n        justify-content: space-between;\n        margin-top: 20px;\n    }\n\n    .tiquete-firma {\n        text-align: center;\n        width: 45%;\n        font-size: 10px;\n    }\n\n    .tiquete-firma-linea {\n        border-top: 1px solid #000;\n        margin-top: 30px;\n        padding-top: 3px;\n    }\n\n    .tiquete-logo {\n        text-align: right;\n        font-weight: bold;\n        color: #0066cc;\n        font-size: 11px;\n    }\n\n    .tiquete-despachado {\n        color: #0066cc;\n        font-weight: bold;\n        font-size: 14px;\n    }\n\n    .btn-imprimir {\n        background: #4CAF50;\n        color: white;\n        border: none;\n        padding: 8px 16px;\n        margin: 10px 5px;\n        cursor: pointer;\n        font-size: 12px;\n    }\n\n    .btn-imprimir:hover {\n        background: #45a049;\n    }\n\n    @media print {\n        .no-print {\n            display: none;\n        }\n\n        .tiquete-container {\n            border: none;\n        }\n    }\n</style>\n\n<div class=\"no-print\" style=\"text-align: center; margin-bottom: 10px;\">\n    <button class=\"btn-imprimir\" ng-click=\"imprimirTiquete()\">🖨️ Imprimir</button>\n</div>\n\n<div class=\"tiquete-container\" id=\"tiquete-lpg\">\n    <!-- HEADER -->\n    <div class=\"tiquete-header\">\n        <h1>{{msg.payload.empresa || 'PETROSANTANDER COLOMBIA INC'}}</h1>\n        <h2>PLANTA DE PRODUCTOS BLANCOS</h2>\n        <h2>REPORTE DE BATCH</h2>\n    </div>\n\n    <!-- INFO GENERAL -->\n    <div class=\"tiquete-info\">\n        <div>\n            <div>PLANTA DE GAS</div>\n            <div>ESTACION DE BOMBEO GLP</div>\n            <div>Cliente: <b>{{msg.payload.cliente || 'N/A'}}</b></div>\n            <div>Origen: {{msg.payload.origen || 'PETROSANTANDER'}}</div>\n        </div>\n        <div style=\"text-align: right;\">\n            <div>Numero de Tiquete: <b>{{msg.payload.numeroTiquete || '---'}}</b></div>\n            <div>Fecha: <b>{{msg.payload.fechaHora}}</b></div>\n            <div>Operación: {{msg.payload.operacion || 'Ventas'}}</div>\n            <div>Bala: {{msg.payload.bala || 'BA - 1'}}</div>\n        </div>\n    </div>\n\n    <!-- STREAM -->\n    <div class=\"tiquete-stream\">\n        STREAM {{msg.payload.stream || '1'}} - MEDIDOR {{msg.payload.tipoMedidor || 'CORIOLIS'}}\n    </div>\n\n    <!-- DATOS DEL PRODUCTO -->\n    <div class=\"tiquete-section\">\n        <div class=\"tiquete-section-title\">DATOS DEL PRODUCTO</div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Producto</span>\n            <span class=\"value\">{{msg.payload.input.fluid | uppercase}}</span>\n            <span class=\"unit\"></span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Densidad Relativa Observada</span>\n            <span class=\"value\">{{msg.payload.input.observedDensity_SG | number:4}}</span>\n            <span class=\"unit\">SG</span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Temperatura Observada</span>\n            <span class=\"value\">{{msg.payload.input.observedTemp_F | number:2}}</span>\n            <span class=\"unit\">Deg.F</span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Presion de Vapor (RVP)</span>\n            <span class=\"value\">{{msg.payload.input.rvp | number:2}}</span>\n            <span class=\"unit\">psig</span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Presion de Equilibrio</span>\n            <span class=\"value\">{{msg.payload.corrections.Pe_PSIG | number:2}}</span>\n            <span class=\"unit\">psig</span>\n        </div>\n    </div>\n\n    <!-- DATOS DEL MEDIDOR -->\n    <div class=\"tiquete-section\">\n        <div class=\"tiquete-section-title\">DATOS DEL MEDIDOR</div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Pulsos Batch</span>\n            <span class=\"value\">{{msg.payload.pulsosBatch || '---'}}</span>\n            <span class=\"unit\">pulsos</span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">K-Factor</span>\n            <span class=\"value\">{{msg.payload.kFactor || '14000.00'}}</span>\n            <span class=\"unit\">pulsos/bbl</span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">M-Factor</span>\n            <span class=\"value\">{{msg.payload.input.mFactor | number:4}}</span>\n            <span class=\"unit\"></span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Temperatura Promedio</span>\n            <span class=\"value\">{{msg.payload.input.observedTemp_F | number:2}}</span>\n            <span class=\"unit\">Deg.F</span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Presion Promedio</span>\n            <span class=\"value\">{{msg.payload.input.observedPressure_PSIG | number:2}}</span>\n            <span class=\"unit\">psig</span>\n        </div>\n    </div>\n\n    <!-- CALCULOS -->\n    <div class=\"tiquete-section\">\n        <div class=\"tiquete-section-title\">CALCULOS</div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Tabla Utilizada</span>\n            <span class=\"value\">GPA - TP27</span>\n            <span class=\"unit\"></span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Densidad Relativa @ 60F</span>\n            <span class=\"value\">{{msg.payload.corrections.standardDensity_SG | number:4}}</span>\n            <span class=\"unit\">SG</span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Gravedad API</span>\n            <span class=\"value\">{{msg.payload.gravedadAPI | number:1}}</span>\n            <span class=\"unit\">API Degrees</span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">CTL Factor</span>\n            <span class=\"value\">{{msg.payload.corrections.Ctl | number:4}}</span>\n            <span class=\"unit\"></span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">CPL Factor</span>\n            <span class=\"value\">{{msg.payload.corrections.Cpl | number:4}}</span>\n            <span class=\"unit\"></span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">CCF Factor Combinado</span>\n            <span class=\"value\">{{msg.payload.corrections.CCF | number:4}}</span>\n            <span class=\"unit\"></span>\n        </div>\n    </div>\n\n    <!-- TOTALES -->\n    <div class=\"tiquete-section tiquete-totales\">\n        <div class=\"tiquete-section-title\">TOTALES</div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Volumen Indicado (IV)</span>\n            <span class=\"value\">{{msg.payload.volumes.indicated_USgal | number:2}}</span>\n            <span class=\"unit\">U.S.gal</span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Volumen Bruto (GUV)</span>\n            <span class=\"value\">{{msg.payload.volumes.gross_USgal | number:2}}</span>\n            <span class=\"unit\">U.S.gal</span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Volumen Estandar (GSV)</span>\n            <span class=\"value\">{{msg.payload.volumes.standard_USgal | number:2}}</span>\n            <span class=\"unit\">U.S.gal</span>\n        </div>\n        <div class=\"tiquete-row\">\n            <span class=\"label\">Masa</span>\n            <span class=\"value\">{{msg.payload.volumes.mass_kg | number:2}}</span>\n            <span class=\"unit\">kg</span>\n        </div>\n    </div>\n\n    <div class=\"tiquete-separator\"></div>\n\n    <!-- FOOTER / FIRMAS -->\n    <div class=\"tiquete-footer\">\n        <div class=\"tiquete-firmas\">\n            <div class=\"tiquete-firma\">\n                <div class=\"tiquete-firma-linea\">OPERADOR</div>\n            </div>\n            <div class=\"tiquete-firma\">\n                <div class=\"tiquete-logo\">\n                    {{msg.payload.empresa || 'PetroSantander'}}<br>\n                    <span class=\"tiquete-despachado\">DESPACHADO</span>\n                </div>\n                <div class=\"tiquete-firma-linea\">SUPERVISOR</div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<script>\n    (function(scope) {\n    // Función para imprimir\n    scope.imprimirTiquete = function() {\n        var contenido = document.getElementById('tiquete-lpg').innerHTML;\n        var ventana = window.open('', '_blank');\n        ventana.document.write('<html><head><title>Tiquete LPG</title>');\n        ventana.document.write('<style>');\n        ventana.document.write('body { font-family: Courier New, monospace; font-size: 11px; }');\n        ventana.document.write('.tiquete-container { max-width: 400px; margin: 0 auto; }');\n        ventana.document.write('.tiquete-header { text-align: center; border-bottom: 2px double #000; padding-bottom: 8px; margin-bottom: 8px; }');\n        ventana.document.write('.tiquete-header h1 { font-size: 12px; margin: 0; letter-spacing: 2px; }');\n        ventana.document.write('.tiquete-header h2 { font-size: 11px; margin: 3px 0; font-weight: normal; }');\n        ventana.document.write('.tiquete-info { display: flex; justify-content: space-between; border-bottom: 1px solid #000; padding: 5px 0; margin-bottom: 8px; font-size: 10px; }');\n        ventana.document.write('.tiquete-section { margin-bottom: 10px; }');\n        ventana.document.write('.tiquete-section-title { font-weight: bold; border-bottom: 1px dashed #999; margin-bottom: 5px; }');\n        ventana.document.write('.tiquete-row { display: flex; justify-content: space-between; padding: 1px 0; }');\n        ventana.document.write('.tiquete-row .label { flex: 1; }');\n        ventana.document.write('.tiquete-row .value { text-align: right; min-width: 80px; font-weight: bold; }');\n        ventana.document.write('.tiquete-row .unit { text-align: left; min-width: 70px; padding-left: 8px; }');\n        ventana.document.write('.tiquete-totales { background: #f0f0f0; padding: 8px; border: 1px solid #ccc; }');\n        ventana.document.write('.tiquete-separator { border-top: 2px double #000; margin: 10px 0; }');\n        ventana.document.write('.tiquete-stream { text-align: center; font-weight: bold; margin: 8px 0; background: #eee; padding: 3px; }');\n        ventana.document.write('.tiquete-firmas { display: flex; justify-content: space-between; margin-top: 20px; }');\n        ventana.document.write('.tiquete-firma { text-align: center; width: 45%; }');\n        ventana.document.write('.tiquete-firma-linea { border-top: 1px solid #000; margin-top: 30px; padding-top: 3px; }');\n        ventana.document.write('.tiquete-logo { text-align: right; font-weight: bold; color: #0066cc; }');\n        ventana.document.write('.tiquete-despachado { color: #0066cc; font-weight: bold; font-size: 14px; }');\n        ventana.document.write('</style></head><body>');\n        ventana.document.write('<div class=\"tiquete-container\">' + contenido + '</div>');\n        ventana.document.write('</body></html>');\n        ventana.document.close();\n        ventana.print();\n    };\n    \n    // Observar cambios en el mensaje\n    scope.$watch('msg', function(msg) {\n        if (msg && msg.payload && msg.payload.corrections) {\n            // Calcular Gravedad API\n            if (msg.payload.corrections.standardDensity_SG) {\n                msg.payload.gravedadAPI = (141.5 / msg.payload.corrections.standardDensity_SG) - 131.5;\n            }\n        }\n    });\n})(scope);\n</script>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1170,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "debug-output",
        "type": "debug",
        "z": "flujo-tiquete-lpg",
        "name": "Debug Tiquete",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1180,
        "y": 120,
        "wires": []
    },
    {
        "id": "2e62e22aabdf80a2",
        "type": "link in",
        "z": "flujo-tiquete-lpg",
        "name": "ReportePropano",
        "links": [
            "5fd5af0d0bbd6104"
        ],
        "x": 185,
        "y": 40,
        "wires": [
            [
                "e20c1c990c5369a9"
            ]
        ]
    },
    {
        "id": "e9e21f0fb418798f",
        "type": "ui_button",
        "z": "flujo-tiquete-lpg",
        "name": "",
        "group": "grupo-tiquete",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Cerrar",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"tab\":\"Main\"}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 390,
        "y": 240,
        "wires": [
            [
                "909b9a634fa52cb3"
            ]
        ]
    },
    {
        "id": "909b9a634fa52cb3",
        "type": "ui_ui_control",
        "z": "flujo-tiquete-lpg",
        "name": "",
        "events": "all",
        "x": 600,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "e20c1c990c5369a9",
        "type": "function",
        "z": "flujo-tiquete-lpg",
        "name": "function 17",
        "func": "\n\nlet llenado_id=global.get(\"ID_LLENADO\");\nmsg.topic=`SELECT * FROM llenado_promedios WHERE llenado_id=${llenado_id};`\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 40,
        "wires": [
            [
                "381454103a068afb"
            ]
        ]
    },
    {
        "id": "381454103a068afb",
        "type": "sqlite",
        "z": "flujo-tiquete-lpg",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "",
        "x": 540,
        "y": 40,
        "wires": [
            [
                "44a2eea2b0da613a"
            ]
        ]
    },
    {
        "id": "44a2eea2b0da613a",
        "type": "function",
        "z": "flujo-tiquete-lpg",
        "name": "function 18",
        "func": "let data=msg.payload[0];\nlet fill_segment=global.get(\"FILL_SEGMENT1\");\nglobal.set(\"PROMEDIOS\",data);\n\n\n\nmsg.payload = {\n    \"massFlow\": data.flujo_promedio,\n    \"fluid\": fill_segment.producto.toLowerCase(),\n    \"observedTempF\": data.temperatura_promedio,\n    \"observedPressurePSI\": data.presion_promedio,\n    \"observedDensity\": data.densidad_promedio,\n    \"rvp\": fill_segment.rvp,\n    \"mFactor\": 1.001,\n    \"cliente\": fill_segment.cliente,\n    \"numeroTiquete\": fill_segment.tiquete,\n    \"stream\": \"2\",\n    \"bala\": \"BA - 1\",\n    \"pulsosBatch\": \"3392190\",\n    \"kFactor\": \"14000.00\"\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 40,
        "wires": [
            [
                "nodo-calculo"
            ]
        ]
    },
    {
        "id": "bac54a5a69138a3a",
        "type": "link in",
        "z": "flujo-tiquete-lpg",
        "name": "FromPause",
        "links": [
            "26fbcccf22e5a7b2",
            "b430cb3540249bc6"
        ],
        "x": 205,
        "y": 180,
        "wires": [
            [
                "635d90edb0325c5f"
            ]
        ]
    },
    {
        "id": "635d90edb0325c5f",
        "type": "function",
        "z": "flujo-tiquete-lpg",
        "name": "function 19",
        "func": "let llenado_id=global.get(\"ID_LLENADO\");\nmsg.topic=`SELECT * FROM llenado_promedios WHERE llenado_id=${llenado_id};`\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 180,
        "wires": [
            [
                "74df6a24d78d6e95"
            ]
        ]
    },
    {
        "id": "74df6a24d78d6e95",
        "type": "sqlite",
        "z": "flujo-tiquete-lpg",
        "mydb": "7cfcd0a8167643a7",
        "sqlquery": "msg.topic",
        "sql": "",
        "name": "",
        "x": 540,
        "y": 180,
        "wires": [
            [
                "b042de480210c434"
            ]
        ]
    },
    {
        "id": "b042de480210c434",
        "type": "function",
        "z": "flujo-tiquete-lpg",
        "name": "function 23",
        "func": "global.set(\"PROMEDIOS\",msg.payload[0]);\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 180,
        "wires": [
            []
        ]
    }
]