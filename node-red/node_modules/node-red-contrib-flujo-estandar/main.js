
const CalcularFlujoEstandar=require('./ConverStandarFlow')


function main() {
    if (require.main === module) {
        const calc = new CalcularFlujoEstandar();

        setTimeout(() => {
            console.log('\n' + '='.repeat(60));
            console.log('CONVERSIÓN FLUJO MÁSICO → VOLUMÉTRICO ESTÁNDAR');
            console.log('Con corrección por Temperatura (Ctl) y Presión (Cpl)');
            console.log('='.repeat(60) + '\n');

            // Ejemplo 1: Butano
            console.log('--- BUTANO ---');
            const butano = calc.convertMassToStandardVolume(
                1000,       // 1000 kg/h
                'butano',
                77,         // 77°F (25°C)
            100,        // 100 PSIG
            560         // 560 kg/m³ (densidad observada)
            );

            console.log('ENTRADA:');
            console.log(`  Flujo másico:    ${butano.input.massFlowRate_kg_h} kg/h`);
            console.log(`  Fluido:          ${butano.input.fluid}`);
            console.log(`  Temperatura:     ${butano.input.observedTemp_F} °F (${butano.input.observedTemp_C.toFixed(1)} °C)`);
            console.log(`  Presión:         ${butano.input.observedPressure_PSIG} PSIG (${butano.input.observedPressure_PSIA.toFixed(1)} PSIA)`);
            console.log(`  Densidad obs:    ${butano.input.observedDensity_kg_m3} kg/m³`);

            console.log('\nFACTORES DE CORRECCIÓN:');
            console.log(`  Ctl (temp):      ${butano.corrections.Ctl.toFixed(6)}`);
            console.log(`  Cpl (presión):   ${butano.corrections.Cpl.toFixed(6)}`);
            console.log(`  CTPL (total):    ${butano.corrections.CTPL.toFixed(6)}`);
            console.log(`  Pe (P vapor):    ${butano.corrections.Pe_PSIA.toFixed(2)} PSIA`);
            console.log(`  ΔP (Pm-Pe):      ${butano.corrections.deltaP_PSI.toFixed(2)} PSI`);
            console.log(`  Densidad std:    ${butano.corrections.standardDensity_kg_m3.toFixed(2)} kg/m³`);

            console.log('\nFLUJO VOLUMÉTRICO ESTÁNDAR (@60°F):');
            console.log(`  ${butano.m3_h.toFixed(4)} m³/h`);
            console.log(`  ${butano.lt_h.toFixed(2)} L/h`);
            console.log(`  ${butano.bbl_d.toFixed(2)} bbl/día`);
            console.log(`  ${butano.gal_h.toFixed(2)} gal/h`);

            console.log('\nFLUJO A CONDICIONES OBSERVADAS:');
            console.log(`  ${butano.observed.m3_h.toFixed(4)} m³/h`);
            console.log(`  ${butano.observed.lt_h.toFixed(2)} L/h`);

            // Ejemplo 2: Propano
            console.log('\n' + '-'.repeat(40));
            console.log('--- PROPANO ---');
            const propano = calc.convertMassToStandardVolume(
                500,        // 500 kg/h
                'propano',
                86,         // 86°F (30°C)
            150,        // 150 PSIG
            485         // 485 kg/m³
            );

            console.log('ENTRADA:');
            console.log(`  Flujo másico:    ${propano.input.massFlowRate_kg_h} kg/h`);
            console.log(`  Fluido:          ${propano.input.fluid}`);
            console.log(`  Temperatura:     ${propano.input.observedTemp_F} °F (${propano.input.observedTemp_C.toFixed(1)} °C)`);
            console.log(`  Presión:         ${propano.input.observedPressure_PSIG} PSIG`);
            console.log(`  Densidad obs:    ${propano.input.observedDensity_kg_m3} kg/m³`);

            console.log('\nFACTORES DE CORRECCIÓN:');
            console.log(`  Ctl (temp):      ${propano.corrections.Ctl.toFixed(6)}`);
            console.log(`  Cpl (presión):   ${propano.corrections.Cpl.toFixed(6)}`);
            console.log(`  CTPL (total):    ${propano.corrections.CTPL.toFixed(6)}`);
            console.log(`  Pe (P vapor):    ${propano.corrections.Pe_PSIA.toFixed(2)} PSIA`);
            console.log(`  ΔP (Pm-Pe):      ${propano.corrections.deltaP_PSI.toFixed(2)} PSI`);

            console.log('\nFLUJO VOLUMÉTRICO ESTÁNDAR (@60°F):');
            console.log(`  ${propano.m3_h.toFixed(4)} m³/h`);
            console.log(`  ${propano.lt_h.toFixed(2)} L/h`);
            console.log(`  ${propano.bbl_d.toFixed(2)} bbl/día`);
            console.log(`  ${propano.gal_h.toFixed(2)} gal/h`);

            // Ejemplo 3: Propano con presión adecuada
            console.log('\n' + '-'.repeat(40));
            console.log('--- PROPANO CON PRESIÓN ADECUADA ---');
            const propano2 = calc.convertMassToStandardVolume(
                500,        // 500 kg/h
                'propano',
                60,         // 60°F (15.5°C) - temperatura de referencia
                                                              250,        // 250 PSIG (suficiente para mantener líquido)
            507         // 507 kg/m³ (densidad típica propano)
            );

            console.log('ENTRADA:');
            console.log(`  Flujo másico:    ${propano2.input.massFlowRate_kg_h} kg/h`);
            console.log(`  Temperatura:     ${propano2.input.observedTemp_F} °F`);
            console.log(`  Presión:         ${propano2.input.observedPressure_PSIG} PSIG (${propano2.input.observedPressure_PSIA.toFixed(1)} PSIA)`);
            console.log(`  Densidad obs:    ${propano2.input.observedDensity_kg_m3} kg/m³`);

            console.log('\nFACTORES DE CORRECCIÓN:');
            console.log(`  Ctl (temp):      ${propano2.corrections.Ctl.toFixed(6)}`);
            console.log(`  Cpl (presión):   ${propano2.corrections.Cpl.toFixed(6)}`);
            console.log(`  CTPL (total):    ${propano2.corrections.CTPL.toFixed(6)}`);
            console.log(`  Pe (P vapor):    ${propano2.corrections.Pe_PSIA.toFixed(2)} PSIA`);
            console.log(`  ΔP (Pm-Pe):      ${propano2.corrections.deltaP_PSI.toFixed(2)} PSI`);

            console.log('\nFLUJO VOLUMÉTRICO ESTÁNDAR (@60°F):');
            console.log(`  ${propano2.m3_h.toFixed(4)} m³/h`);
            console.log(`  ${propano2.lt_h.toFixed(2)} L/h`);
            console.log(`  ${propano2.bbl_d.toFixed(2)} bbl/día`);

            // Ejemplo 4: Efecto de la presión en Butano
            console.log('\n' + '-'.repeat(40));
            console.log('--- COMPARACIÓN: EFECTO DE LA PRESIÓN ---');
            console.log('Butano 1000 kg/h @ 77°F, 560 kg/m³');
            console.log('Pe (presión vapor) @ 77°F ≈ 82 PSIA');

            [50, 100, 200, 300].forEach(pressure => {
                const result = calc.convertMassToStandardVolume(1000, 'butano', 77, pressure, 560);
                console.log(`  ${pressure} PSIG → Cpl: ${result.corrections.Cpl.toFixed(5)}, ΔP: ${result.corrections.deltaP_PSI.toFixed(1)} PSI, Vol: ${result.lt_h.toFixed(1)} L/h`);
            });

            // Ejemplo 5: Efecto de la temperatura
            console.log('\n' + '-'.repeat(40));
            console.log('--- COMPARACIÓN: EFECTO DE LA TEMPERATURA ---');
            console.log('Butano 1000 kg/h @ 200 PSIG, 560 kg/m³');

            [40, 60, 80, 100].forEach(temp => {
                const result = calc.convertMassToStandardVolume(1000, 'butano', temp, 200, 560);
                console.log(`  ${temp}°F → Ctl: ${result.corrections.Ctl.toFixed(5)}, Pe: ${result.corrections.Pe_PSIA.toFixed(1)} PSIA, Vol: ${result.lt_h.toFixed(1)} L/h`);
            });

        }, 500);
    }


}

main()
